"use strict";(self.webpackChunkfirestore_a=self.webpackChunkfirestore_a||[]).push([[179],{2011:(at,Te,O)=>{O.d(Te,{hO:()=>Qe,xv:()=>_e,Dh:()=>pe,GT:()=>fe,cc:()=>Me,on:()=>$,pX:()=>Q});var E=O(5e3),Y=O(127),P=O(2680);at=O.hmd(at);const ce=["ngOnDestroy"],Q=(Ee,Je,Ge,be={})=>new Proxy(Ee,{get:(me,ve)=>Ge.runOutsideAngular(()=>{var He;if(Ee[ve])return(null===(He=null==be?void 0:be.spy)||void 0===He?void 0:He.get)&&be.spy.get(ve,Ee[ve]),Ee[ve];if(ce.indexOf(ve)>-1)return()=>{};const Be=Je.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(X=>Ge.run(()=>X)):Ge.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>Be[q],apply:(ee,q,X)=>Be.then(le=>{var ne;const Se=le&&le(...X);return(null===(ne=null==be?void 0:be.spy)||void 0===ne?void 0:ne.apply)&&be.spy.apply(ve,X,Se),Se})})})}),fe=(Ee,Je)=>{Je.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(be=>{Object.defineProperty(Ee.prototype,be,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,be))})})};class ae{constructor(Je){return Je}}const pe=new E.OlP("angularfire2.app.options"),_e=new E.OlP("angularfire2.app.name");function $(Ee,Je,Ge){const me="object"==typeof Ge&&Ge||{};me.name=me.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const He=Y.Z.apps.filter(Be=>Be&&Be.name===me.name)[0]||Je.runOutsideAngular(()=>Y.Z.initializeApp(Ee,me));try{JSON.stringify(Ee)!==JSON.stringify(He.options)&&U("error",`${He.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ae(He)}const U=(Ee,...Je)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Je)},Z={provide:ae,useFactory:$,deps:[pe,E.R0b,[new E.FiY,_e]]};let Qe=(()=>{class Ee{constructor(Ge){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",E.q4F.full,Ge.toString())}static initializeApp(Ge,be){return{ngModule:Ee,providers:[{provide:pe,useValue:Ge},{provide:_e,useValue:be}]}}}return Ee.\u0275fac=function(Ge){return new(Ge||Ee)(E.LFG(E.Lbi))},Ee.\u0275mod=E.oAB({type:Ee}),Ee.\u0275inj=E.cJS({providers:[Z]}),Ee})();function Me(Ee,Je,Ge,be,me){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ee)||[];if(ve)return function Oe(Ee,Je){try{return Ee.toString()===Je.toString()}catch(Ge){return Ee===Je}}(me,He)||(de("error",`${Je} was already initialized on the ${Ge} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:me,was:He})),ve;{const Be=be();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Be,me]),Be}}const Ve=!!at.hot,de=(Ee,...Je)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(at,Te,O)=>{O.d(Te,{q4:()=>ua,iC:()=>ca,HU:()=>gc,vb:()=>pc,JM:()=>Ol});var E=O(5e3),Y=O(5867),P=O(5861),ce=O(9681),Q=O(2090),fe=O(4859),ae=O(1877);const pe="@firebase/installations",U="w:0.5.7",Z="FIS_v2",Ee=new Q.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(w){return w instanceof Q.ZR&&w.code.includes("request-failed")}function Ge({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function be(w){return{token:w.token,requestStatus:2,expiresIn:X(w.expiresIn),creationTime:Date.now()}}function me(w,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,P.Z)(function*(w,b){const k=(yield b.json()).error;return Ee.create("request-failed",{requestName:w,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function He({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Be(w,{refreshToken:b}){const x=He(w);return x.append("Authorization",function le(w){return`${Z} ${w}`}(b)),x}function ee(w){return q.apply(this,arguments)}function q(){return(q=(0,P.Z)(function*(w){const b=yield w();return b.status>=500&&b.status<600?w():b})).apply(this,arguments)}function X(w){return Number(w.replace("s","000"))}function ne(w,b){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*({appConfig:w,heartbeatServiceProvider:b},{fid:x}){const k=Ge(w),H=He(w),J=b.getImmediate({optional:!0});if(J){const Xe=yield J.getHeartbeatsHeader();Xe&&H.append("x-firebase-client",Xe)}const qe={method:"POST",headers:H,body:JSON.stringify({fid:x,authVersion:Z,appId:w.appId,sdkVersion:U})},Ke=yield ee(()=>fetch(k,qe));if(Ke.ok){const Xe=yield Ke.json();return{fid:Xe.fid||x,registrationStatus:2,refreshToken:Xe.refreshToken,authToken:be(Xe.authToken)}}throw yield me("Create Installation",Ke)})).apply(this,arguments)}function re(w){return new Promise(b=>{setTimeout(b,w)})}const Gt=/^[cdef][\w-]{21}$/;function st(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const x=function pt(w){return function vt(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Gt.test(x)?x:""}catch(w){return""}}function en(w){return`${w.appName}!${w.appId}`}const tn=new Map;function ai(w,b){const x=en(w);qt(x,b),function kt(w,b){const x=function qr(){return!Yn&&"BroadcastChannel"in self&&(Yn=new BroadcastChannel("[Firebase] FID Change"),Yn.onmessage=w=>{qt(w.data.key,w.data.fid)}),Yn}();x&&x.postMessage({key:w,fid:b}),function ts(){0===tn.size&&Yn&&(Yn.close(),Yn=null)}()}(x,b)}function qt(w,b){const x=tn.get(w);if(x)for(const k of x)k(b)}let Yn=null;const _r="firebase-installations-store";let Pi=null;function Oi(){return Pi||(Pi=(0,Q.X3)("firebase-installations-database",1,(w,b)=>{0===b&&w.createObjectStore(_r)})),Pi}function ut(w,b){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,P.Z)(function*(w,b){const x=en(w),H=(yield Oi()).transaction(_r,"readwrite"),J=H.objectStore(_r),Ce=yield J.get(x);return yield J.put(b,x),yield H.complete,(!Ce||Ce.fid!==b.fid)&&ai(w,b.fid),b})).apply(this,arguments)}function $n(w){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(w){const b=en(w),k=(yield Oi()).transaction(_r,"readwrite");yield k.objectStore(_r).delete(b),yield k.complete})).apply(this,arguments)}function Wr(w,b){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,P.Z)(function*(w,b){const x=en(w),H=(yield Oi()).transaction(_r,"readwrite"),J=H.objectStore(_r),Ce=yield J.get(x),qe=b(Ce);return void 0===qe?yield J.delete(x):yield J.put(qe,x),yield H.complete,qe&&(!Ce||Ce.fid!==qe.fid)&&ai(w,qe.fid),qe})).apply(this,arguments)}function dn(w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,P.Z)(function*(w){let b;const x=yield Wr(w.appConfig,k=>{const H=ns(k),J=Yo(w,H);return b=J.registrationPromise,J.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function ns(w){return Pt(w||{fid:st(),registrationStatus:0})}function Yo(w,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},k=function Ft(w,b){return rt.apply(this,arguments)}(w,x);return{installationEntry:x,registrationPromise:k}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:yt(w)}:{installationEntry:b}}function rt(){return(rt=(0,P.Z)(function*(w,b){try{const x=yield ne(w,b);return ut(w.appConfig,x)}catch(x){throw Je(x)&&409===x.customData.serverCode?yield $n(w.appConfig):yield ut(w.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function yt(w){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(w){let b=yield Di(w.appConfig);for(;1===b.registrationStatus;)yield re(100),b=yield Di(w.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:k}=yield dn(w);return k||x}return b})).apply(this,arguments)}function Di(w){return Wr(w,b=>{if(!b)throw Ee.create("installation-not-found");return Pt(b)})}function Pt(w){return function Ls(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function ar(w,b){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,P.Z)(function*({appConfig:w,heartbeatServiceProvider:b},x){const k=ct(w,x),H=Be(w,x),J=b.getImmediate({optional:!0});if(J){const Xe=yield J.getHeartbeatsHeader();Xe&&H.append("x-firebase-client",Xe)}const qe={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:U,appId:w.appId}})},Ke=yield ee(()=>fetch(k,qe));if(Ke.ok)return be(yield Ke.json());throw yield me("Generate Auth Token",Ke)})).apply(this,arguments)}function ct(w,{fid:b}){return`${Ge(w)}/${b}/authTokens:generate`}function ur(w){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(w,b=!1){let x;const k=yield Wr(w.appConfig,J=>{if(!St(J))throw Ee.create("not-registered");const Ce=J.authToken;if(!b&&B(Ce))return J;if(1===Ce.requestStatus)return x=ze(w,b),J;{if(!navigator.onLine)throw Ee.create("app-offline");const qe=j(J);return x=lt(w,qe),qe}});return x?yield x:k.authToken})).apply(this,arguments)}function ze(w,b){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(w,b){let x=yield Ze(w.appConfig);for(;1===x.authToken.requestStatus;)yield re(100),x=yield Ze(w.appConfig);const k=x.authToken;return 0===k.requestStatus?ur(w,b):k})).apply(this,arguments)}function Ze(w){return Wr(w,b=>{if(!St(b))throw Ee.create("not-registered");return function ue(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function lt(w,b){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(w,b){try{const x=yield ar(w,b),k=Object.assign(Object.assign({},b),{authToken:x});return yield ut(w.appConfig,k),x}catch(x){if(!Je(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const k=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield ut(w.appConfig,k)}else yield $n(w.appConfig);throw x}})).apply(this,arguments)}function St(w){return void 0!==w&&2===w.registrationStatus}function B(w){return 2===w.requestStatus&&!function L(w){const b=Date.now();return b<w.creationTime||w.creationTime+w.expiresIn<b+36e5}(w)}function j(w){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:b})}function ke(){return(ke=(0,P.Z)(function*(w){const b=w,{installationEntry:x,registrationPromise:k}=yield dn(b);return k?k.catch(console.error):ur(b).catch(console.error),x.fid})).apply(this,arguments)}function jt(){return(jt=(0,P.Z)(function*(w,b=!1){const x=w;return yield cr(x),(yield ur(x,b)).token})).apply(this,arguments)}function cr(w){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,P.Z)(function*(w){const{registrationPromise:b}=yield dn(w);b&&(yield b)})).apply(this,arguments)}function Ln(w){return Ee.create("missing-app-config-values",{valueName:w})}const Jo="installations",xe=w=>{const b=w.getProvider("app").getImmediate(),x=function ki(w){if(!w||!w.options)throw Ln("App Configuration");if(!w.name)throw Ln("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!w.options[x])throw Ln(x);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ce._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},At=w=>{const b=w.getProvider("app").getImmediate(),x=(0,ce._getProvider)(b,Jo).getImmediate();return{getId:()=>function K(w){return ke.apply(this,arguments)}(x),getToken:H=>function gt(w){return jt.apply(this,arguments)}(x,H)}};(function on(){(0,ce._registerComponent)(new fe.wA(Jo,xe,"PUBLIC")),(0,ce._registerComponent)(new fe.wA("installations-internal",At,"PRIVATE"))})(),(0,ce.registerVersion)(pe,"0.5.7"),(0,ce.registerVersion)(pe,"0.5.7","esm2017");const Xn="@firebase/remote-config",Tn=new Q.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jd{constructor(b,x,k,H){this.client=b,this.storage=x,this.storageCache=k,this.logger=H}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-x,H=k<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${H}.`),H}fetch(b){var x=this;return(0,P.Z)(function*(){const[k,H]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(H&&x.isCachedDataFresh(b.cacheMaxAgeMillis,k))return H;b.eTag=H&&H.eTag;const J=yield x.client.fetch(b),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Ce),J})()}}function fl(w=navigator){return w.languages&&w.languages[0]||w.language}class Ra{constructor(b,x,k,H,J,Ce){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=k,this.projectId=H,this.apiKey=J,this.appId=Ce}fetch(b){var x=this;return(0,P.Z)(function*(){const[k,H]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ke={sdk_version:x.sdkVersion,app_instance_id:k,app_instance_id_token:H,app_id:x.appId,language_code:fl()},Xe={method:"POST",headers:qe,body:JSON.stringify(Ke)},Rt=fetch(Ce,Xe),nt=new Promise((zi,Ki)=>{b.signal.addEventListener(()=>{const Xs=new Error("The operation was aborted.");Xs.name="AbortError",Ki(Xs)})});let $t;try{yield Promise.race([Rt,nt]),$t=yield Rt}catch(zi){let Ki="fetch-client-network";throw"AbortError"===zi.name&&(Ki="fetch-timeout"),Tn.create(Ki,{originalErrorMessage:zi.message})}let hn=$t.status;const Ts=$t.headers.get("ETag")||void 0;let Js,ko;if(200===$t.status){let zi;try{zi=yield $t.json()}catch(Ki){throw Tn.create("fetch-client-parse",{originalErrorMessage:Ki.message})}Js=zi.entries,ko=zi.state}if("INSTANCE_STATE_UNSPECIFIED"===ko?hn=500:"NO_CHANGE"===ko?hn=304:("NO_TEMPLATE"===ko||"EMPTY_CONFIG"===ko)&&(Js={}),304!==hn&&200!==hn)throw Tn.create("fetch-status",{httpStatus:hn});return{status:hn,eTag:Ts,config:Js}})()}}class Hf{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,P.Z)(function*(){const k=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,k)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:k}){var H=this;return(0,P.Z)(function*(){yield function Rn(w,b){return new Promise((x,k)=>{const H=Math.max(b-Date.now(),0),J=setTimeout(x,H);w.addEventListener(()=>{clearTimeout(J),k(Tn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const J=yield H.client.fetch(b);return yield H.storage.deleteThrottleMetadata(),J}catch(J){if(!function pl(w){if(!(w instanceof Q.ZR&&w.customData))return!1;const b=Number(w.customData.httpStatus);return 429===b||500===b||503===b||504===b}(J))throw J;const Ce={throttleEndTimeMillis:Date.now()+(0,Q.$s)(k),backoffCount:k+1};return yield H.storage.setThrottleMetadata(Ce),H.attemptFetch(b,Ce)}})()}}class Wu{constructor(b,x,k,H,J){this.app=b,this._client=x,this._storageCache=k,this._storage=H,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zu(w,b){const x=w.target.error||void 0;return Tn.create(b,{originalErrorMessage:x&&x.message})}const as="app_namespace_store";class Xd{constructor(b,x,k,H=function Wf(){return new Promise((w,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=k=>{b(zu(k,"storage-open"))},x.onsuccess=k=>{w(k.target.result)},x.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(as,{keyPath:"compositeKey"})}}catch(x){b(Tn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=k,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,P.Z)(function*(){const k=yield x.openDbPromise;return new Promise((H,J)=>{const qe=k.transaction([as],"readonly").objectStore(as),Ke=x.createCompositeKey(b);try{const Xe=qe.get(Ke);Xe.onerror=Rt=>{J(zu(Rt,"storage-get"))},Xe.onsuccess=Rt=>{const nt=Rt.target.result;H(nt?nt.value:void 0)}}catch(Xe){J(Tn.create("storage-get",{originalErrorMessage:Xe&&Xe.message}))}})})()}set(b,x){var k=this;return(0,P.Z)(function*(){const H=yield k.openDbPromise;return new Promise((J,Ce)=>{const Ke=H.transaction([as],"readwrite").objectStore(as),Xe=k.createCompositeKey(b);try{const Rt=Ke.put({compositeKey:Xe,value:x});Rt.onerror=nt=>{Ce(zu(nt,"storage-set"))},Rt.onsuccess=()=>{J()}}catch(Rt){Ce(Tn.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(b){var x=this;return(0,P.Z)(function*(){const k=yield x.openDbPromise;return new Promise((H,J)=>{const qe=k.transaction([as],"readwrite").objectStore(as),Ke=x.createCompositeKey(b);try{const Xe=qe.delete(Ke);Xe.onerror=Rt=>{J(zu(Rt,"storage-delete"))},Xe.onsuccess=()=>{H()}}catch(Xe){J(Tn.create("storage-delete",{originalErrorMessage:Xe&&Xe.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class ml{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const x=b.storage.getLastFetchStatus(),k=b.storage.getLastSuccessfulFetchTimestampMillis(),H=b.storage.getActiveConfig(),J=yield x;J&&(b.lastFetchStatus=J);const Ce=yield k;Ce&&(b.lastSuccessfulFetchTimestampMillis=Ce);const qe=yield H;qe&&(b.activeConfig=qe)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Us(){return eh.apply(this,arguments)}function eh(){return(eh=(0,P.Z)(function*(){if(!(0,Q.hl)())return!1;try{return yield(0,Q.eu)()}catch(w){return!1}})).apply(this,arguments)}!function Io(){(0,ce._registerComponent)(new fe.wA("remote-config",function w(b,{instanceIdentifier:x}){const k=b.getProvider("app").getImmediate(),H=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,Q.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:J,apiKey:Ce,appId:qe}=k.options;if(!J)throw Tn.create("registration-project-id");if(!Ce)throw Tn.create("registration-api-key");if(!qe)throw Tn.create("registration-app-id");const Ke=new Xd(qe,k.name,x=x||"firebase"),Xe=new ml(Ke),Rt=new ae.Yd(Xn);Rt.logLevel=ae.in.ERROR;const nt=new Ra(H,ce.SDK_VERSION,x,J,Ce,qe),$t=new Hf(nt,Ke),hn=new Jd($t,Ke,Xe,Rt),Ts=new Wu(k,hn,Xe,Ke,Rt);return function ui(w){const b=(0,Q.m9)(w);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ts),Ts},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Xn,"0.3.6"),(0,ce.registerVersion)(Xn,"0.3.6","esm2017")}();const Ku="/firebase-messaging-sw.js",us="/firebase-cloud-messaging-push-scope",Rr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",js="google.c.a.c_id",ea="google.c.a.c_l",yl="google.c.a.ts",zf="google.c.a.e";var cs=(()=>{return(w=cs||(cs={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",cs;var w})();function Zr(w){const b=new Uint8Array(w);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oa(w){const x=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(x),H=new Uint8Array(k.length);for(let J=0;J<k.length;++J)H[J]=k.charCodeAt(J);return H}const ka="fcm_token_details_db",tr="fcm_token_object_Store";function th(w){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,P.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(ka))return null;let b=null;return(yield(0,Q.X3)(ka,5,function(){var k=(0,P.Z)(function*(H,J,Ce,qe){var Ke;if(J<2||!H.objectStoreNames.contains(tr))return;const Xe=qe.objectStore(tr),Rt=yield Xe.index("fcmSenderId").get(w);if(yield Xe.clear(),Rt)if(2===J){const nt=Rt;if(!nt.auth||!nt.p256dh||!nt.endpoint)return;b={token:nt.fcmToken,createTime:null!==(Ke=nt.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:nt.auth,p256dh:nt.p256dh,endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:"string"==typeof nt.vapidKey?nt.vapidKey:Zr(nt.vapidKey)}}}else if(3===J){const nt=Rt;b={token:nt.fcmToken,createTime:nt.createTime,subscriptionOptions:{auth:Zr(nt.auth),p256dh:Zr(nt.p256dh),endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:Zr(nt.vapidKey)}}}else if(4===J){const nt=Rt;b={token:nt.fcmToken,createTime:nt.createTime,subscriptionOptions:{auth:Zr(nt.auth),p256dh:Zr(nt.p256dh),endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:Zr(nt.vapidKey)}}}});return function(H,J,Ce,qe){return k.apply(this,arguments)}}())).close(),yield(0,Q.Lj)(ka),yield(0,Q.Lj)("fcm_vapid_details_db"),yield(0,Q.Lj)("undefined"),_l(b)?b:null}),Fa.apply(this,arguments)}function _l(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:b}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Bi="firebase-messaging-store";let ta=null;function Qu(){return ta||(ta=(0,Q.X3)("firebase-messaging-database",1,(w,b)=>{0===b&&w.createObjectStore(Bi)})),ta}function un(w){return bo.apply(this,arguments)}function bo(){return(bo=(0,P.Z)(function*(w){const b=Hs(w),k=yield(yield Qu()).transaction(Bi).objectStore(Bi).get(b);if(k)return k;{const H=yield th(w.appConfig.senderId);if(H)return yield ls(w,H),H}})).apply(this,arguments)}function ls(w,b){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(w,b){const x=Hs(w),H=(yield Qu()).transaction(Bi,"readwrite");return yield H.objectStore(Bi).put(b,x),yield H.complete,b})).apply(this,arguments)}function vl(w){return $s.apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(w){const b=Hs(w),k=(yield Qu()).transaction(Bi,"readwrite");yield k.objectStore(Bi).delete(b),yield k.complete})).apply(this,arguments)}function Hs({appConfig:w}){return w.appId}const Cn=new Q.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function na(w,b){return li.apply(this,arguments)}function li(){return(li=(0,P.Z)(function*(w,b){const x=yield hs(w),k=dt(b),H={method:"POST",headers:x,body:JSON.stringify(k)};let J;try{J=yield(yield fetch(Or(w.appConfig),H)).json()}catch(Ce){throw Cn.create("token-subscribe-failed",{errorInfo:Ce})}if(J.error)throw Cn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Cn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function dr(w,b){return ds.apply(this,arguments)}function ds(){return(ds=(0,P.Z)(function*(w,b){const x=yield hs(w),k=dt(b.subscriptionOptions),H={method:"PATCH",headers:x,body:JSON.stringify(k)};let J;try{J=yield(yield fetch(`${Or(w.appConfig)}/${b.token}`,H)).json()}catch(Ce){throw Cn.create("token-update-failed",{errorInfo:Ce})}if(J.error)throw Cn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Cn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Ui(w,b){return La.apply(this,arguments)}function La(){return(La=(0,P.Z)(function*(w,b){const k={method:"DELETE",headers:yield hs(w)};try{const J=yield(yield fetch(`${Or(w.appConfig)}/${b}`,k)).json();if(J.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(H){throw Cn.create("token-unsubscribe-failed",{errorInfo:H})}})).apply(this,arguments)}function Or({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function hs(w){return fs.apply(this,arguments)}function fs(){return(fs=(0,P.Z)(function*({appConfig:w,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function dt({p256dh:w,auth:b,endpoint:x,vapidKey:k}){const H={web:{endpoint:x,auth:b,p256dh:w}};return k!==Rr&&(H.web.applicationPubKey=k),H}const Va=6048e5;function ra(w){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,P.Z)(function*(w){const b=yield El(w.swRegistration,w.vapidKey),x={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:b.endpoint,auth:Zr(b.getKey("auth")),p256dh:Zr(b.getKey("p256dh"))},k=yield un(w.firebaseDependencies);if(k){if(To(k.subscriptionOptions,x))return Date.now()>=k.createTime+Va?Ju(w,{token:k.token,createTime:Date.now(),subscriptionOptions:x}):k.token;try{yield Ui(w.firebaseDependencies,k.token)}catch(H){console.warn(H)}return Ie(w.firebaseDependencies,x)}return Ie(w.firebaseDependencies,x)})).apply(this,arguments)}function Ua(w){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(w){const b=yield un(w.firebaseDependencies);b&&(yield Ui(w.firebaseDependencies,b.token),yield vl(w.firebaseDependencies));const x=yield w.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ju(w,b){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,P.Z)(function*(w,b){try{const x=yield dr(w.firebaseDependencies,b),k=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield ls(w.firebaseDependencies,k),x}catch(x){throw yield Ua(w),x}})).apply(this,arguments)}function Ie(w,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(w,b){const k={token:yield na(w,b),createTime:Date.now(),subscriptionOptions:b};return yield ls(w,k),k.token})).apply(this,arguments)}function El(w,b){return pn.apply(this,arguments)}function pn(){return(pn=(0,P.Z)(function*(w,b){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oa(b)})})).apply(this,arguments)}function To(w,b){return b.vapidKey===w.vapidKey&&b.endpoint===w.endpoint&&b.auth===w.auth&&b.p256dh===w.p256dh}function Co(w){const b={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function kr(w,b){if(!b.notification)return;w.notification={};const x=b.notification.title;x&&(w.notification.title=x);const k=b.notification.body;k&&(w.notification.body=k);const H=b.notification.image;H&&(w.notification.image=H)}(b,w),function ec(w,b){!b.data||(w.data=b.data)}(b,w),function tc(w,b){if(!b.fcmOptions)return;w.fcmOptions={};const x=b.fcmOptions.link;x&&(w.fcmOptions.link=x);const k=b.fcmOptions.analytics_label;k&&(w.fcmOptions.analyticsLabel=k)}(b,w),b}function Il(w){return"object"==typeof w&&!!w&&js in w}function nc(w,b){const x=[];for(let k=0;k<w.length;k++)x.push(w.charAt(k)),k<b.length&&x.push(b.charAt(k));return x.join("")}function ps(w){return Cn.create("missing-app-config-values",{valueName:w})}nc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nr{constructor(b,x,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function $a(w){if(!w||!w.options)throw ps("App Configuration Object");if(!w.name)throw ps("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=w;for(const k of b)if(!x[k])throw ps(k);return{appName:w.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:H,installations:x,analyticsProvider:k}}_delete(){return Promise.resolve()}}function Yr(w){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,P.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Ku,{scope:us}),w.swRegistration.update().catch(()=>{})}catch(b){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function gs(w,b){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(w,b){if(!b&&!w.swRegistration&&(yield Yr(w)),b||!w.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");w.swRegistration=b}})).apply(this,arguments)}function rc(w,b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,P.Z)(function*(w,b){b?w.vapidKey=b:w.vapidKey||(w.vapidKey=Rr)})).apply(this,arguments)}function ic(){return(ic=(0,P.Z)(function*(w,b){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield rc(w,null==b?void 0:b.vapidKey),yield gs(w,null==b?void 0:b.serviceWorkerRegistration),ra(w)})).apply(this,arguments)}function ia(w,b,x){return sa.apply(this,arguments)}function sa(){return(sa=(0,P.Z)(function*(w,b,x){const k=sc(b);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:x[js],message_name:x[ea],message_time:x[yl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sc(w){switch(w){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wl(){return(wl=(0,P.Z)(function*(w,b){const x=b.data;if(!x.isFirebaseMessaging)return;w.onMessageHandler&&x.messageType===cs.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(Co(x)):w.onMessageHandler.next(Co(x)));const k=x.data;Il(k)&&"1"===k[zf]&&(yield ia(w,x.messageType,k))})).apply(this,arguments)}const ac="@firebase/messaging",Dl=w=>{const b=new nr(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function oc(w,b){return wl.apply(this,arguments)}(b,x)),b},qs=w=>{const b=w.getProvider("messaging").getImmediate();return{getToken:k=>function qa(w,b){return ic.apply(this,arguments)}(b,k)}};function Tl(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,P.Z)(function*(){try{yield(0,Q.eu)()}catch(w){return!1}return"undefined"!=typeof window&&(0,Q.hl)()&&(0,Q.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bl(){(0,ce._registerComponent)(new fe.wA("messaging",Dl,"PUBLIC")),(0,ce._registerComponent)(new fe.wA("messaging-internal",qs,"PRIVATE")),(0,ce.registerVersion)(ac,"0.9.11"),(0,ce.registerVersion)(ac,"0.9.11","esm2017")}();const cc="analytics",am="firebase_id",oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wa="https://www.googletagmanager.com/gtag/js",Pn=new ae.Yd("@firebase/analytics");function Cl(w){return Promise.all(w.map(b=>b.catch(x=>x)))}function Kf(w,b){const x=document.createElement("script");x.src=`${Wa}?l=${w}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Ao(w,b,x,k,H,J){return Al.apply(this,arguments)}function Al(){return(Al=(0,P.Z)(function*(w,b,x,k,H,J){const Ce=k[H];try{if(Ce)yield b[Ce];else{const Ke=(yield Cl(x)).find(Xe=>Xe.measurementId===H);Ke&&(yield b[Ke.appId])}}catch(qe){Pn.error(qe)}w("config",H,J)})).apply(this,arguments)}function dc(w,b,x,k,H){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(w,b,x,k,H){try{let J=[];if(H&&H.send_to){let Ce=H.send_to;Array.isArray(Ce)||(Ce=[Ce]);const qe=yield Cl(x);for(const Ke of Ce){const Xe=qe.find(nt=>nt.measurementId===Ke),Rt=Xe&&b[Xe.appId];if(!Rt){J=[];break}J.push(Rt)}}0===J.length&&(J=Object.values(b)),yield Promise.all(J),w("event",k,H||{})}catch(J){Pn.error(J)}})).apply(this,arguments)}function Zf(){const w=window.document.getElementsByTagName("script");for(const b of Object.values(w))if(b.src&&b.src.includes(Wa))return b;return null}const qn=new Q.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),An=new class _s{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function So(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function xl(w){return nn.apply(this,arguments)}function nn(){return(nn=(0,P.Z)(function*(w){var b;const{appId:x,apiKey:k}=w,H={method:"GET",headers:So(k)},J=oa.replace("{app-id}",x),Ce=yield fetch(J,H);if(200!==Ce.status&&304!==Ce.status){let qe="";try{const Ke=yield Ce.json();(null===(b=Ke.error)||void 0===b?void 0:b.message)&&(qe=Ke.error.message)}catch(Ke){}throw qn.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:qe})}return Ce.json()})).apply(this,arguments)}function vs(w){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(w,b=An,x){const{appId:k,apiKey:H,measurementId:J}=w.options;if(!k)throw qn.create("no-app-id");if(!H){if(J)return{measurementId:J,appId:k};throw qn.create("no-api-key")}const Ce=b.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new aa;return setTimeout((0,P.Z)(function*(){qe.abort()}),void 0!==x?x:6e4),fi({appId:k,apiKey:H,measurementId:J},Ce,qe,b)})).apply(this,arguments)}function fi(w,b,x){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,P.Z)(function*(w,{throttleEndTimeMillis:b,backoffCount:x},k,H=An){const{appId:J,measurementId:Ce}=w;try{yield Jr(k,b)}catch(qe){if(Ce)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:J,measurementId:Ce};throw qe}try{const qe=yield xl(w);return H.deleteThrottleMetadata(J),qe}catch(qe){if(!Ml(qe)){if(H.deleteThrottleMetadata(J),Ce)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:J,measurementId:Ce};throw qe}const Ke=503===Number(qe.customData.httpStatus)?(0,Q.$s)(x,H.intervalMillis,30):(0,Q.$s)(x,H.intervalMillis),Xe={throttleEndTimeMillis:Date.now()+Ke,backoffCount:x+1};return H.setThrottleMetadata(J,Xe),Pn.debug(`Calling attemptFetch again in ${Ke} millis`),fi(w,Xe,k,H)}})).apply(this,arguments)}function Jr(w,b){return new Promise((x,k)=>{const H=Math.max(b-Date.now(),0),J=setTimeout(x,H);w.addEventListener(()=>{clearTimeout(J),k(qn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Ml(w){if(!(w instanceof Q.ZR&&w.customData))return!1;const b=Number(w.customData.httpStatus);return 429===b||500===b||503===b||504===b}class aa{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function Nl(){return xo.apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(){if(!(0,Q.hl)())return Pn.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Q.eu)()}catch(w){return Pn.warn(qn.create("indexeddb-unavailable",{errorInfo:w}).message),!1}return!0})).apply(this,arguments)}function Xr(){return(Xr=(0,P.Z)(function*(w,b,x,k,H,J,Ce){var qe;const Ke=vs(w);Ke.then(hn=>{x[hn.measurementId]=hn.appId,w.options.measurementId&&hn.measurementId!==w.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Pn.error(hn)),b.push(Ke);const Xe=Nl().then(hn=>{if(hn)return k.getId()}),[Rt,nt]=yield Promise.all([Ke,Xe]);Zf()||Kf(J,Rt.measurementId),H("js",new Date);const $t=null!==(qe=null==Ce?void 0:Ce.config)&&void 0!==qe?qe:{};return $t.origin="firebase",$t.update=!0,null!=nt&&($t[am]=nt),H("config",Rt.measurementId,$t),Rt.measurementId})).apply(this,arguments)}class rr{constructor(b){this.app=b}_delete(){return delete pi[this.app.options.appId],Promise.resolve()}}let pi={},Ks=[];const he={};let ei,It,Fr="dataLayer",hc=!1;function ti(w,b,x){!function We(){const w=[];if((0,Q.ru)()&&w.push("This is a browser extension environment."),(0,Q.zI)()||w.push("Cookies are not available."),w.length>0){const b=w.map((k,H)=>`(${H+1}) ${k}`).join(" "),x=qn.create("invalid-analytics-context",{errorInfo:b});Pn.warn(x.message)}}();const k=w.options.appId;if(!k)throw qn.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw qn.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pi[k])throw qn.create("already-exists",{id:k});if(!hc){!function $i(w){let b=[];Array.isArray(window[w])?b=window[w]:window[w]=b}(Fr);const{wrappedGtag:J,gtagCore:Ce}=function rh(w,b,x,k,H){let J=function(...Ce){window[k].push(arguments)};return window[H]&&"function"==typeof window[H]&&(J=window[H]),window[H]=function Sl(w,b,x,k){function J(){return(J=(0,P.Z)(function*(Ce,qe,Ke){try{"event"===Ce?yield dc(w,b,x,qe,Ke):"config"===Ce?yield Ao(w,b,x,k,qe,Ke):w("set",qe)}catch(Xe){Pn.error(Xe)}})).apply(this,arguments)}return function H(Ce,qe,Ke){return J.apply(this,arguments)}}(J,w,b,x),{gtagCore:J,wrappedGtag:window[H]}}(pi,Ks,he,Fr,"gtag");It=J,ei=Ce,hc=!0}return pi[k]=function Mo(w,b,x,k,H,J,Ce){return Xr.apply(this,arguments)}(w,Ks,he,b,ei,Fr,x),new rr(w)}function Zs(){return(Zs=(0,P.Z)(function*(w,b,x,k,H){if(H&&H.global)w("event",x,k);else{const J=yield b;w("event",x,Object.assign(Object.assign({},k),{send_to:J}))}})).apply(this,arguments)}function Lr(){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(){if((0,Q.ru)()||!(0,Q.zI)()||!(0,Q.hl)())return!1;try{return yield(0,Q.eu)()}catch(w){return!1}})).apply(this,arguments)}const Qa="@firebase/analytics";!function oh(){(0,ce._registerComponent)(new fe.wA(cc,(b,{options:x})=>ti(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new fe.wA("analytics-internal",function w(b){try{const x=b.getProvider(cc).getImmediate();return{logEvent:(k,H,J)=>function sh(w,b,x,k){w=(0,Q.m9)(w),function Et(w,b,x,k,H){return Zs.apply(this,arguments)}(It,pi[w.app.options.appId],b,x,k).catch(H=>Pn.error(H))}(x,k,H,J)}}catch(x){throw qn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(Qa,"0.7.7"),(0,ce.registerVersion)(Qa,"0.7.7","esm2017")}();var Er=O(4408),Ir=O(7565);const Xa=new class gn extends Ir.v{}(class Hi extends Er.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(b,x,k):b.flush(this)}});var ah=O(4986),eu=O(576),ir=O(4482),wr=O(5403),Rl=O(4671),Dr=O(9468),Gi=O(5363);const ua=new E.GfV("7.3.0"),tu="__angularfire_symbol__analyticsIsSupportedValue",Pl="__angularfire_symbol__analyticsIsSupported",fc="__angularfire_symbol__remoteConfigIsSupportedValue",qi="__angularfire_symbol__remoteConfigIsSupported",Vn="__angularfire_symbol__messagingIsSupportedValue",Ys="__angularfire_symbol__messagingIsSupported";function Ol(w,b,x){if(b){if(1===b.length)return b[0];const J=b.filter(Ce=>Ce.app===x);if(1===J.length)return J[0]}return x.container.getProvider(w).getImmediate({optional:!0})}globalThis[Pl]||(globalThis[Pl]=Lr().then(w=>globalThis[tu]=w).catch(()=>globalThis[tu]=!1)),globalThis[Ys]||(globalThis[Ys]=Tl().then(w=>globalThis[Vn]=w).catch(()=>globalThis[Vn]=!1)),globalThis[qi]||(globalThis[qi]=Us().then(w=>globalThis[fc]=w).catch(()=>globalThis[fc]=!1));const pc=(w,b)=>{const x=b?[b]:(0,Y.C6)(),k=[];return x.forEach(H=>{H.container.getProvider(w).instances.forEach(Ce=>{k.includes(Ce)||k.push(Ce)})}),k};function bs(){}class Wn{constructor(b,x=Xa){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,k){const H=this.zone;return this.delegate.schedule(function(Ce){H.runGuarded(()=>{b.apply(this,[Ce])})},x,k)}}class Wi{constructor(b){this.zone=b,this.task=null}call(b,x){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),x.pipe(function Po(w,b,x){const k=(0,eu.m)(w)||b||x?{next:w,error:b,complete:x}:w;return k?(0,ir.e)((H,J)=>{var Ce;null===(Ce=k.subscribe)||void 0===Ce||Ce.call(k);let qe=!0;H.subscribe((0,wr.x)(J,Ke=>{var Xe;null===(Xe=k.next)||void 0===Xe||Xe.call(k,Ke),J.next(Ke)},()=>{var Ke;qe=!1,null===(Ke=k.complete)||void 0===Ke||Ke.call(k),J.complete()},Ke=>{var Xe;qe=!1,null===(Xe=k.error)||void 0===Xe||Xe.call(k,Ke),J.error(Ke)},()=>{var Ke,Xe;qe&&(null===(Ke=k.unsubscribe)||void 0===Ke||Ke.call(k)),null===(Xe=k.finalize)||void 0===Xe||Xe.call(k)}))}):Rl.y}({next:k,complete:k,error:k})).subscribe(b).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gc=(()=>{class w{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Wn(Zone.current)),this.insideAngular=x.run(()=>new Wn(Zone.current,ah.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(x){return new(x||w)(E.LFG(E.R0b))},w.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function br(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function ca(w){return br(),function ru(w){return function(x){return(x=x.lift(new Wi(w.ngZone))).pipe((0,Dr.R)(w.outsideAngular),(0,Gi.Q)(w.insideAngular))}}(br())(w)}},2090:(at,Te,O)=>{O.d(Te,{BH:()=>Me,LL:()=>vt,ZR:()=>re,zI:()=>le,US:()=>ae,tV:()=>$,L:()=>_e,$s:()=>Ls,r3:()=>qt,Sg:()=>Oe,ne:()=>ut,vZ:()=>ts,ZB:()=>Z,Lj:()=>Nt,pd:()=>Pi,m9:()=>ct,z$:()=>Ve,jU:()=>Je,ru:()=>Ge,d:()=>me,xb:()=>Yn,w1:()=>ve,hl:()=>q,uI:()=>de,UG:()=>Ee,b$:()=>be,G6:()=>ee,Mn:()=>He,X3:()=>lt,xO:()=>wi,zd:()=>_r,eu:()=>X});var E=O(5861);const Q=function(B){const L=[];let j=0;for(let ue=0;ue<B.length;ue++){let K=B.charCodeAt(ue);K<128?L[j++]=K:K<2048?(L[j++]=K>>6|192,L[j++]=63&K|128):55296==(64512&K)&&ue+1<B.length&&56320==(64512&B.charCodeAt(ue+1))?(K=65536+((1023&K)<<10)+(1023&B.charCodeAt(++ue)),L[j++]=K>>18|240,L[j++]=K>>12&63|128,L[j++]=K>>6&63|128,L[j++]=63&K|128):(L[j++]=K>>12|224,L[j++]=K>>6&63|128,L[j++]=63&K|128)}return L},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let K=0;K<B.length;K+=3){const ke=B[K],gt=K+1<B.length,jt=gt?B[K+1]:0,cr=K+2<B.length,Lt=cr?B[K+2]:0;let sn=(15&jt)<<2|Lt>>6,Gn=63&Lt;cr||(Gn=64,gt||(sn=64)),ue.push(j[ke>>2],j[(3&ke)<<4|jt>>4],j[sn],j[Gn])}return ue.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(Q(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let j=0,ue=0;for(;j<B.length;){const K=B[j++];if(K<128)L[ue++]=String.fromCharCode(K);else if(K>191&&K<224){const ke=B[j++];L[ue++]=String.fromCharCode((31&K)<<6|63&ke)}else if(K>239&&K<365){const cr=((7&K)<<18|(63&B[j++])<<12|(63&B[j++])<<6|63&B[j++])-65536;L[ue++]=String.fromCharCode(55296+(cr>>10)),L[ue++]=String.fromCharCode(56320+(1023&cr))}else{const ke=B[j++],gt=B[j++];L[ue++]=String.fromCharCode((15&K)<<12|(63&ke)<<6|63&gt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const j=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let K=0;K<B.length;){const ke=j[B.charAt(K++)],jt=K<B.length?j[B.charAt(K)]:0;++K;const Lt=K<B.length?j[B.charAt(K)]:64;++K;const Ct=K<B.length?j[B.charAt(K)]:64;if(++K,null==ke||null==jt||null==Lt||null==Ct)throw Error();ue.push(ke<<2|jt>>4),64!==Lt&&(ue.push(jt<<4&240|Lt>>2),64!==Ct&&ue.push(Lt<<6&192|Ct))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},_e=function(B){return function(B){const L=Q(B);return ae.encodeByteArray(L,!0)}(B).replace(/\./g,"")},$=function(B){try{return ae.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Z(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const j in L)!L.hasOwnProperty(j)||!Qe(j)||(B[j]=Z(B[j],L[j]));return B}function Qe(B){return"__proto__"!==B}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,j)=>{this.resolve=L,this.reject=j})}wrapCallback(L){return(j,ue)=>{j?this.reject(j):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(j):L(j,ue))}}}function Oe(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",K=B.iat||0,ke=B.sub||B.user_id;if(!ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:K,exp:K+3600,auth_time:K,sub:ke,user_id:ke,firebase:{sign_in_provider:"custom",identities:{}}},B);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(gt)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Je(){return"object"==typeof self&&self.self===self}function Ge(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return Ve().indexOf("Electron/")>=0}function ve(){const B=Ve();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Ve().indexOf("MSAppHost/")>=0}function ee(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function X(){return new Promise((B,L)=>{try{let j=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(ue);K.onsuccess=()=>{K.result.close(),j||self.indexedDB.deleteDatabase(ue),B(!0)},K.onupgradeneeded=()=>{j=!1},K.onerror=()=>{var ke;L((null===(ke=K.error)||void 0===ke?void 0:ke.message)||"")}}catch(j){L(j)}})}function le(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class re extends Error{constructor(L,j,ue){super(j),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(L,j,ue){this.service=L,this.serviceName=j,this.errors=ue}create(L,...j){const ue=j[0]||{},K=`${this.service}/${L}`,ke=this.errors[L],gt=ke?function Gt(B,L){return B.replace(bn,(j,ue)=>{const K=L[ue];return null!=K?String(K):`<${ue}?>`})}(ke,ue):"Error";return new re(K,`${this.serviceName}: ${gt} (${K}).`,ue)}}const bn=/\{\$([^}]+)}/g;function qt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function Yn(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function ts(B,L){if(B===L)return!0;const j=Object.keys(B),ue=Object.keys(L);for(const K of j){if(!ue.includes(K))return!1;const ke=B[K],gt=L[K];if(yr(ke)&&yr(gt)){if(!ts(ke,gt))return!1}else if(ke!==gt)return!1}for(const K of ue)if(!j.includes(K))return!1;return!0}function yr(B){return null!==B&&"object"==typeof B}function wi(B){const L=[];for(const[j,ue]of Object.entries(B))Array.isArray(ue)?ue.forEach(K=>{L.push(encodeURIComponent(j)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(j)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function _r(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[K,ke]=ue.split("=");L[decodeURIComponent(K)]=decodeURIComponent(ke)}}),L}function Pi(B){const L=B.indexOf("?");if(!L)return"";const j=B.indexOf("#",L);return B.substring(L,j>0?j:void 0)}function ut(B,L){const j=new Mr(B,L);return j.subscribe.bind(j)}class Mr{constructor(L,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver(j=>{j.next(L)})}error(L){this.forEachObserver(j=>{j.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,j,ue){let K;if(void 0===L&&void 0===j&&void 0===ue)throw new Error("Missing Observer.");K=function Fn(B,L){if("object"!=typeof B||null===B)return!1;for(const j of L)if(j in B&&"function"==typeof B[j])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:j,complete:ue},void 0===K.next&&(K.next=Wr),void 0===K.error&&(K.error=Wr),void 0===K.complete&&(K.complete=Wr);const ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(gt){}}),this.observers.push(K),ke}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,L)}sendOne(L,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{j(this.observers[L])}catch(ue){"undefined"!=typeof console&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wr(){}function Ls(B,L=1e3,j=2){const ue=L*Math.pow(j,B),K=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+K)}function ct(B){return B&&B._delegate?B._delegate:B}function ur(B,L){return new Promise((j,ue)=>{B.onsuccess=K=>{j(K.target.result)},B.onerror=K=>{var ke;ue(`${L}: ${null===(ke=K.target.error)||void 0===ke?void 0:ke.message}`)}})}class Mt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,j){return new ze(this._db.transaction.call(this._db,L,j))}createObjectStore(L,j){return new we(this._db.createObjectStore(L,j))}close(){this._db.close()}}class ze{constructor(L){this._transaction=L,this.complete=new Promise((j,ue)=>{this._transaction.oncomplete=function(){j()},this._transaction.onerror=()=>{ue(this._transaction.error)},this._transaction.onabort=()=>{ue(this._transaction.error)}})}objectStore(L){return new we(this._transaction.objectStore(L))}}class we{constructor(L){this._store=L}index(L){return new Ze(this._store.index(L))}createIndex(L,j,ue){return new Ze(this._store.createIndex(L,j,ue))}get(L){return ur(this._store.get(L),"Error reading from IndexedDB")}put(L,j){return ur(this._store.put(L,j),"Error writing to IndexedDB")}delete(L){return ur(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return ur(this._store.clear(),"Error clearing IndexedDB object store")}}class Ze{constructor(L){this._index=L}get(L){return ur(this._index.get(L),"Error reading from IndexedDB")}}function lt(B,L,j){return new Promise((ue,K)=>{try{const ke=indexedDB.open(B,L);ke.onsuccess=gt=>{ue(new Mt(gt.target.result))},ke.onerror=gt=>{var jt;K(`Error opening indexedDB: ${null===(jt=gt.target.error)||void 0===jt?void 0:jt.message}`)},ke.onupgradeneeded=gt=>{j(new Mt(ke.result),gt.oldVersion,gt.newVersion,new ze(ke.transaction))}}catch(ke){K(`Error opening indexedDB: ${ke.message}`)}})}function Nt(B){return St.apply(this,arguments)}function St(){return(St=(0,E.Z)(function*(B){return new Promise((L,j)=>{try{const ue=indexedDB.deleteDatabase(B);ue.onsuccess=()=>{L()},ue.onerror=K=>{var ke;j(`Error deleting indexedDB database "${B}": ${null===(ke=K.target.error)||void 0===ke?void 0:ke.message}`)}}catch(ue){j(`Error deleting indexedDB database "${B}": ${ue.message}`)}})})).apply(this,arguments)}},4989:(at,Te,O)=>{var E=O(5e3);let Y=null;function P(){return Y}const ae=new E.OlP("DocumentToken");var le=(()=>((le=le||{})[le.Format=0]="Format",le[le.Standalone=1]="Standalone",le))(),ne=(()=>((ne=ne||{})[ne.Narrow=0]="Narrow",ne[ne.Abbreviated=1]="Abbreviated",ne[ne.Wide=2]="Wide",ne[ne.Short=3]="Short",ne))(),Se=(()=>((Se=Se||{})[Se.Short=0]="Short",Se[Se.Medium=1]="Medium",Se[Se.Long=2]="Long",Se[Se.Full=3]="Full",Se))(),re=(()=>((re=re||{})[re.Decimal=0]="Decimal",re[re.Group=1]="Group",re[re.List=2]="List",re[re.PercentSign=3]="PercentSign",re[re.PlusSign=4]="PlusSign",re[re.MinusSign=5]="MinusSign",re[re.Exponential=6]="Exponential",re[re.SuperscriptingExponent=7]="SuperscriptingExponent",re[re.PerMille=8]="PerMille",re[re.Infinity=9]="Infinity",re[re.NaN=10]="NaN",re[re.TimeSeparator=11]="TimeSeparator",re[re.CurrencyDecimal=12]="CurrencyDecimal",re[re.CurrencyGroup=13]="CurrencyGroup",re))();function Kt(n,e){return $n((0,E.cg1)(n)[E.wAp.DateFormat],e)}function Ri(n,e){return $n((0,E.cg1)(n)[E.wAp.TimeFormat],e)}function qt(n,e){return $n((0,E.cg1)(n)[E.wAp.DateTimeFormat],e)}function kt(n,e){const t=(0,E.cg1)(n),s=t[E.wAp.NumberSymbols][e];if(void 0===s){if(e===re.CurrencyDecimal)return t[E.wAp.NumberSymbols][re.Decimal];if(e===re.CurrencyGroup)return t[E.wAp.NumberSymbols][re.Group]}return s}function Pi(n){if(!n[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function $n(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Fn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Hn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ns={},Yo=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ft=(()=>((Ft=Ft||{})[Ft.Short=0]="Short",Ft[Ft.ShortGMT=1]="ShortGMT",Ft[Ft.Long=2]="Long",Ft[Ft.Extended=3]="Extended",Ft))(),rt=(()=>((rt=rt||{})[rt.FullYear=0]="FullYear",rt[rt.Month=1]="Month",rt[rt.Date=2]="Date",rt[rt.Hours=3]="Hours",rt[rt.Minutes=4]="Minutes",rt[rt.Seconds=5]="Seconds",rt[rt.FractionalSeconds=6]="FractionalSeconds",rt[rt.Day=7]="Day",rt))(),yt=(()=>((yt=yt||{})[yt.DayPeriods=0]="DayPeriods",yt[yt.Days=1]="Days",yt[yt.Months=2]="Months",yt[yt.Eras=3]="Eras",yt))();function Qn(n,e,t,s){let a=function jt(n){if(Lt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,l=1,p=1]=n.split("-").map(_=>+_);return Di(a,l-1,p)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let s;if(s=n.match(Hn))return function cr(n){const e=new Date(0);let t=0,s=0;const a=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),s=Number(n[9]+n[11])),a.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const p=Number(n[4]||0)-t,_=Number(n[5]||0)-s,D=Number(n[6]||0),A=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,p,_,D,A),e}(s)}const e=new Date(n);if(!Lt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pt(t,e)||e;let _,p=[];for(;e;){if(_=Yo.exec(e),!_){p.push(e);break}{p=p.concat(_.slice(1));const N=p.pop();if(!N)break;e=N}}let D=a.getTimezoneOffset();s&&(D=K(s,D),a=function gt(n,e,t){const s=t?-1:1,a=n.getTimezoneOffset();return function ke(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,s*(K(e,a)-a))}(a,s,!0));let A="";return p.forEach(N=>{const F=function ue(n){if(j[n])return j[n];let e;switch(n){case"G":case"GG":case"GGG":e=Mt(yt.Eras,ne.Abbreviated);break;case"GGGG":e=Mt(yt.Eras,ne.Wide);break;case"GGGGG":e=Mt(yt.Eras,ne.Narrow);break;case"y":e=ct(rt.FullYear,1,0,!1,!0);break;case"yy":e=ct(rt.FullYear,2,0,!0,!0);break;case"yyy":e=ct(rt.FullYear,3,0,!1,!0);break;case"yyyy":e=ct(rt.FullYear,4,0,!1,!0);break;case"Y":e=L(1);break;case"YY":e=L(2,!0);break;case"YYY":e=L(3);break;case"YYYY":e=L(4);break;case"M":case"L":e=ct(rt.Month,1,1);break;case"MM":case"LL":e=ct(rt.Month,2,1);break;case"MMM":e=Mt(yt.Months,ne.Abbreviated);break;case"MMMM":e=Mt(yt.Months,ne.Wide);break;case"MMMMM":e=Mt(yt.Months,ne.Narrow);break;case"LLL":e=Mt(yt.Months,ne.Abbreviated,le.Standalone);break;case"LLLL":e=Mt(yt.Months,ne.Wide,le.Standalone);break;case"LLLLL":e=Mt(yt.Months,ne.Narrow,le.Standalone);break;case"w":e=B(1);break;case"ww":e=B(2);break;case"W":e=B(1,!0);break;case"d":e=ct(rt.Date,1);break;case"dd":e=ct(rt.Date,2);break;case"c":case"cc":e=ct(rt.Day,1);break;case"ccc":e=Mt(yt.Days,ne.Abbreviated,le.Standalone);break;case"cccc":e=Mt(yt.Days,ne.Wide,le.Standalone);break;case"ccccc":e=Mt(yt.Days,ne.Narrow,le.Standalone);break;case"cccccc":e=Mt(yt.Days,ne.Short,le.Standalone);break;case"E":case"EE":case"EEE":e=Mt(yt.Days,ne.Abbreviated);break;case"EEEE":e=Mt(yt.Days,ne.Wide);break;case"EEEEE":e=Mt(yt.Days,ne.Narrow);break;case"EEEEEE":e=Mt(yt.Days,ne.Short);break;case"a":case"aa":case"aaa":e=Mt(yt.DayPeriods,ne.Abbreviated);break;case"aaaa":e=Mt(yt.DayPeriods,ne.Wide);break;case"aaaaa":e=Mt(yt.DayPeriods,ne.Narrow);break;case"b":case"bb":case"bbb":e=Mt(yt.DayPeriods,ne.Abbreviated,le.Standalone,!0);break;case"bbbb":e=Mt(yt.DayPeriods,ne.Wide,le.Standalone,!0);break;case"bbbbb":e=Mt(yt.DayPeriods,ne.Narrow,le.Standalone,!0);break;case"B":case"BB":case"BBB":e=Mt(yt.DayPeriods,ne.Abbreviated,le.Format,!0);break;case"BBBB":e=Mt(yt.DayPeriods,ne.Wide,le.Format,!0);break;case"BBBBB":e=Mt(yt.DayPeriods,ne.Narrow,le.Format,!0);break;case"h":e=ct(rt.Hours,1,-12);break;case"hh":e=ct(rt.Hours,2,-12);break;case"H":e=ct(rt.Hours,1);break;case"HH":e=ct(rt.Hours,2);break;case"m":e=ct(rt.Minutes,1);break;case"mm":e=ct(rt.Minutes,2);break;case"s":e=ct(rt.Seconds,1);break;case"ss":e=ct(rt.Seconds,2);break;case"S":e=ct(rt.FractionalSeconds,1);break;case"SS":e=ct(rt.FractionalSeconds,2);break;case"SSS":e=ct(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=we(Ft.Short);break;case"ZZZZZ":e=we(Ft.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=we(Ft.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=we(Ft.Long);break;default:return null}return j[n]=e,e}(N);A+=F?F(a,t,D):"''"===N?"'":N.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),A}function Di(n,e,t){const s=new Date(0);return s.setFullYear(n,e,t),s.setHours(0,0,0),s}function Pt(n,e){const t=function Gt(n){return(0,E.cg1)(n)[E.wAp.LocaleId]}(n);if(ns[t]=ns[t]||{},ns[t][e])return ns[t][e];let s="";switch(e){case"shortDate":s=Kt(n,Se.Short);break;case"mediumDate":s=Kt(n,Se.Medium);break;case"longDate":s=Kt(n,Se.Long);break;case"fullDate":s=Kt(n,Se.Full);break;case"shortTime":s=Ri(n,Se.Short);break;case"mediumTime":s=Ri(n,Se.Medium);break;case"longTime":s=Ri(n,Se.Long);break;case"fullTime":s=Ri(n,Se.Full);break;case"short":const a=Pt(n,"shortTime"),l=Pt(n,"shortDate");s=Ls(qt(n,Se.Short),[a,l]);break;case"medium":const p=Pt(n,"mediumTime"),_=Pt(n,"mediumDate");s=Ls(qt(n,Se.Medium),[p,_]);break;case"long":const D=Pt(n,"longTime"),A=Pt(n,"longDate");s=Ls(qt(n,Se.Long),[D,A]);break;case"full":const N=Pt(n,"fullTime"),F=Pt(n,"fullDate");s=Ls(qt(n,Se.Full),[N,F])}return s&&(ns[t][e]=s),s}function Ls(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,s){return null!=e&&s in e?e[s]:t})),n}function ar(n,e,t="-",s,a){let l="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,l=t));let p=String(n);for(;p.length<e;)p="0"+p;return s&&(p=p.substr(p.length-e)),l+p}function ct(n,e,t=0,s=!1,a=!1){return function(l,p){let _=function ur(n,e){switch(n){case rt.FullYear:return e.getFullYear();case rt.Month:return e.getMonth();case rt.Date:return e.getDate();case rt.Hours:return e.getHours();case rt.Minutes:return e.getMinutes();case rt.Seconds:return e.getSeconds();case rt.FractionalSeconds:return e.getMilliseconds();case rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||_>-t)&&(_+=t),n===rt.Hours)0===_&&-12===t&&(_=12);else if(n===rt.FractionalSeconds)return function Jn(n,e){return ar(n,3).substr(0,e)}(_,e);const D=kt(p,re.MinusSign);return ar(_,e,D,s,a)}}function Mt(n,e,t=le.Format,s=!1){return function(a,l){return function ze(n,e,t,s,a,l){switch(t){case yt.Months:return function pt(n,e,t){const s=(0,E.cg1)(n),l=$n([s[E.wAp.MonthsFormat],s[E.wAp.MonthsStandalone]],e);return $n(l,t)}(e,a,s)[n.getMonth()];case yt.Days:return function st(n,e,t){const s=(0,E.cg1)(n),l=$n([s[E.wAp.DaysFormat],s[E.wAp.DaysStandalone]],e);return $n(l,t)}(e,a,s)[n.getDay()];case yt.DayPeriods:const p=n.getHours(),_=n.getMinutes();if(l){const A=function Oi(n){const e=(0,E.cg1)(n);return Pi(e),(e[E.wAp.ExtraData][2]||[]).map(s=>"string"==typeof s?Fn(s):[Fn(s[0]),Fn(s[1])])}(e),N=function ut(n,e,t){const s=(0,E.cg1)(n);Pi(s);const l=$n([s[E.wAp.ExtraData][0],s[E.wAp.ExtraData][1]],e)||[];return $n(l,t)||[]}(e,a,s),F=A.findIndex(z=>{if(Array.isArray(z)){const[oe,ye]=z,$e=p>=oe.hours&&_>=oe.minutes,ot=p<ye.hours||p===ye.hours&&_<ye.minutes;if(oe.hours<ye.hours){if($e&&ot)return!0}else if($e||ot)return!0}else if(z.hours===p&&z.minutes===_)return!0;return!1});if(-1!==F)return N[F]}return function bn(n,e,t){const s=(0,E.cg1)(n),l=$n([s[E.wAp.DayPeriodsFormat],s[E.wAp.DayPeriodsStandalone]],e);return $n(l,t)}(e,a,s)[p<12?0:1];case yt.Eras:return function en(n,e){return $n((0,E.cg1)(n)[E.wAp.Eras],e)}(e,s)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(a,l,n,e,t,s)}}function we(n){return function(e,t,s){const a=-1*s,l=kt(t,re.MinusSign),p=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case Ft.Short:return(a>=0?"+":"")+ar(p,2,l)+ar(Math.abs(a%60),2,l);case Ft.ShortGMT:return"GMT"+(a>=0?"+":"")+ar(p,1,l);case Ft.Long:return"GMT"+(a>=0?"+":"")+ar(p,2,l)+":"+ar(Math.abs(a%60),2,l);case Ft.Extended:return 0===s?"Z":(a>=0?"+":"")+ar(p,2,l)+":"+ar(Math.abs(a%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function St(n){return Di(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function B(n,e=!1){return function(t,s){let a;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,p=t.getDate();a=1+Math.floor((p+l)/7)}else{const l=St(t),p=function Nt(n){const e=Di(n,0,1).getDay();return Di(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),_=l.getTime()-p.getTime();a=1+Math.round(_/6048e5)}return ar(a,n,kt(s,re.MinusSign))}}function L(n,e=!1){return function(t,s){return ar(St(t).getFullYear(),n,kt(s,re.MinusSign),e)}}const j={};function K(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Lt(n){return n instanceof Date&&!isNaN(n.valueOf())}class ss{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let er=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=this._viewContainer;t.forEachOperation((a,l,p)=>{if(null==a.previousIndex)s.createEmbeddedView(this._template,new ss(a.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)s.remove(null===l?void 0:l);else if(null!==l){const _=s.get(l);s.move(_,p),Fi(_,a)}});for(let a=0,l=s.length;a<l;a++){const _=s.get(a).context;_.index=a,_.count=l,_.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{Fi(s.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},n.\u0275dir=E.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Fi(n,e){n.context.$implicit=e.item}function Rn(n,e){return new E.vHH(2100,"")}class pl{createSubscription(e,t){return e.subscribe({next:t,error:s=>{throw s}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Hf{createSubscription(e,t){return e.then(t,s=>{throw s})}dispose(e){}onDestroy(e){}}const Vi=new Hf,Gf=new pl;let Wu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,s=>this._updateLatestValue(t,s))}_selectStrategy(t){if((0,E.QGY)(t))return Vi;if((0,E.F4k)(t))return Gf;throw Rn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,s){t===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(E.sBO,16))},n.\u0275pipe=E.Yjl({name:"async",type:n,pure:!1}),n})();const Wf=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Xd=(()=>{class n{constructor(t,s){this.locale=t,this.defaultTimezone=s}transform(t,s="mediumDate",a,l){var p;if(null==t||""===t||t!=t)return null;try{return Qn(t,s,l||this.locale,null!==(p=null!=a?a:this.defaultTimezone)&&void 0!==p?p:void 0)}catch(_){throw Rn()}}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(E.soG,16),E.Y36(Wf,24))},n.\u0275pipe=E.Yjl({name:"date",type:n,pure:!0}),n})(),Do=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({}),n})();function tr(n){return"server"===n}class ls extends class bo extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Q(n){Y||(Y=n)}(new ls)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vl(){return Qt=Qt||document.querySelector("base"),Qt?Qt.getAttribute("href"):null}();return null==t?null:function Hs(n){$s=$s||document.createElement("a"),$s.setAttribute("href",n);const e=$s.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Eo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let $s,Qt=null;const lr=new E.OlP("TRANSITION_ID"),na=[{provide:E.ip1,useFactory:function Cn(n,e,t){return()=>{t.get(E.CZH).donePromise.then(()=>{const s=P(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[lr,ae,E.zs3],multi:!0}];class li{static init(){(0,E.VLi)(new li)}addToWindow(e){E.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},E.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(s=>{const a=E.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const _=function(D){p=p||D,l--,0==l&&s(p)};a.forEach(function(D){D.whenStable(_)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const ds=new E.OlP("EventManagerPlugins");let Ui=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ds),E.LFG(E.R0b))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class La{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=P().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Or=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),hs=(()=>{class n extends Or{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(fs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fs))}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ae))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function fs(n){P().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Va=/%COMP%/g;function Ie(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?Ie(n,a,t):(a=a.replace(Va,n),t.push(a))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case E.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new ec(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case E.ifc.ShadowDom:return new tc(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=Ie(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Ui),E.LFG(hs),E.LFG(E.AFp))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=dt[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=dt[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(E.JOm.DashCase|E.JOm.Important)?e.style.setProperty(t,s,a&E.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&E.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(s)):this.eventManager.addEventListener(e,t,xt(s))}}class ec extends To{constructor(e,t,s,a){super(e),this.component=s;const l=Ie(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr=function Ju(n){return"_ngcontent-%COMP%".replace(Va,n)}(a+"-"+s.id),this.hostAttr=function Xu(n){return"_nghost-%COMP%".replace(Va,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class tc extends To{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ie(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const _=document.createElement("style");_.textContent=l[p],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Il=(()=>{class n extends La{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ae))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const nc=["alt","control","meta","shift"],ps={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ha=(()=>{class n extends La{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(nc.forEach(D=>{const A=s.indexOf(D);A>-1&&(s.splice(A,1),p+=D+".")}),p+=l,0!=s.length||0===l.length)return null;const _={};return _.domEventName=a,_.fullKey=p,_}static getEventFullKey(t){let s="",a=function gs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&nr.hasOwnProperty(e)&&(e=nr[e]))}return ps[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),nc.forEach(l=>{l!=a&&Yr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ae))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const ic=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:"browser"},{provide:E.g9A,useValue:function di(){ls.makeCurrent(),li.init()},multi:!0},{provide:ae,useFactory:function Ga(){return(0,E.RDi)(document),document},deps:[]}]),ia=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function rc(){return new E.qLn},deps:[]},{provide:ds,useClass:Il,multi:!0,deps:[ae,E.R0b,E.Lbi]},{provide:ds,useClass:Ha,multi:!0,deps:[ae]},{provide:pn,useClass:pn,deps:[Ui,hs,E.AFp]},{provide:E.FYo,useExisting:pn},{provide:Or,useExisting:hs},{provide:hs,useClass:hs,deps:[ae]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:Ui,useClass:Ui,deps:[ds,E.R0b]},{provide:class un{},useClass:dr,deps:[]}];let sa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:E.AFp,useValue:t.appId},{provide:lr,useExisting:E.AFp},na]}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(n,12))},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:ia,imports:[Do,E.hGG]}),n})();"undefined"!=typeof window&&window;var um=O(4986),qn=O(8306),Ti=O(8996),hi=O(7669);function _s(...n){const e=(0,hi.yG)(n);return(0,Ti.D)(n,e)}var An=O(2680),So=O(6131);function nn(...n){return function xl(){return(0,So.J)(1)}()((0,Ti.D)(n,(0,hi.yG)(n)))}var vs=O(4482);function Qr(...n){const e=(0,hi.yG)(n);return(0,vs.e)((t,s)=>{(e?nn(n,t,e):nn(n,t)).subscribe(s)})}var fi=O(5403);function Ci(){return(0,vs.e)((n,e)=>{let t,s=!1;n.subscribe((0,fi.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var Jr=O(4004);function Ml(n,e,t,s,a){return(l,p)=>{let _=t,D=e,A=0;l.subscribe((0,fi.x)(p,N=>{const F=A++;D=_?n(D,N,F):(_=!0,N),s&&p.next(D)},a&&(()=>{_&&p.next(D),p.complete()})))}}function aa(n,e){return(0,vs.e)(Ml(n,e,arguments.length>=2,!0))}var Nl=O(4671);function Mo(n,e){return n===e}function Xr(n,e){return(0,vs.e)((t,s)=>{let a=0;t.subscribe((0,fi.x)(s,l=>n.call(e,l,a++)&&s.next(l)))})}var We,rr=O(2011),Ks=(O(4087),O(3942)),he=O(5861),Fr=O(9681),No=O(4859),ei=O(1877),It=O(2090),hc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Es={},ti=ti||{},Et=hc||self;function Zs(){}function za(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Is="closure_uid_"+(1e9*Math.random()>>>0),Ka=0;function ws(n,e,t){return n.call.apply(n.bind,arguments)}function Ro(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function rn(n,e,t){return(rn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ws:Ro).apply(null,arguments)}function Za(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function On(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),_=2;_<arguments.length;_++)p[_-2]=arguments[_];return e.prototype[a].apply(s,p)}}function Lr(){this.s=this.s,this.o=this.o}var Yf={};Lr.prototype.s=!1,Lr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ih(n){return Object.prototype.hasOwnProperty.call(n,Is)&&n[Is]||(n[Is]=++Ka)}(this);delete Yf[n]}},Lr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const En=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Qf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function sh(n){return Array.prototype.concat.apply([],arguments)}function Qa(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function Ja(n){return/^[\s\xa0]*$/.test(n)}var Ir,oh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Er(n,e){return-1!=n.indexOf(e)}function Hi(n,e){return n<e?-1:n>e?1:0}e:{var gn=Et.navigator;if(gn){var Xa=gn.userAgent;if(Xa){Ir=Xa;break e}}Ir=""}function Ds(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function ah(n){const e={};for(const t in n)e[t]=n[t];return e}var eu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ir(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<eu.length;l++)t=eu[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function wr(n){return wr[" "](n),n}wr[" "]=Zs;var qi,n,Po=Er(Ir,"Opera"),Dr=Er(Ir,"Trident")||Er(Ir,"MSIE"),Gi=Er(Ir,"Edge"),ua=Gi||Dr,tu=Er(Ir,"Gecko")&&!(Er(Ir.toLowerCase(),"webkit")&&!Er(Ir,"Edge"))&&!(Er(Ir,"Trident")||Er(Ir,"MSIE"))&&!Er(Ir,"Edge"),Pl=Er(Ir.toLowerCase(),"webkit")&&!Er(Ir,"Edge");function fc(){var n=Et.document;return n?n.documentMode:void 0}e:{var Vn="",Ys=(n=Ir,tu?/rv:([^\);]+)(\)|;)/.exec(n):Gi?/Edge\/([\d\.]+)/.exec(n):Dr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pl?/WebKit\/(\S+)/.exec(n):Po?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ys&&(Vn=Ys?Ys[1]:""),Dr){var Ai=fc();if(null!=Ai&&Ai>parseFloat(Vn)){qi=String(Ai);break e}}qi=Vn}var uh={};var pc=Et.document&&Dr&&(fc()||parseInt(qi,10))||void 0,bs=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Zs,e),Et.removeEventListener("test",Zs,e)}catch(t){}return n}();function Wn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Wi(n,e){if(Wn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tu){e:{try{wr(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gc[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wi.Z.h.call(this)}}Wn.prototype.h=function(){this.defaultPrevented=!0},On(Wi,Wn);var gc={2:"touch",3:"pen",4:"mouse"};Wi.prototype.h=function(){Wi.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var br="closure_listenable_"+(1e6*Math.random()|0),kl=0;function Vr(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++kl,this.ca=this.fa=!1}function Qs(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Oo(n){this.src=n,this.g={},this.h=0}function ca(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=En(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Qs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ru(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}Oo.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=ru(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new Vr(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var mc="closure_lm_"+(1e6*Math.random()|0),yc={};function w(n,e,t,s,a){if(s&&s.once)return k(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)w(n,e[l],t,s,a);return null}return t=Rt(t),n&&n[br]?n.N(e,t,vr(s)?!!s.capture:!!s,a):b(n,e,t,!1,s,a)}function b(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=vr(a)?!!a.capture:!!a,_=Ke(n);if(_||(n[mc]=_=new Oo(n)),(t=_.add(e,t,s,p,l)).proxy)return t;if(s=function x(){var e=qe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)bs||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Ce(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function k(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)k(n,e[l],t,s,a);return null}return t=Rt(t),n&&n[br]?n.O(e,t,vr(s)?!!s.capture:!!s,a):b(n,e,t,!0,s,a)}function H(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)H(n,e[l],t,s,a);else s=vr(s)?!!s.capture:!!s,t=Rt(t),n&&n[br]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ru(l=n.g[e],t,s,a))&&(Qs(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Ke(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ru(e,t,s,a)),(t=-1<n?e[n]:null)&&J(t))}function J(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[br])ca(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Ce(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ke(e))?(ca(t,n),0==t.h&&(t.src=null,e[mc]=null)):Qs(n)}}}function Ce(n){return n in yc?yc[n]:yc[n]="on"+n}function qe(n,e){if(n.ca)n=!0;else{e=new Wi(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&J(n),n=t.call(s,e)}return n}function Ke(n){return(n=n[mc])instanceof Oo?n:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(n){return"function"==typeof n?n:(n[Xe]||(n[Xe]=function(e){return n.handleEvent(e)}),n[Xe])}function nt(){Lr.call(this),this.i=new Oo(this),this.P=this,this.I=null}function $t(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Wn(e,n);else if(e instanceof Wn)e.target=e.target||n;else{var a=e;ir(e=new Wn(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=hn(p,s,!0,e)&&a}if(a=hn(p=e.g=n,s,!0,e)&&a,a=hn(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=hn(p=e.g=t[l],s,!1,e)&&a}function hn(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var _=p.listener,D=p.ia||p.src;p.fa&&ca(n.i,p),a=!1!==_.call(D,s)&&a}}return a&&!s.defaultPrevented}On(nt,Lr),nt.prototype[br]=!0,nt.prototype.removeEventListener=function(n,e,t,s){H(this,n,e,t,s)},nt.prototype.M=function(){if(nt.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Qs(t[s]);delete n.g[e],n.h--}}this.I=null},nt.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},nt.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Ts=Et.JSON.stringify;function Js(){var n=iu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lh,zi=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ki,n=>n.reset());class Ki{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Xs(n){Et.setTimeout(()=>{throw n},0)}function Fl(n,e){lh||function lm(){var n=Et.Promise.resolve(void 0);lh=function(){n.then(dm)}}(),Cs||(lh(),Cs=!0),iu.add(n,e)}var Cs=!1,iu=new class ko{constructor(){this.h=this.g=null}add(e,t){const s=zi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function dm(){for(var n;n=Js();){try{n.h.call(n.g)}catch(t){Xs(t)}var e=zi;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cs=!1}function Ll(n,e){nt.call(this),this.h=n||1,this.g=e||Et,this.j=rn(this.kb,this),this.l=Date.now()}function Vl(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function su(n,e,t){if("function"==typeof n)t&&(n=rn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function hm(n){n.g=su(()=>{n.g=null,n.i&&(n.i=!1,hm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}On(Ll,nt),(We=Ll.prototype).da=!1,We.S=null,We.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$t(this,"tick"),this.da&&(Vl(this),this.start()))}},We.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.M=function(){Ll.Z.M.call(this),Vl(this),delete this.g};class fm extends Lr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hm(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _c(n){Lr.call(this),this.h=n,this.g={}}On(_c,Lr);var Jf=[];function vc(n,e,t,s){Array.isArray(t)||(t&&(Jf[0]=t.toString()),t=Jf);for(var a=0;a<t.length;a++){var l=w(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Bl(n){Ds(n.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},n),n.g={}}function eo(){this.g=!0}function Ec(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function hh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Ts(t)}catch(_){return e}}(n,t)+(s?" "+s:"")})}_c.prototype.M=function(){_c.Z.M.call(this),Bl(this)},_c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eo.prototype.Aa=function(){this.g=!1},eo.prototype.info=function(){};var Fo={},fh=null;function ou(){return fh=fh||new nt}function ph(n){Wn.call(this,Fo.Ma,n)}function Ic(n){const e=ou();$t(e,new ph(e,n))}function Xf(n,e){Wn.call(this,Fo.STAT_EVENT,n),this.stat=e}function Br(n){const e=ou();$t(e,new Xf(e,n))}function jl(n,e){Wn.call(this,Fo.Na,n),this.size=e}function wc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Fo.Ma="serverreachability",On(ph,Wn),Fo.STAT_EVENT="statevent",On(Xf,Wn),Fo.Na="timingevent",On(jl,Wn);var gi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},au={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $l(){}function gh(){}$l.prototype.h=null;var Gl,Hl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mh(){Wn.call(this,"d")}function yh(){Wn.call(this,"c")}function ql(){}function Dc(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new _c(this),this.P=la,this.W=new Ll(n=ua?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}On(mh,Wn),On(yh,Wn),On(ql,$l),ql.prototype.g=function(){return new XMLHttpRequest},ql.prototype.i=function(){return{}},Gl=new ql;var la=45e3,ep={},Wl={};function Lo(n,e,t){n.K=1,n.v=In(Zi(e)),n.s=t,n.U=!0,_h(n,null)}function _h(n,e){n.F=Date.now(),Vo(n),n.A=Zi(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),xc(t.h,"t",s),n.C=0,t=n.l.H,n.h=new mm,n.g=dp(n.l,t?e:null,!n.s),0<n.O&&(n.L=new fm(rn(n.Ia,n,n.g),n.O)),vc(n.V,n.g,"readystatechange",n.gb),e=n.H?ah(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ic(1),function pm(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",_=l.split("&"),D=0;D<_.length;D++){var A=_[D].split("=");if(1<A.length){var N=A[0];A=A[1];var F=N.split("_");p=2<=F.length&&"type"==F[1]?p+(N+"=")+A+"&":p+(N+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mi(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function uu(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=tp(n,t),a==Wl){4==e&&(n.o=4,Br(14),s=!1),Ec(n.j,n.m,null,"[Incomplete Response]");break}if(a==ep){n.o=4,Br(15),Ec(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Ec(n.j,n.m,a,null),bc(n,a)}mi(n)&&a!=Wl&&a!=ep&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Br(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ah(e),e.L=!0,Br(11))):(Ec(n.j,n.m,t,"[Invalid Chunked Response]"),lu(n),cu(n))}function tp(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Wl:(t=Number(e.substring(t,s)),isNaN(t)?ep:(s+=1)+t>e.length?Wl:(e=e.substr(s,t),n.C=s+t,e))}function Vo(n){n.Y=Date.now()+n.P,vh(n,n.P)}function vh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wc(rn(n.eb,n),e)}function Eh(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function cu(n){0==n.l.G||n.I||rd(n.l,n)}function lu(n){Eh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Vl(n.W),Bl(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function bc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Dh(t.i,n)))if(t.I=n.N,!n.J&&Dh(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(A){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=wc(rn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ya(t),Pe(t)}Nc(t),Br(18)}if(1>=Yl(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else xs(t,11)}else if((n.J||t.g==n)&&ya(t),!Ja(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let A=a[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const N=A[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const F=A[4];null!=F&&(t.za=F,t.h.info("SVER="+t.za));const z=A[5];null!=z&&"number"==typeof z&&0<z&&(t.K=s=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const oe=n.g;if(oe){const ye=oe.g?oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var l=s.i;!l.g&&(Er(ye,"spdy")||Er(ye,"quic")||Er(ye,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(gu(l,l.h),l.h=null))}if(s.D){const $e=oe.g?oe.g.getResponseHeader("X-HTTP-Session-Id"):null;$e&&(s.sa=$e,mn(s.F,s.D,$e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=sd(s,s.H?s.la:null,s.W),p.J){Ql(s.i,p);var _=p,D=s.K;D&&_.setTimeout(D),_.B&&(Eh(_),Vo(_)),s.g=p}else yu(s);0<t.l.length&&it(t)}else"stop"!=A[0]&&"close"!=A[0]||xs(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?xs(t,7):te(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}Ic(4)}catch(A){}}function Tc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(za(n)||"string"==typeof n)Qf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(za(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;s=function Ih(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(za(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function Cc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof Cc)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function wh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];As(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)As(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function As(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(We=Dc.prototype).setTimeout=function(n){this.P=n},We.gb=function(n){n=n.target;const e=this.L;e&&3==d(n)?e.l():this.Ia(n)},We.Ia=function(n){try{if(n==this.g)e:{const N=d(this.g);var e=this.g.Da();const F=this.g.ba();if(!(3>N)&&(3!=N||ua||this.g&&(this.h.h||this.g.ga()||f(this.g)))){this.I||4!=N||7==e||Ic(8==e||0>=F?3:2),Eh(this);var t=this.g.ba();this.N=t;t:if(mi(this)){var s=f(this.g);n="";var a=s.length,l=4==d(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lu(this),cu(this);var p="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function dh(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,D=this.g;if((_=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ja(_)){var A=_;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,Br(12),lu(this),cu(this);break e}Ec(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bc(this,t)}this.U?(uu(this,N,p),ua&&this.i&&3==N&&(vc(this.V,this.W,"tick",this.fb),this.W.start())):(Ec(this.j,this.m,p,null),bc(this,p)),4==N&&lu(this),this.i&&!this.I&&(4==N?rd(this.l,this):(this.i=!1,Vo(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Br(12)):(this.o=0,Br(13)),lu(this),cu(this)}}}catch(N){}},We.fb=function(){if(this.g){var n=d(this.g),e=this.g.ga();this.C<e.length&&(Eh(this),uu(this,n,e),this.i&&4!=n&&Vo(this))}},We.cancel=function(){this.I=!0,lu(this)},We.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ul(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ic(3),Br(17)),lu(this),this.o=2,cu(this)):vh(this,this.Y-n)},(We=Cc.prototype).R=function(){wh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},We.T=function(){return wh(this),this.g.concat()},We.get=function(n,e){return As(this.h,n)?this.h[n]:e},We.set=function(n,e){As(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},We.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var np=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function to(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof to){this.g=void 0!==e?e:n.g,Ac(this,n.j),this.s=n.s,da(this,n.i),ha(this,n.m),this.l=n.l,e=n.h;var t=new Kl;t.i=e.i,e.g&&(t.g=new Cc(e.g),t.h=e.h),zl(this,t),this.o=n.o}else n&&(t=String(n).match(np))?(this.g=!!e,Ac(this,t[1]||"",!0),this.s=du(t[2]||""),da(this,t[3]||"",!0),ha(this,t[4]),this.l=du(t[5]||"",!0),zl(this,t[6]||"",!0),this.o=du(t[7]||"")):(this.g=!!e,this.h=new Kl(null,this.g))}function Zi(n){return new to(n)}function Ac(n,e,t){n.j=t?du(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function da(n,e,t){n.i=t?du(e,!0):e}function ha(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zl(n,e,t){e instanceof Kl?(n.h=e,function Tr(n,e){e&&!n.j&&(Si(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(fr(this,s),xc(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=hu(e,Im)),n.h=new Kl(e,n.g))}function mn(n,e,t){n.h.set(e,t)}function In(n){return mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function du(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,vm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function vm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}to.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hu(e,Sc,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hu(e,Sc,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(hu(t,"/"==t.charAt(0)?ip:Em,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hu(t,iv)),n.join("")};var Sc=/[#\/\?@]/g,Em=/[#\?:]/g,ip=/[#\?]/g,Im=/[#\?@]/g,iv=/#/g;function Kl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Si(n){n.g||(n.g=new Cc,n.h=0,n.i&&function ym(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fr(n,e){Si(n),e=Bo(n,e),As(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,As((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wh(n)))}function fu(n,e){return Si(n),e=Bo(n,e),As(n.g.h,e)}function xc(n,e,t){fr(n,e),0<t.length&&(n.i=null,n.g.set(Bo(n,e),Qa(t)),n.h+=t.length)}function Bo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Zl(n){this.l=n||yi,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Kl.prototype).add=function(n,e){Si(this),this.i=null,n=Bo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){Si(this),this.g.forEach(function(t,s){Qf(t,function(a){n.call(e,a,s,this)},this)},this)},We.T=function(){Si(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},We.R=function(n){Si(this);var e=[];if("string"==typeof n)fu(this,n)&&(e=sh(e,this.g.get(Bo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=sh(e,n[t])}return e},We.set=function(n,e){return Si(this),this.i=null,fu(this,n=Bo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var yi=10;function pu(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Yl(n){return n.h?1:n.g?n.g.size:0}function Dh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gu(n,e){n.g?n.g.add(e):n.h=e}function Ql(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Qa(n.i)}function Jl(){}function wm(){this.g=new Jl}function Ss(n,e,t){const s=t||"";try{Tc(n,function(a,l){let p=a;vr(a)&&(p=Ts(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Xl(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function pa(n){this.l=n.$b||null,this.j=n.ib||!1}function ed(n,e){nt.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=td,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zl.prototype.cancel=function(){if(this.i=bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Jl.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},Jl.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},On(pa,$l),pa.prototype.g=function(){return new ed(this.l,this.j)},pa.prototype.i=function(n){return function(){return n}}({}),On(ed,nt);var td=0;function sr(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ga(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ma(n)}function ma(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=ed.prototype).open=function(n,e){if(this.readyState!=td)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ma(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ga(this)),this.readyState=td},We.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ma(this)),this.g&&(this.readyState=3,ma(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sr(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},We.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ga(this):ma(this),3==this.readyState&&sr(this)}},We.Ua=function(n){this.g&&(this.response=this.responseText=n,ga(this))},We.Ta=function(n){this.g&&(this.response=n,ga(this))},We.ha=function(){this.g&&ga(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ed.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Dm=Et.JSON.parse;function an(n){nt.call(this),this.headers=new Cc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mu,this.K=this.L=!1}On(an,nt);var mu="",Th=/^https?$/i,op=["POST","PUT"];function Ch(n){return"content-type"==n.toLowerCase()}function ap(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,up(n),nd(n)}function up(n){n.D||(n.D=!0,$t(n,"complete"),$t(n,"error"))}function cp(n){if(n.h&&void 0!==ti&&(!n.C[1]||4!=d(n)||2!=n.ba()))if(n.v&&4==d(n))su(n.Fa,0,n);else if($t(n,"readystatechange"),4==d(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===_){var a=String(n.H).match(np)[1]||null;if(!a&&Et.self&&Et.self.location){var l=Et.self.location.protocol;a=l.substr(0,l.length-1)}s=!Th.test(a?a.toLowerCase():"")}t=s}if(t)$t(n,"complete"),$t(n,"success");else{n.m=6;try{var p=2<d(n)?n.g.statusText:""}catch(D){p=""}n.j=p+" ["+n.ba()+"]",up(n)}}finally{nd(n)}}}function nd(n,e){if(n.g){g(n);const t=n.g,s=n.C[0]?Zs:null;n.g=null,n.C=null,e||$t(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function d(n){return n.g?n.g.readyState:0}function f(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case mu:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function T(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function y(n){let e="";return Ds(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mn(n,e,t))}function M(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function G(n){this.za=0,this.l=[],this.h=new eo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=M("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=M("baseRetryDelayMs",5e3,n),this.$a=M("retryDelaySeedMs",1e4,n),this.Ya=M("forwardChannelMaxRetries",2,n),this.ra=M("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Zl(n&&n.concurrentRequestLimit),this.Ca=new wm,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function te(n){if(Ye(n),3==n.G){var e=n.V++,t=Zi(n.F);mn(t,"SID",n.J),mn(t,"RID",e),mn(t,"TYPE","terminate"),no(n,t),(e=new Dc(n,n.h,e,void 0)).K=2,e.v=In(Zi(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=dp(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vo(e)}lp(n)}function Pe(n){n.g&&(Ah(n),n.g.cancel(),n.g=null)}function Ye(n){Pe(n),n.u&&(Et.clearTimeout(n.u),n.u=null),ya(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function ht(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&it(n)}function it(n){pu(n.i)||n.m||(n.m=!0,Fl(n.Ha,n),n.C=0)}function _i(n,e){var t;t=e?e.m:n.V++;const s=Zi(n.F);mn(s,"SID",n.J),mn(s,"RID",t),mn(s,"AID",n.U),no(n,s),n.o&&n.s&&T(s,n.o,n.s),t=new Dc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Mc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gu(n.i,t),Lo(t,s,e)}function no(n,e){n.j&&Tc({},function(t,s){mn(e,s,t)})}function Mc(n,e,t){t=Math.min(n.l.length,t);var s=n.j?rn(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let _=!0;for(let D=0;D<t;D++){let A=a[D].h;const N=a[D].g;if(A-=l,0>A)l=Math.max(0,a[D].h-100),_=!1;else try{Ss(N,p,"req"+A+"_")}catch(F){s&&s(N)}}if(_){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function yu(n){n.g||n.u||(n.Y=1,Fl(n.Ga,n),n.A=0)}function Nc(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=wc(rn(n.Ga,n),id(n,n.A)),n.A++,0))}function Ah(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function ro(n){n.g=new Dc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Zi(n.oa);mn(e,"RID","rpc"),mn(e,"SID",n.J),mn(e,"CI",n.N?"0":"1"),mn(e,"AID",n.U),no(n,e),mn(e,"TYPE","xmlhttp"),n.o&&n.s&&T(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=In(Zi(e)),t.s=null,t.U=!0,_h(t,n)}function ya(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function rd(n,e){var t=null;if(n.g==e){ya(n),Ah(n),n.g=null;var s=2}else{if(!Dh(n.i,e))return;t=e.D,Ql(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;$t(s=ou(),new jl(s,t,e,a)),it(n)}else yu(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function wn(n,e){return!(Yl(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=wc(rn(n.Ha,n,e),id(n,n.C)),n.C++,0)))}(n,e)||2==s&&Nc(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:xs(n,5);break;case 4:xs(n,10);break;case 3:xs(n,6);break;default:xs(n,2)}}function id(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function xs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=rn(n.jb,n);t||(t=new to("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Ac(t,"https"),In(t)),function sp(n,e){const t=new eo;if(Et.Image){const s=new Image;s.onload=Za(Xl,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Za(Xl,t,s,"TestLoadImage: error",!1,e),s.onabort=Za(Xl,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Za(Xl,t,s,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Br(2);n.G=0,n.j&&n.j.va(e),lp(n),Ye(n)}function lp(n){n.G=0,n.I=-1,n.j&&((0!=bh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Qa(n.l),n.l.length=0),n.j.ua())}function sd(n,e,t){let s=function rp(n){return n instanceof to?Zi(n):new to(n,void 0)}(t);if(""!=s.i)e&&da(s,e+"."+s.i),ha(s,s.m);else{const a=Et.location;s=function _m(n,e,t,s){var a=new to(null,void 0);return n&&Ac(a,n),e&&da(a,e),t&&ha(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Ds(n.aa,function(a,l){mn(s,l,a)}),t=n.sa,(e=n.D)&&t&&mn(s,e,t),mn(s,"VER",n.ma),no(n,s),s}function dp(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new an(t&&n.Ba&&!n.qa?new pa({ib:!0}):n.qa)).L=n.H,e}function sv(){}function hp(){if(Dr&&!(10<=Number(pc)))throw Error("Environmental error: no available transport.")}function Yi(n,e){nt.call(this),this.g=new G(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ja(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ja(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rc(this)}function Tm(n){mh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fp(){yh.call(this),this.status=1}function Rc(n){this.g=n}(We=an.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gl.g(),this.C=function gm(n){return n.h||(n.h=n.i())}(this.u?this.u:Gl),this.g.onreadystatechange=rn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void ap(this,l)}n=t||"";const a=new Cc(this.headers);s&&Tc(s,function(l,p){a.set(p,l)}),s=function cm(n){e:{var e=Ch;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=En(op,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{g(this),0<this.B&&((this.K=function bm(n){return Dr&&function ch(){return function Rl(n){var e=uh;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=oh(String(qi)).split("."),t=oh("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=Hi(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Hi(0==a[2].length,0==l[2].length)||Hi(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rn(this.pa,this)):this.A=su(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){ap(this,l)}},We.pa=function(){void 0!==ti&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$t(this,"complete"),$t(this,"abort"),nd(this))},We.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nd(this,!0)),an.Z.M.call(this)},We.Fa=function(){this.s||(this.F||this.v||this.l?cp(this):this.cb())},We.cb=function(){cp(this)},We.ba=function(){try{return 2<d(this)?this.g.status:-1}catch(n){return-1}},We.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},We.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Dm(e)}},We.Da=function(){return this.m},We.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=G.prototype).ma=8,We.G=1,We.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},We.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Dc(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=ah(l),ir(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Mc(this,a,e),mn(t=Zi(this.F),"RID",n),mn(t,"CVER",22),this.D&&mn(t,"X-HTTP-Session-Id",this.D),no(this,t),this.o&&l&&T(t,this.o,l),gu(this.i,a),this.Ra&&mn(t,"TYPE","init"),this.ja?(mn(t,"$req",e),mn(t,"SID","null"),a.$=!0,Lo(a,t,null)):Lo(a,t,e),this.G=2}}else 3==this.G&&(n?_i(this,n):0==this.l.length||pu(this.i)||_i(this))},We.Ga=function(){if(this.u=null,ro(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=wc(rn(this.bb,this),n)}},We.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Br(10),Pe(this),ro(this))},We.ab=function(){null!=this.v&&(this.v=null,Pe(this),Nc(this),Br(19))},We.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Br(2)):(this.h.info("Failed to ping google.com"),Br(1))},(We=sv.prototype).xa=function(){},We.wa=function(){},We.va=function(){},We.ua=function(){},We.Oa=function(){},hp.prototype.g=function(n,e){return new Yi(n,e)},On(Yi,nt),Yi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Fl(rn(n.hb,n,e))),Br(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=sd(n,null,n.W),it(n)},Yi.prototype.close=function(){te(this.g)},Yi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ht(this.g,e)}else this.v?((e={}).__data__=Ts(n),ht(this.g,e)):ht(this.g,n)},Yi.prototype.M=function(){this.g.j=null,delete this.j,te(this.g),delete this.g,Yi.Z.M.call(this)},On(Tm,mh),On(fp,yh),On(Rc,sv),Rc.prototype.xa=function(){$t(this.g,"a")},Rc.prototype.wa=function(n){$t(this.g,new Tm(n))},Rc.prototype.va=function(n){$t(this.g,new fp(n))},Rc.prototype.ua=function(){$t(this.g,"b")},hp.prototype.createWebChannel=hp.prototype.g,Yi.prototype.send=Yi.prototype.u,Yi.prototype.open=Yi.prototype.m,Yi.prototype.close=Yi.prototype.close,gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,au.COMPLETE="complete",gh.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",nt.prototype.listen=nt.prototype.N,an.prototype.listenOnce=an.prototype.O,an.prototype.getLastError=an.prototype.La,an.prototype.getLastErrorCode=an.prototype.Da,an.prototype.getStatus=an.prototype.ba,an.prototype.getResponseJson=an.prototype.Qa,an.prototype.getResponseText=an.prototype.ga,an.prototype.send=an.prototype.ea;var Cm=Es.createWebChannelTransport=function(){return new hp},II=Es.getStatEventTarget=function(){return ou()},Am=Es.ErrorCode=gi,ov=Es.EventType=au,av=Es.Event=Fo,_u=Es.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uv=Es.FetchXmlHttpFactory=pa,Sh=Es.WebChannel=gh,wI=Es.XhrIo=an;const xh="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let Pc="9.6.10";const _a=new ei.Yd("@firebase/firestore");function pp(){return _a.logLevel}function Ne(n,...e){if(_a.logLevel<=ei.in.DEBUG){const t=e.map(gp);_a.debug(`Firestore (${Pc}): ${n}`,...t)}}function kn(n,...e){if(_a.logLevel<=ei.in.ERROR){const t=e.map(gp);_a.error(`Firestore (${Pc}): ${n}`,...t)}}function vu(n,...e){if(_a.logLevel<=ei.in.WARN){const t=e.map(gp);_a.warn(`Firestore (${Pc}): ${n}`,...t)}}function gp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: `+n;throw kn(e),new Error(e)}function wt(n,e){n||et()}function Ue(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends It.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class Mm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dv{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=A=>this.i!==a?(a=this.i,t(A)):Promise.resolve();let p=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Cr,e.enqueueRetryable(()=>l(this.currentUser))};const _=()=>{const A=p;e.enqueueRetryable((0,he.Z)(function*(){yield A.promise,yield l(s.currentUser)}))},D=A=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(A=>D(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?D(A):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Cr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wt("string"==typeof s.accessToken),new cv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Ur(e)}}class BD{constructor(e,t,s){this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class hv{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new BD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pv{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=l=>{null!=l.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.p;return this.p=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?a(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.p=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Qi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.I(s),this.T=s=>t.writeSequenceNumber(s))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function io(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}Qi.A=-1;class gv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=io(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Ot(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function mv(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new zn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new zn(0,0))}static max(){return new _t(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Nm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mh{constructor(e,t,s){void 0===t?t=0:t>e.length&&et(),void 0===s?s=e.length-t:s>e.length-t&&et(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Mh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mh?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class je extends Mh{construct(e,t,s){return new je(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new je(t)}static emptyPath(){return new je([])}}const _v=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Mh{construct(e,t,s){return new pr(e,t,s)}static isValidIdentifier(e){return _v.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Ae(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Ae(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=D,a+=2}else"`"===_?(p=!p,a++):"."!==_||p?(s+=_,a++):(l(),a++)}if(l(),p)throw new Ae(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class kc{constructor(e){this.fields=e,e.sort(pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new cn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const vv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eu(n){if(wt(!!n),"string"==typeof n){let e=0;const t=vv.exec(n);if(wt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Sn(n.seconds),nanos:Sn(n.nanos)}}function Sn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vi(n){return"string"==typeof n?cn.fromBase64String(n):cn.fromUint8Array(n)}function Nh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rm(n){const e=n.mapValue.fields.__previous_value__;return Nh(e)?Rm(e):e}function Fc(n){const e=Eu(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class jD{constructor(e,t,s,a,l,p,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.useFetchStreams=D}}class Uo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}function ad(n){return null==n}function Iu(n){return 0===n&&1/n==-1/0}function Rh(n){return"number"==typeof n&&Number.isInteger(n)&&!Iu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(je.fromString(e))}static fromName(e){return new Fe(je.fromString(e).popFirst(5))}static empty(){return new Fe(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===je.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new je(e.slice()))}}const yp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_p={nullValue:"NULL_VALUE"};function ud(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nh(n)?4:DI(n)?9:10:et()}function jo(n,e){if(n===e)return!0;const t=ud(n);if(t!==ud(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fc(n).isEqual(Fc(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Eu(s.timestampValue),p=Eu(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,vi(n.bytesValue).isEqual(vi(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Sn(s.geoPointValue.latitude)===Sn(a.geoPointValue.latitude)&&Sn(s.geoPointValue.longitude)===Sn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Sn(s.integerValue)===Sn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Sn(s.doubleValue),p=Sn(a.doubleValue);return l===p?Iu(l)===Iu(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Nm(l)!==Nm(p))return!1;for(const _ in l)if(l.hasOwnProperty(_)&&(void 0===p[_]||!jo(l[_],p[_])))return!1;return!0}(n,e);default:return et()}var a}function Ph(n,e){return void 0!==(n.values||[]).find(t=>jo(t,e))}function wu(n,e){if(n===e)return 0;const t=ud(n),s=ud(e);if(t!==s)return Ot(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Sn(a.integerValue||a.doubleValue),_=Sn(l.integerValue||l.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1}(n,e);case 3:return Ev(n.timestampValue,e.timestampValue);case 4:return Ev(Fc(n),Fc(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(a,l){const p=vi(a),_=vi(l);return p.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),_=l.split("/");for(let D=0;D<p.length&&D<_.length;D++){const A=Ot(p[D],_[D]);if(0!==A)return A}return Ot(p.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Ot(Sn(a.latitude),Sn(l.latitude));return 0!==p?p:Ot(Sn(a.longitude),Sn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],_=l.values||[];for(let D=0;D<p.length&&D<_.length;++D){const A=wu(p[D],_[D]);if(A)return A}return Ot(p.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const p=a.fields||{},_=Object.keys(p),D=l.fields||{},A=Object.keys(D);_.sort(),A.sort();for(let N=0;N<_.length&&N<A.length;++N){const F=Ot(_[N],A[N]);if(0!==F)return F;const z=wu(p[_[N]],D[A[N]]);if(0!==z)return z}return Ot(_.length,A.length)}(n.mapValue,e.mapValue);default:throw et()}}function Ev(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Eu(n),s=Eu(e),a=Ot(t.seconds,s.seconds);return 0!==a?a:Ot(t.nanos,s.nanos)}function Lc(n){return Iv(n)}function Iv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Eu(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vi(n.bytesValue).toBase64():"referenceValue"in n?Fe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Iv(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const _ of a)p?p=!1:l+=",",l+=`${_}:${Iv(s.fields[_])}`;return l+"}"}(n.mapValue):et();var e}function cd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wv(n){return!!n&&"integerValue"in n}function ld(n){return!!n&&"arrayValue"in n}function Pm(n){return!!n&&"nullValue"in n}function Dv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dd(n){return!!n&&"mapValue"in n}function vp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oc(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=vp(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bI(n,e){return void 0===n?e:void 0===e||wu(n,e)>0?n:e}function TI(n,e){return void 0===n?e:void 0===e||wu(n,e)<0?n:e}class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(t)}setAll(e){let t=pr.emptyPath(),s={},a=[];e.forEach((p,_)=>{if(!t.isImmediateParentOf(_)){const D=this.getFieldsMap(t);this.applyChanges(D,s,a),s={},a=[],t=_.popLast()}p?s[_.lastSegment()]=vp(p):a.push(_.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];dd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Oc(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Ei(vp(this.value))}}function CI(n){const e=[];return Oc(n.fields,(t,s)=>{const a=new pr([t]);if(dd(s)){const l=CI(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new kc(e)}class xn{constructor(e,t,s,a,l,p){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new xn(e,0,_t.min(),_t.min(),Ei.empty(),0)}static newFoundDocument(e,t,s){return new xn(e,1,t,_t.min(),s,0)}static newNoDocument(e,t){return new xn(e,2,t,_t.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,_t.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Om{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function bv(n){return n.fields.find(e=>2===e.kind)}function Oh(n){return n.fields.filter(e=>2!==e.kind)}Om.UNKNOWN_ID=-1;class so{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vc(0,oo.min())}}function Tv(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=_t.fromTimestamp(1e9===s?new zn(t+1,0):new zn(t,s));return new oo(a,Fe.empty(),e)}function Cv(n){return new oo(n.readTime,n.key,-1)}class oo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new oo(_t.min(),Fe.empty(),-1)}static max(){return new oo(_t.max(),Fe.empty(),-1)}}function Av(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fe.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}class km{constructor(e,t=null,s=[],a=[],l=null,p=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=_,this.P=null}}function Sv(n,e=null,t=[],s=[],a=null,l=null,p=null){return new km(n,e,t,s,a,l,p)}function xi(n){const e=Ue(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(a=s).field.canonicalString()+a.op.toString()+Lc(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Lc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Lc(s)).join(",")),e.P=t}return e.P}function kh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!Mv(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!jo(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wp(n.startAt,e.startAt)&&wp(n.endAt,e.endAt)}function hd(n){return Fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ep(n,e){return n.filters.filter(t=>t instanceof Ar&&t.field.isEqual(e))}class Ar extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,s):new AI(e,t,s):"array-contains"===t?new Fm(e,s):"in"===t?new fd(e,s):"not-in"===t?new Lh(e,s):"array-contains-any"===t?new pd(e,s):new Ar(e,t,s)}static V(e,t,s){return"in"===t?new SI(e,s):new Fh(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(wu(t,this.value)):null!==t&&ud(this.value)===ud(t)&&this.v(wu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AI extends Ar{constructor(e,t,s){super(e,t,s),this.key=Fe.fromName(s.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.v(t)}}class SI extends Ar{constructor(e,t){super(e,"in",t),this.keys=Bc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fh extends Ar{constructor(e,t){super(e,"not-in",t),this.keys=Bc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bc(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Fe.fromName(s.referenceValue))}class Fm extends Ar{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ld(t)&&Ph(t.arrayValue,this.value)}}class fd extends Ar{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ph(this.value.arrayValue,t)}}class Lh extends Ar{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ph(this.value.arrayValue,t)}}class pd extends Ar{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ld(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ph(this.value.arrayValue,s))}}class Du{constructor(e,t){this.position=e,this.inclusive=t}}class Uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ip(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?Fe.comparator(Fe.fromName(p.referenceValue),t.key):wu(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function wp(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jo(n.position[t],e.position[t]))return!1;return!0}class $o{constructor(e,t=null,s=[],a=[],l=null,p="F",_=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=_,this.endAt=D,this.D=null,this.C=null}}function Vh(n,e,t,s,a,l,p,_){return new $o(n,e,t,s,a,l,p,_)}function gd(n){return new $o(n)}function Bh(n){return!ad(n.limit)&&"F"===n.limitType}function Lm(n){return!ad(n.limit)&&"L"===n.limitType}function Dp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bp(n){for(const e of n.filters)if(e.S())return e.field;return null}function Vm(n){return null!==n.collectionGroup}function jc(n){const e=Ue(n);if(null===e.D){e.D=[];const t=bp(e),s=Dp(e);if(null!==t&&null===s)t.isKeyField()||e.D.push(new Uc(t)),e.D.push(new Uc(pr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Uc(pr.keyField(),l))}}}return e.D}function Ms(n){const e=Ue(n);if(!e.C)if("F"===e.limitType)e.C=Sv(e.path,e.collectionGroup,jc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of jc(e))t.push(new Uc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Du(e.endAt.position,!e.endAt.inclusive):null,a=e.startAt?new Du(e.startAt.position,!e.startAt.inclusive):null;e.C=Sv(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.C}function Nv(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jr(n,e){return kh(Ms(n),Ms(e))&&n.limitType===e.limitType}function Rv(n){return`${xi(Ms(n))}|lt:${n.limitType}`}function Bm(n){return`Query(target=${function xv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Lc(s.value)}`;var s}).join(", ")}]`),ad(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lc(t)).join(",")),`Target(${e})`}(Ms(n))}; limitType=${n.limitType})`}function Pv(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Fe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,l,p){const _=Ip(a,l,p);return a.inclusive?_<=0:_<0}(t.startAt,jc(t),s)||t.endAt&&!function(a,l,p){const _=Ip(a,l,p);return a.inclusive?_>=0:_>0}(t.endAt,jc(t),s)));var t,s}function xI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Um(n){return(e,t)=>{let s=!1;for(const a of jc(n)){const l=$D(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function $D(n,e,t){const s=n.field.isKeyField()?Fe.comparator(e.key,t.key):function(a,l,p){const _=l.data.field(a),D=p.data.field(a);return null!==_&&null!==D?wu(_,D):et()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return et()}}function Ov(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(e)?"-0":e}}function Tp(n){return{integerValue:""+n}}function jm(n,e){return Rh(e)?Tp(e):Ov(n,e)}class Cp{constructor(){this._=void 0}}function MI(n,e,t){return n instanceof md?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof bu?kv(n,e):n instanceof $c?Hm(n,e):function(s,a){const l=$m(s,a),p=Fv(l)+Fv(s.k);return wv(l)&&wv(s.k)?Tp(p):Ov(s.M,p)}(n,e)}function NI(n,e,t){return n instanceof bu?kv(n,e):n instanceof $c?Hm(n,e):t}function $m(n,e){return n instanceof Hc?wv(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class md extends Cp{}class bu extends Cp{constructor(e){super(),this.elements=e}}function kv(n,e){const t=ao(e);for(const s of n.elements)t.some(a=>jo(a,s))||t.push(s);return{arrayValue:{values:t}}}class $c extends Cp{constructor(e){super(),this.elements=e}}function Hm(n,e){let t=ao(e);for(const s of n.elements)t=t.filter(a=>!jo(a,s));return{arrayValue:{values:t}}}class Hc extends Cp{constructor(e,t){super(),this.M=e,this.k=t}}function Fv(n){return Sn(n.integerValue||n.doubleValue)}function ao(n){return ld(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gc{constructor(e,t){this.field=e,this.transform=t}}class PI{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ap{}function OI(n,e,t){n instanceof Tu?function(s,a,l){const p=s.value.clone(),_=Sp(s.fieldTransforms,a,l.transformResults);p.setAll(_),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof va?function(s,a,l){if(!Uh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=Sp(s.fieldTransforms,a,l.transformResults),_=a.data;_.setAll(Bv(s)),_.setAll(p),a.convertToFoundDocument(l.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gm(n,e,t){var a;n instanceof Tu?function(s,a,l){if(!Uh(s.precondition,a))return;const p=s.value.clone(),_=xp(s.fieldTransforms,l,a);p.setAll(_),a.convertToFoundDocument(Vv(a),p).setHasLocalMutations()}(n,e,t):n instanceof va?function(s,a,l){if(!Uh(s.precondition,a))return;const p=xp(s.fieldTransforms,l,a),_=a.data;_.setAll(Bv(s)),_.setAll(p),a.convertToFoundDocument(Vv(a),_).setHasLocalMutations()}(n,e,t):Uh(n.precondition,a=e)&&a.convertToNoDocument(_t.min())}function qm(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=$m(s.transform,a||null);null!=l&&(null==t&&(t=Ei.empty()),t.set(s.field,l))}return t||null}function Lv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&od(t,s,(a,l)=>function RI(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof bu&&s instanceof bu||t instanceof $c&&s instanceof $c?od(t.elements,s.elements,jo):t instanceof Hc&&s instanceof Hc?jo(t.k,s.k):t instanceof md&&s instanceof md);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function Vv(n){return n.isFoundDocument()?n.version:_t.min()}class Tu extends Ap{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class va extends Ap{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function Bv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Sp(n,e,t){const s=new Map;wt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,_=e.data.field(l.field);s.set(l.field,NI(p,_,t[a]))}return s}function xp(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,MI(l,p,e))}return s}class yd extends Ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Wm extends Ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kI{constructor(e){this.count=e}}var Bn,Wt;function Uv(n){switch(n){default:return et();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function zm(n){if(void 0===n)return kn("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Bn.OK:return ie.OK;case Bn.CANCELLED:return ie.CANCELLED;case Bn.UNKNOWN:return ie.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return ie.INTERNAL;case Bn.UNAVAILABLE:return ie.UNAVAILABLE;case Bn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Bn.NOT_FOUND:return ie.NOT_FOUND;case Bn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Bn.ABORTED:return ie.ABORTED;case Bn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Bn.DATA_LOSS:return ie.DATA_LOSS;default:return et()}}(Wt=Bn||(Bn={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Oc(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return yv(this.inner)}size(){return this.innerSize}}class Un{constructor(e,t){this.comparator=e,this.root=t||Sr.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:Sr.RED,this.left=null!=a?a:Sr.EMPTY,this.right=null!=l?l:Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Sr(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Sr.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1,Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Sr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $h(this.data.getIterator())}getIteratorFrom(e){return new $h(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class $h{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _d(n){return n.hasNext()?n.getNext():void 0}const FI=new Un(Fe.comparator);function uo(){return FI}const Km=new Un(Fe.comparator);function Mp(){return Km}function qc(){return new Ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hh=new Un(Fe.comparator),LI=new zt(Fe.comparator);function Jt(...n){let e=LI;for(const t of n)e=e.add(t);return e}const jv=new zt(Ot);function Gh(){return jv}class vd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,qh.createSynthesizedTargetChangeForCurrentChange(e,t)),new vd(_t.min(),s,Gh(),uo(),Jt())}}class qh{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qh(cn.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class Ed{constructor(e,t,s,a){this.O=e,this.removedTargetIds=t,this.key=s,this.F=a}}class $v{constructor(e,t){this.targetId=e,this.$=t}}class Hv{constructor(e,t,s=cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Zm{constructor(){this.B=0,this.L=Gv(),this.U=cn.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Jt(),t=Jt(),s=Jt();return this.L.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:et()}}),new qh(this.U,this.q,e,t,s)}J(){this.G=!1,this.L=Gv()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Id{constructor(e){this.nt=e,this.st=new Map,this.it=uo(),this.rt=Ym(),this.ot=new zt(Ot)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const s=this.lt(t);switch(e.state){case 0:this.ft(t)&&s.W(e.resumeToken);break;case 1:s.tt(),s.K||s.J(),s.W(e.resumeToken);break;case 2:s.tt(),s.K||this.removeTarget(t);break;case 3:this.ft(t)&&(s.et(),s.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),s.W(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((s,a)=>{this.ft(a)&&t(a)})}_t(e){const t=e.targetId,s=e.$.count,a=this.wt(t);if(a){const l=a.target;if(hd(l))if(0===s){const p=new Fe(l.path);this.ct(t,p,xn.newNoDocument(p,_t.min()))}else wt(1===s);else this.gt(t)!==s&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,p)=>{const _=this.wt(p);if(_){if(l.current&&hd(_.target)){const D=new Fe(_.target.path);null!==this.it.get(D)||this.It(p,D)||this.ct(p,D,xn.newNoDocument(D,e))}l.j&&(t.set(p,l.H()),l.J())}});let s=Jt();this.rt.forEach((l,p)=>{let _=!0;p.forEachWhile(D=>{const A=this.wt(D);return!A||2===A.purpose||(_=!1,!1)}),_&&(s=s.add(l))}),this.it.forEach((l,p)=>p.setReadTime(e));const a=new vd(e,t,this.ot,this.it,s);return this.it=uo(),this.rt=Ym(),this.ot=new zt(Ot),a}at(e,t){if(!this.ft(e))return;const s=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,s),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,s){if(!this.ft(e))return;const a=this.lt(e);this.It(e,t)?a.Y(t,1):a.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),s&&(this.it=this.it.insert(t,s))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Zm,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new zt(Ot),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Zm),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Ym(){return new Un(Fe.comparator)}function Gv(){return new Un(Fe.comparator)}const VI={asc:"ASCENDING",desc:"DESCENDING"},wd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BI{constructor(e,t){this.databaseId=e,this.N=t}}function Wh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qv(n,e){return n.N?e.toBase64():e.toUint8Array()}function UI(n,e){return Wh(n,e.toTimestamp())}function fn(n){return wt(!!n),_t.fromTimestamp(function(e){const t=Eu(e);return new zn(t.seconds,t.nanos)}(n))}function zh(n,e){return(t=n,new je(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Qm(n){const e=je.fromString(n);return wt(t0(e)),e}function Dd(n,e){return zh(n.databaseId,e.path)}function co(n,e){const t=Qm(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(zv(t))}function Np(n,e){return zh(n.databaseId,e)}function Wv(n){const e=Qm(n);return 4===e.length?je.emptyPath():zv(e)}function Kh(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zv(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Kv(n,e,t){return{name:Dd(n,e),fields:t.value.mapValue.fields}}function Jm(n,e,t){const s=co(n,e.name),a=fn(e.updateTime),l=new Ei({mapValue:{fields:e.fields}}),p=xn.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function Zh(n,e){let t;if(e instanceof Tu)t={update:Kv(n,e.key,e.value)};else if(e instanceof yd)t={delete:Dd(n,e.key)};else if(e instanceof va)t={update:Kv(n,e.key,e.data),updateMask:e0(e.fieldMask)};else{if(!(e instanceof Wm))return et();t={verify:Dd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof md)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof bu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof $c)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Hc)return{fieldPath:l.field.canonicalString(),increment:p.k};throw et()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:UI(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:et()),t;var a}function Xm(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?gr.updateTime(fn(a.updateTime)):void 0!==a.exists?gr.exists(a.exists):gr.none():gr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let _=null;"setToServerValue"in p?(wt("REQUEST_TIME"===p.setToServerValue),_=new md):"appendMissingElements"in p?_=new bu(p.appendMissingElements.values||[]):"removeAllFromArray"in p?_=new $c(p.removeAllFromArray.values||[]):"increment"in p?_=new Hc(l,p.increment):et();const D=pr.fromServerFormat(p.fieldPath);return new Gc(D,_)}(n,a)):[];var a;if(e.update){const a=co(n,e.update.name),l=new Ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new kc((e.updateMask.fieldPaths||[]).map(A=>pr.fromServerFormat(A)));return new va(a,l,p,t,s)}return new Tu(a,l,t,s)}if(e.delete){const a=co(n,e.delete);return new yd(a,t)}if(e.verify){const a=co(n,e.verify);return new Wm(a,t)}return et()}function jI(n,e){return{documents:[Np(n,e.path)]}}function Rp(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Np(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Np(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(D){if(0===D.length)return;const A=D.map(N=>function(F){if("=="===F.op){if(Dv(F.value))return{unaryFilter:{field:Yh(F.field),op:"IS_NAN"}};if(Pm(F.value))return{unaryFilter:{field:Yh(F.field),op:"IS_NULL"}}}else if("!="===F.op){if(Dv(F.value))return{unaryFilter:{field:Yh(F.field),op:"IS_NOT_NAN"}};if(Pm(F.value))return{unaryFilter:{field:Yh(F.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(F.field),op:lo(F.op),value:F.value}}}(N));return 1===A.length?A[0]:{compositeFilter:{op:"AND",filters:A}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(D){if(0!==D.length)return D.map(A=>{return{field:Yh((N=A).field),direction:qD(N.dir)};var N})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(A=e.limit,n.N||ad(A)?A:{value:A});var A,_,D;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function Yv(n){let e=Wv(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){wt(1===s);const N=t.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let l=[];t.where&&(l=ey(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(N=>{return new Uc(Qh((F=N).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction));var F}));let _=null;t.limit&&(_=function(N){let F;return F="object"==typeof N?N.value:N,ad(F)?null:F}(t.limit));let D=null;var N;t.startAt&&(D=new Du((N=t.startAt).values||[],!!N.before));let A=null;return t.endAt&&(A=function(N){return new Du(N.values||[],!N.before)}(t.endAt)),Vh(e,a,p,l,_,"F",D,A)}function ey(n){return n?void 0!==n.unaryFilter?[Xv(n)]:void 0!==n.fieldFilter?[Jv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ey(e)).reduce((e,t)=>e.concat(t)):et():[]}function qD(n){return VI[n]}function lo(n){return wd[n]}function Yh(n){return{fieldPath:n.canonicalString()}}function Qh(n){return pr.fromServerFormat(n.fieldPath)}function Jv(n){return Ar.create(Qh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Xv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Qh(n.unaryFilter.field);return Ar.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Qh(n.unaryFilter.field);return Ar.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qh(n.unaryFilter.field);return Ar.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qh(n.unaryFilter.field);return Ar.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function e0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $r(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ty(e)),e=n0(n.get(t),e);return ty(e)}function n0(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function ty(n){return n+"\x01\x01"}function ho(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),je.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&et(),n.charAt(p+1)){case"\x01":const _=n.substring(l,p);let D;0===a.length?D=_:(a+=_,D=a,a=""),s.push(D);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:et()}l=p+2}return new je(s)}const Pp=["userId","batchId"];function Op(n,e){return[n,$r(e)]}function r0(n,e,t){return[n,$r(e),t]}const $I={},HI=["prefixPath","collectionGroup","readTime","documentId"],GI=["prefixPath","collectionGroup","documentId"],qI=["collectionGroup","readTime","prefixPath","documentId"],kp=["canonicalId","targetId"],bd=["targetId","path"],WI=["path","targetId"],Jh=["collectionId","parent"],zI=["indexId","uid"],KI=["uid","sequenceNumber"],ny=["indexId","uid","arrayValue","directionalValue","documentKey"],Ho=["indexId","uid","documentKey"],Xh=["userId","collectionPath","documentId"],ni=["userId","collectionPath","largestBatchId"],Wc=["userId","collectionGroup","largestBatchId"],ef=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ns=[...ef,"documentOverlays"],ry=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Td=[...ry,"indexConfiguration","indexState","indexEntries"],zc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,s)=>{t(e)})}static reject(e){return new se((t,s)=>{s(e)})}static waitFor(e){return new se((t,s)=>{let a=0,l=0,p=!1;e.forEach(_=>{++a,_.next(()=>{++l,p&&l===a&&t()},D=>s(D))}),p=!0,l===a&&t()})}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next(a=>a?se.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class Ia{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Cr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Go(e,t.error)):this.At.resolve()},this.transaction.onerror=s=>{const a=Fp(s.target.error);this.At.reject(new Go(e,a))}}static open(e,t,s,a){try{return new Ia(t,e.transaction(a,s))}catch(l){throw new Go(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new s0(t)}}class ri{constructor(e,t,s){this.name=e,this.version=t,this.Pt=s,12.2===ri.Vt((0,It.z$)())&&kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,It.hl)())return!1;if(ri.St())return!0;const e=(0,It.z$)(),t=ri.Vt(e),s=0<t&&t<10,a=ri.Dt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Nt(e){var t=this;return(0,he.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Go(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const _=p.target.error;a("VersionError"===_.name?new Ae(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Ae(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new Go(e,_))},l.onupgradeneeded=p=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.Pt.kt(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=s=>t.Mt(s)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,he.Z)(function*(){const p="readonly"===t;let _=0;for(;;){++_;try{l.db=yield l.Nt(e);const D=Ia.open(l.db,e,p?"readonly":"readwrite",s),A=a(D).next(N=>(D.bt(),N)).catch(N=>(D.abort(N),se.reject(N))).toPromise();return A.catch(()=>{}),yield D.Rt,A}catch(D){const A="FirebaseError"!==D.name&&_<3;if(Ne("SimpleDb","Transaction failed with error:",D.message,"Retrying:",A),l.close(),!A)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cd{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Cu(this.Ft.delete())}}class Go extends Ae{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rs(n){return"IndexedDbTransactionError"===n.name}class s0{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Cu(s)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}qt(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.Gt(a,(p,_)=>{l.push(_)}).next(()=>l)}{const a=this.store.getAll(s.range);return new se((l,p)=>{a.onerror=_=>{p(_.target.error)},a.onsuccess=_=>{l(_.target.result)}})}}Kt(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new se((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.jt=!1;const a=this.cursor(s);return this.Gt(a,(l,p,_)=>_.delete())}Wt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Gt(a,t)}zt(e){const t=this.cursor({});return new se((s,a)=>{t.onerror=l=>{const p=Fp(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(_=>{_?p.continue():s()}):s()}})}Gt(e,t){const s=[];return new se((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const _=p.target.result;if(!_)return void a();const D=new Cd(_),A=t(_.primaryKey,_.value,D);if(A instanceof se){const N=A.catch(F=>(D.done(),se.reject(F)));s.push(N)}D.isDone?a():null===D.Lt?_.continue():_.continue(D.Lt)}}).next(()=>se.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.jt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(n){return new se((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=Fp(s.target.error);t(a)}})}let iy=!1;function Fp(n){const e=ri.Vt((0,It.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iy||(iy=!0,setTimeout(()=>{throw s},0)),s}}return n}class sy extends Kc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function mr(n,e){const t=Ue(n);return ri.xt(t.Ht,e)}class Lp{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&OI(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Gm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Gm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,s)=>Lv(t,s))&&od(this.baseMutations,e.baseMutations,(t,s)=>Lv(t,s))}}class Vp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){wt(e.mutations.length===s.length);let a=Hh;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new Vp(e,t,s,a)}}class Bp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Au{constructor(e,t,s,a,l=_t.min(),p=_t.min(),_=cn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oy{constructor(e){this.Jt=e}}function o0(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Dd(a=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Wh(a,l.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Zc(e.version)};else{if(!e.isUnknownDocument())return et();s.unknownDocument={path:t.path.toArray(),version:Zc(e.version)}}var a,l;return s}function tf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yc(n){const e=new zn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Qc(n,e){const t=(e.baseMutations||[]).map(l=>Xm(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Xm(n.Jt,l)),a=zn.fromMillis(e.localWriteTimeMs);return new Lp(e.batchId,a,t,s)}function nf(n){const e=Yc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yc(n.lastLimboFreeSnapshotVersion):_t.min();let s;var a;return void 0!==n.query.documents?(wt(1===(a=n.query).documents.length),s=Ms(gd(Wv(a.documents[0])))):s=Ms(Yv(n.query)),new Au(s,n.targetId,0,n.lastListenSequenceNumber,e,t,cn.fromBase64String(n.resumeToken))}function ay(n,e){const t=Zc(e.snapshotVersion),s=Zc(e.lastLimboFreeSnapshotVersion);let a;a=hd(e.target)?jI(n.Jt,e.target):Rp(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xi(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function uy(n){const e=Yv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Nv(e,e.limit,"L"):e}function cy(n,e){return new Bp(e.largestBatchId,Xm(n.Jt,e.overlayMutation))}function YI(n,e){const t=e.path.lastSegment();return[n,$r(e.path.popLast()),t]}class QI{getBundleMetadata(e,t){return Up(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Yc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Up(e).put({bundleId:(s=t).id,createTime:Zc(fn(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return jp(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:uy(a.bundledQuery),readTime:Yc(a.readTime)};var a})}saveNamedQuery(e,t){return jp(e).put({name:(s=t).name,readTime:Zc(fn(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Up(n){return mr(n,"bundles")}function jp(n){return mr(n,"namedQueries")}class ly{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ly(e,t.uid||"")}getOverlay(e,t){return $p(e).get(YI(this.userId,t)).next(s=>s?cy(this.M,s):null)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const _=new Bp(t,p);a.push(this.Xt(e,_))}),se.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add($r(p.getCollectionPath())));const l=[];return a.forEach(p=>{const _=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push($p(e).Qt("collectionPathOverlayIndex",_))}),se.waitFor(l)}getOverlaysForCollection(e,t,s){const a=qc(),l=$r(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return $p(e).qt("collectionPathOverlayIndex",p).next(_=>{for(const D of _){const A=cy(this.M,D);a.set(A.getKey(),A)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=qc();let p;const _=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $p(e).Wt({index:"collectionGroupOverlayIndex",range:_},(D,A,N)=>{const F=cy(this.M,A);l.size()<a||F.largestBatchId===p?(l.set(F.getKey(),F),p=F.largestBatchId):N.done()}).next(()=>l)}Xt(e,t){return $p(e).put(function(s,a,l){const[p,_,D]=YI(a,l.mutation.key);return{userId:a,collectionPath:_,documentId:D,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Zh(s.Jt,l.mutation)}}(this.M,this.userId,t))}}function $p(n){return mr(n,"documentOverlays")}class rf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Sn(e.integerValue));else if("doubleValue"in e){const s=Sn(e.doubleValue);isNaN(s)?this.ne(t,13):(this.ne(t,15),Iu(s)?t.se(0):t.se(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ne(t,20),"string"==typeof s?t.ie(s):(t.ie(`${s.seconds||""}`),t.se(s.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(vi(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ne(t,45),t.se(s.latitude||0),t.se(s.longitude||0)}else"mapValue"in e?DI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const s=e.fields||{};this.ne(t,55);for(const a of Object.keys(s))this.re(a,t),this.te(s[a],t)}he(e,t){const s=e.values||[];this.ne(t,50);for(const a of s)this.te(a,t)}ae(e,t){this.ne(t,37),Fe.fromName(e).path.forEach(s=>{this.ne(t,60),this.le(s,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function WD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function a0(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=WD(255&t[a]);if(s+=l,8!==l)break}return s}(n);return Math.ceil(e/8)}rf.fe=new rf;class u0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this._e(s.value),s=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.ge(s.value),s=t.next();this.ye()}pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this._e(s);else if(s<2048)this._e(960|s>>>6),this._e(128|63&s);else if(t<"\ud800"||"\udbff"<t)this._e(480|s>>>12),this._e(128|63&s>>>6),this._e(128|63&s);else{const a=t.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}this.we()}Ie(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.ge(s);else if(s<2048)this.ge(960|s>>>6),this.ge(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.ge(480|s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s);else{const a=t.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}this.ye()}Te(e){const t=this.Ee(e),s=a0(t);this.Ae(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Re(e){const t=this.Ee(e),s=a0(t);this.Ae(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class zD{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class JI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class wa{constructor(){this.De=new u0,this.Ce=new zD(this.De),this.xe=new JI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Su{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Su(this.indexId,this.documentKey,this.arrayValue,s)}}function xu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=c0(n.arrayValue,e.arrayValue),0!==t?t:(t=c0(n.directionalValue,e.directionalValue),0!==t?t:Fe.comparator(n.documentKey,e.documentKey)))}function c0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class l0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const s=t;s.S()?this.Fe=s:this.Oe.push(s)}}$e(e){const t=bv(e);if(void 0!==t&&!this.Be(t))return!1;const s=Oh(e);let a=0,l=0;for(;a<s.length&&this.Be(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Fe){const p=s[a];if(!this.Le(this.Fe,p)||!this.Ue(this.Me[l++],p))return!1;++a}for(;a<s.length;++a){const p=s[a];if(l>=this.Me.length||!this.Ue(this.Me[l++],p))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Hp{constructor(){this.qe=new dy}addToCollectionParentIndex(e,t){return this.qe.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getFieldIndex(e,t){return se.resolve(null)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class dy{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new zt(je.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new zt(je.comparator)).toArray()}}const sf=new Uint8Array(0);class XI{constructor(e){this.user=e,this.Ge=new dy,this.Ke=new Ea(t=>xi(t),(t,s)=>kh(t,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:s,parent:$r(a)};return d0(e).put(l)}return se.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[mv(t),""],!1,!0);return d0(e).qt(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(ho(p.parent))}return s})}addFieldIndex(e,t){const s=Gp(e),a={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;return delete a.indexId,s.add(a).next()}deleteFieldIndex(e,t){const s=Gp(e),a=qp(e),l=of(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=of(e);let a=!0;const l=new Map;return se.forEach(this.Qe(t),p=>this.getFieldIndex(e,p).next(_=>{a&&(a=!!_),l.set(p,_)})).next(()=>{if(a){let p=Jt();return se.forEach(l,(_,D)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${xi(t)}`);const N=function(Dt,Mn){const bt=bv(Mn);if(void 0===bt)return null;for(const Bt of Ep(Dt,bt.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(D,_),F=function(Dt,Mn){const bt=new Map;for(const Bt of Oh(Mn))for(const Ut of Ep(Dt,Bt.fieldPath))switch(Ut.op){case"==":case"in":bt.set(Bt.fieldPath.canonicalString(),Ut.value);break;case"not-in":case"!=":return bt.set(Bt.fieldPath.canonicalString(),Ut.value),Array.from(bt.values())}return null}(D,_),z=function(Dt,Mn){const bt=[];let Bt=!0;for(const qu of Oh(Mn)){let vo,$f=!0;for(const Gr of Ep(Dt,qu.fieldPath)){let Zn,sm=!0;switch(Gr.op){case"<":case"<=":Zn="nullValue"in(Ut=Gr.value)?_p:"booleanValue"in Ut?{booleanValue:!1}:"integerValue"in Ut||"doubleValue"in Ut?{doubleValue:NaN}:"timestampValue"in Ut?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ut?{stringValue:""}:"bytesValue"in Ut?{bytesValue:""}:"referenceValue"in Ut?cd(Uo.empty(),Fe.empty()):"geoPointValue"in Ut?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ut?{arrayValue:{}}:"mapValue"in Ut?{mapValue:{}}:et();break;case"==":case"in":case">=":Zn=Gr.value;break;case">":Zn=Gr.value,sm=!1;break;case"!=":case"not-in":Zn=_p}bI(vo,Zn)===Zn&&(vo=Zn,$f=sm)}if(null!==Dt.startAt)for(let Gr=0;Gr<Dt.orderBy.length;++Gr)if(Dt.orderBy[Gr].field.isEqual(qu.fieldPath)){const Zn=Dt.startAt.position[Gr];bI(vo,Zn)===Zn&&(vo=Zn,$f=Dt.startAt.inclusive);break}if(void 0===vo)return null;bt.push(vo),Bt&&(Bt=$f)}var Ut;return new Du(bt,Bt)}(D,_),oe=function(Dt,Mn){const bt=[];let Bt=!0;for(const qu of Oh(Mn)){let vo,$f=!0;for(const Gr of Ep(Dt,qu.fieldPath)){let Zn,sm=!0;switch(Gr.op){case">=":case">":Zn="nullValue"in(Ut=Gr.value)?{booleanValue:!1}:"booleanValue"in Ut?{doubleValue:NaN}:"integerValue"in Ut||"doubleValue"in Ut?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ut?{stringValue:""}:"stringValue"in Ut?{bytesValue:""}:"bytesValue"in Ut?cd(Uo.empty(),Fe.empty()):"referenceValue"in Ut?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ut?{arrayValue:{}}:"arrayValue"in Ut?{mapValue:{}}:"mapValue"in Ut?yp:et(),sm=!1;break;case"==":case"in":case"<=":Zn=Gr.value;break;case"<":Zn=Gr.value,sm=!1;break;case"!=":case"not-in":Zn=yp}TI(vo,Zn)===Zn&&(vo=Zn,$f=sm)}if(null!==Dt.endAt)for(let Gr=0;Gr<Dt.orderBy.length;++Gr)if(Dt.orderBy[Gr].field.isEqual(qu.fieldPath)){const Zn=Dt.endAt.position[Gr];TI(vo,Zn)===Zn&&(vo=Zn,$f=Dt.endAt.inclusive);break}if(void 0===vo)return null;bt.push(vo),Bt&&(Bt=$f)}var Ut;return new Du(bt,Bt)}(D,_),ye=this.je(_,D,z),$e=this.je(_,D,oe),ot=this.We(_,D,F),Xt=this.ze(_.indexId,N,ye,!!z&&z.inclusive,$e,!!oe&&oe.inclusive,ot);return se.forEach(Xt,Dt=>s.Kt(Dt,t.limit).next(Mn=>{Mn.forEach(bt=>{p=p.add(new Fe(ho(bt.documentKey)))})}))}).next(()=>p)}return se.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,s,a,l,p,_){const D=(null!=t?t.length:1)*Math.max(null!=s?s.length:1,null!=l?l.length:1),A=D/(null!=t?t.length:1),N=[];for(let F=0;F<D;++F){const z=t?this.He(t[F/A]):sf,oe=s?this.Je(e,z,s[F%A],a):this.Ye(e),ye=l?this.Xe(e,z,l[F%A],p):this.Ye(e+1);N.push(...this.createRange(oe,ye,_.map($e=>this.Je(e,z,$e,!0))))}return N}Je(e,t,s,a){const l=new Su(e,Fe.empty(),t,s);return a?l:l.ke()}Xe(e,t,s,a){const l=new Su(e,Fe.empty(),t,s);return a?l.ke():l}Ye(e){return new Su(e,Fe.empty(),sf,sf)}getFieldIndex(e,t){const s=new l0(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{const p=l.filter(_=>s.$e(_));return p.sort((_,D)=>D.fields.length-_.fields.length),p.length>0?p[0]:null})}Ze(e,t){const s=new wa;for(const a of Oh(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.Ne(a.kind);rf.fe.Zt(l,p)}return s.Se()}He(e){const t=new wa;return rf.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,s){if(null===s)return[];let a=[];a.push(new wa);let l=0;for(const p of Oh(e)){const _=s[l++];for(const D of a)if(this.tn(t,p.fieldPath)&&ld(_))a=this.en(a,p,_);else{const A=D.Ne(p.kind);rf.fe.Zt(_,A)}}return this.nn(a)}je(e,t,s){return null==s?null:this.We(e,t,s.position)}nn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Se();return t}en(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const _ of a){const D=new wa;D.seed(_.Se()),rf.fe.Zt(p,D.Ne(t.kind)),l.push(D)}return l}tn(e,t){return!!e.filters.find(s=>s instanceof Ar&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Gp(e),a=qp(e);return(t?s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.qt()).next(l=>{const p=[];return se.forEach(l,_=>a.get([_.indexId,this.uid]).next(D=>{p.push(function(A,N){const F=N?new Vc(N.sequenceNumber,new oo(Yc(N.readTime),new Fe(ho(N.documentKey)),N.largestBatchId)):Vc.empty(),z=A.fields.map(([oe,ye])=>new so(pr.fromServerFormat(oe),ye));return new Om(A.indexId,A.collectionGroup,z,F)}(_,D))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Ot(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Gp(e),l=qp(e);return this.sn(e).next(p=>a.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(_=>se.forEach(_,D=>{return l.put({indexId:D.indexId,uid:this.user.uid||"",sequenceNumber:p,readTime:Zc((z=s).readTime),documentKey:$r(z.documentKey.path),largestBatchId:z.largestBatchId});var z})))}updateIndexEntries(e,t){const s=new Map;return se.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?se.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(_=>(s.set(a.collectionGroup,_),se.forEach(_,D=>this.rn(e,a,D).next(A=>{const N=this.on(l,D);return A.isEqual(N)?se.resolve():this.un(e,l,A,N)}))))})}an(e,t,s){return of(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,documentKey:$r(t.key.path)})}cn(e,t,s){return of(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,$r(t.key.path)])}rn(e,t,s){const a=of(e);let l=new zt(xu);return a.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,$r(t.path)])},(p,_)=>{l=l.add(new Su(s.indexId,t,_.arrayValue,_.directionalValue))}).next(()=>l)}on(e,t){let s=new zt(xu);const a=this.Ze(t,e);if(null==a)return s;const l=bv(t);if(null!=l){const p=e.data.field(l.fieldPath);if(ld(p))for(const _ of p.arrayValue.values||[])s=s.add(new Su(t.indexId,e.key,this.He(_),a))}else s=s.add(new Su(t.indexId,e.key,sf,a));return s}un(e,t,s,a){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,_,D,A,N){const F=p.getIterator(),z=_.getIterator();let oe=_d(F),ye=_d(z);for(;oe||ye;){let $e=!1,ot=!1;if(oe&&ye){const Xt=D(oe,ye);Xt<0?ot=!0:Xt>0&&($e=!0)}else null!=oe?ot=!0:$e=!0;$e?(A(ye),ye=_d(z)):ot?(N(oe),oe=_d(F)):(oe=_d(F),ye=_d(z))}}(s,a,xu,p=>{l.push(this.an(e,t,p))},p=>{l.push(this.cn(e,t,p))}),se.waitFor(l)}sn(e){let t=1;return qp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,_)=>xu(p,_)).filter((p,_,D)=>!_||0!==xu(p,D[_-1]));const a=[];a.push(e);for(const p of s){const _=xu(p,e),D=xu(p,t);if(0===_)a[0]=e.ke();else if(_>0&&D<0)a.push(p),a.push(p.ke());else if(D>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2)l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,""],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,""]));return l}}function d0(n){return mr(n,"collectionParents")}function of(n){return mr(n,"indexEntries")}function Gp(n){return mr(n,"indexConfiguration")}function qp(n){return mr(n,"indexState")}const hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mi{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Mi(e,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fy(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let _=0;const D=s.Wt({range:p},(N,F,z)=>(_++,z.delete()));l.push(D.next(()=>{wt(1===_)}));const A=[];for(const N of t.mutations){const F=r0(e,N.key.path,t.batchId);l.push(a.delete(F)),A.push(N.key)}return se.waitFor(l).next(()=>A)}function af(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(41943040,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);class uf{constructor(e,t,s,a){this.userId=e,this.M=t,this.indexManager=s,this.referenceDelegate=a,this.hn={}}static Yt(e,t,s,a){wt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new uf(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).Wt({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Ad(e),p=qo(e);return p.add({}).next(_=>{wt("number"==typeof _);const D=new Lp(_,t,s,a),A=function(z,oe,ye){const $e=ye.baseMutations.map(Xt=>Zh(z.Jt,Xt)),ot=ye.mutations.map(Xt=>Zh(z.Jt,Xt));return{userId:oe,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:$e,mutations:ot}}(this.M,this.userId,D),N=[];let F=new zt((z,oe)=>Ot(z.canonicalString(),oe.canonicalString()));for(const z of a){const oe=r0(this.userId,z.key.path,_);F=F.add(z.key.path.popLast()),N.push(p.put(A)),N.push(l.put(oe,$I))}return F.forEach(z=>{N.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.hn[_]=D.keys()}),se.waitFor(N).next(()=>D)})}lookupMutationBatch(e,t){return qo(e).get(t).next(s=>s?(wt(s.userId===this.userId),Qc(this.M,s)):null)}ln(e,t){return this.hn[t]?se.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.hn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return qo(e).Wt({index:"userMutationsIndex",range:a},(p,_,D)=>{_.userId===this.userId&&(wt(_.batchId>=s),l=Qc(this.M,_)),D.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return qo(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).qt("userMutationsIndex",t).next(s=>s.map(a=>Qc(this.M,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Op(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Ad(e).Wt({range:a},(p,_,D)=>{const[A,N,F]=p,z=ho(N);if(A===this.userId&&t.path.isEqual(z))return qo(e).get(F).next(oe=>{if(!oe)throw et();wt(oe.userId===this.userId),l.push(Qc(this.M,oe))});D.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(Ot);const a=[];return t.forEach(l=>{const p=Op(this.userId,l.path),_=IDBKeyRange.lowerBound(p),D=Ad(e).Wt({range:_},(A,N,F)=>{const[z,oe,ye]=A,$e=ho(oe);z===this.userId&&l.path.isEqual($e)?s=s.add(ye):F.done()});a.push(D)}),se.waitFor(a).next(()=>this.fn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=Op(this.userId,s),p=IDBKeyRange.lowerBound(l);let _=new zt(Ot);return Ad(e).Wt({range:p},(D,A,N)=>{const[F,z,oe]=D,ye=ho(z);F===this.userId&&s.isPrefixOf(ye)?ye.length===a&&(_=_.add(oe)):N.done()}).next(()=>this.fn(e,_))}fn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(qo(e).get(l).next(p=>{if(null===p)throw et();wt(p.userId===this.userId),s.push(Qc(this.M,p))}))}),se.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return fy(e.Ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),se.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Ad(e).Wt({range:s},(l,p,_)=>{if(l[0]===this.userId){const D=ho(l[1]);a.push(D)}else _.done()}).next(()=>{wt(0===a.length)})})}containsKey(e,t){return ew(e,this.userId,t)}_n(e){return tw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ew(n,e,t){const s=Op(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Ad(n).Wt({range:l,jt:!0},(_,D,A)=>{const[N,F,z]=_;N===e&&F===a&&(p=!0),A.done()}).next(()=>p)}function qo(n){return mr(n,"mutations")}function Ad(n){return mr(n,"documentMutations")}function tw(n){return mr(n,"mutationQueues")}class fo{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new fo(0)}static gn(){return new fo(-1)}}class nw{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const s=new fo(t.highestTargetId);return t.highestTargetId=s.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>_t.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.yn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.pn(e,a)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(s=>(s.targetCount+=1,this.Tn(t,s),this.pn(e,s))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mu(e).delete(t.targetId)).next(()=>this.yn(e)).next(s=>(wt(s.targetCount>0),s.targetCount-=1,this.pn(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return Mu(e).Wt((p,_)=>{const D=nf(_);D.sequenceNumber<=t&&null===s.get(D.targetId)&&(a++,l.push(this.removeTargetData(e,D)))}).next(()=>se.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Mu(e).Wt((s,a)=>{const l=nf(a);t(l)})}yn(e){return Wp(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}pn(e,t){return Wp(e).put("targetGlobalKey",t)}In(e,t){return Mu(e).put(ay(this.M,t))}Tn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=xi(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Mu(e).Wt({range:a,index:"queryTargetsIndex"},(p,_,D)=>{const A=nf(_);kh(t,A.target)&&(l=A,D.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Nu(e);return t.forEach(p=>{const _=$r(p.path);a.push(l.put({targetId:s,path:_})),a.push(this.referenceDelegate.addReference(e,s,p))}),se.waitFor(a)}removeMatchingKeys(e,t,s){const a=Nu(e);return se.forEach(t,l=>{const p=$r(l.path);return se.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Nu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Nu(e);let l=Jt();return a.Wt({range:s,jt:!0},(p,_,D)=>{const A=ho(p[1]),N=new Fe(A);l=l.add(N)}).next(()=>l)}containsKey(e,t){const s=$r(t.path),a=IDBKeyRange.bound([s],[mv(s)],!1,!0);let l=0;return Nu(e).Wt({index:"documentTargetsIndex",jt:!0,range:a},([p,_],D,A)=>{0!==p&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return Mu(e).get(t).next(s=>s?nf(s):null)}}function Mu(n){return mr(n,"targets")}function Wp(n){return mr(n,"targetGlobal")}function Nu(n){return mr(n,"targetDocuments")}function Wo(n){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,he.Z)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==zc)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),Sd.apply(this,arguments)}function zp([n,e],[t,s]){const a=Ot(n,t);return 0===a?Ot(e,s):a}class KD{constructor(e){this.En=e,this.buffer=new zt(zp),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();zp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const s=this.Pn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,he.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){Rs(a)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Wo(a)}yield t.vn(e)}))}}class py{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Qi.A);const s=new KD(t);return this.Sn.forEachTarget(e,a=>s.bn(a.sequenceNumber)).next(()=>this.Sn.Cn(e,a=>s.bn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Sn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(hy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hy):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let s,a,l,p,_,D,A;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(F=>(F>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${F}`),a=this.params.maximumSequenceNumbersToCollect):a=F,p=Date.now(),this.nthSequenceNumber(e,a))).next(F=>(s=F,_=Date.now(),this.removeTargets(e,s,t))).next(F=>(l=F,D=Date.now(),this.removeOrphanedDocuments(e,s))).next(F=>(A=Date.now(),pp()<=ei.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-N}ms\n\tDetermined least recently used ${a} in `+(_-p)+`ms\n\tRemoved ${l} targets in `+(D-_)+`ms\n\tRemoved ${F} documents in `+(A-D)+`ms\nTotal Duration: ${A-N}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:F})))}}class gy{constructor(e,t){this.db=e,this.garbageCollector=new py(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Nn(e){let t=0;return this.Cn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(s,a)=>t(a))}addReference(e,t,s){return cf(e,s)}removeReference(e,t,s){return cf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return cf(e,t)}Mn(e,t){return function(s,a){let l=!1;return tw(s).zt(p=>ew(s,p,a).next(_=>(_&&(l=!0),se.resolve(!_)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.kn(e,(p,_)=>{if(_<=t){const D=this.Mn(e,p).next(A=>{if(!A)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,_t.min()),Nu(e).delete([0,$r(p.path)])))});a.push(D)}}).next(()=>se.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return cf(e,t)}kn(e,t){const s=Nu(e);let a,l=Qi.A;return s.Wt({index:"documentTargetsIndex"},([p,_],{path:D,sequenceNumber:A})=>{0===p?(l!==Qi.A&&t(new Fe(ho(a)),l),l=A,a=D):l=Qi.A}).next(()=>{l!==Qi.A&&t(new Fe(ho(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(n,e){return Nu(n).put((s=n.currentSequenceNumber,{targetId:0,path:$r(e.path),sequenceNumber:s}));var s}class h0{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class my{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ru(e).put(s)}removeEntry(e,t,s){return Ru(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],tf(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.On(e,s)))}getEntry(e,t){let s=xn.newInvalidDocument(t);return Ru(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xd(t))},(a,l)=>{s=this.Fn(t,l)}).next(()=>s)}$n(e,t){let s={size:0,document:xn.newInvalidDocument(t)};return Ru(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xd(t))},(a,l)=>{s={document:this.Fn(t,l),size:af(l)}}).next(()=>s)}getEntries(e,t){let s=uo();return this.Bn(e,t,(a,l)=>{const p=this.Fn(a,l);s=s.insert(a,p)}).next(()=>s)}Ln(e,t){let s=uo(),a=new Un(Fe.comparator);return this.Bn(e,t,(l,p)=>{const _=this.Fn(l,p);s=s.insert(l,_),a=a.insert(l,af(p))}).next(()=>({documents:s,Un:a}))}Bn(e,t,s){if(t.isEmpty())return se.resolve();let a=new zt(yy);t.forEach(D=>a=a.add(D));const l=IDBKeyRange.bound(xd(a.first()),xd(a.last())),p=a.getIterator();let _=p.getNext();return Ru(e).Wt({index:"documentKeyIndex",range:l},(D,A,N)=>{const F=Fe.fromSegments([...A.prefixPath,A.collectionGroup,A.documentId]);for(;_&&yy(_,F)<0;)s(_,null),_=p.getNext();_&&_.isEqual(F)&&(s(_,A),_=p.hasNext()?p.getNext():null),_?N.Ut(xd(_)):N.done()}).next(()=>{for(;_;)s(_,null),_=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,s){const a=[t.popLast().toArray(),t.lastSegment(),tf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ru(e).qt(IDBKeyRange.bound(a,l,!0)).next(p=>{let _=uo();for(const D of p){const A=this.Fn(Fe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);_=_.insert(A.key,A)}return _})}getAllFromCollectionGroup(e,t,s,a){let l=uo();const p=g0(t,s),_=g0(t,oo.max());return Ru(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,_,!0)},(D,A,N)=>{const F=this.Fn(Fe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);l=l.insert(F.key,F),l.size===a&&N.done()}).next(()=>l)}newChangeBuffer(e){return new f0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return p0(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}On(e,t){return p0(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const s=function ZI(n,e){let t;if(e.document)t=Jm(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Fe.fromSegments(e.noDocument.path),a=Yc(e.noDocument.readTime);t=xn.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const s=Fe.fromSegments(e.unknownDocument.path),a=Yc(e.unknownDocument.version);t=xn.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new zn(s[0],s[1]);return _t.fromTimestamp(a)}(e.readTime)),t}(this.M,t);if(!s.isNoDocument()||!s.version.isEqual(_t.min()))return s}return xn.newInvalidDocument(e)}}class f0 extends h0{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ea(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new zt((l,p)=>Ot(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const _=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,_.readTime)),p.isValidDocument()){const D=o0(this.qn.M,p);a=a.add(l.path.popLast()),s+=af(D)-_.size,t.push(this.qn.addEntry(e,l,D))}else if(s-=_.size,this.trackRemovals){const D=o0(this.qn.M,p.convertToNoDocument(_t.min()));t.push(this.qn.addEntry(e,l,D))}}),a.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,s)),se.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(s=>(this.Gn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:s,Un:a})=>(a.forEach((l,p)=>{this.Gn.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function p0(n){return mr(n,"remoteDocumentGlobal")}function Ru(n){return mr(n,"remoteDocumentsV14")}function xd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function g0(n,e){const t=e.documentKey.path.toArray();return[n,tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yy(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Fe.comparator(n,e)}class m0{constructor(e){this.M=e}kt(e,t,s,a){const l=new Ia("createOrUpgrade",t);var _;s<1&&a>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pp,{unique:!0}),_.createObjectStore("documentMutations"),Kp(e),function(_){_.createObjectStore("remoteDocuments")}(e));let p=se.resolve();return s<3&&a>=3&&(0!==s&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),Kp(e)),p=p.next(()=>function(_){const D=_.store("targetGlobal"),A={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",A)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(_,D){return D.store("mutations").qt().next(A=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pp,{unique:!0});const N=D.store("mutations"),F=A.map(z=>N.put(z));return se.waitFor(F)})}(e,l))),p=p.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Kn(l))),s<6&&a>=6&&(p=p.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),s<7&&a>=7&&(p=p.next(()=>this.jn(l))),s<8&&a>=8&&(p=p.next(()=>this.Wn(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.zn(l))),s<11&&a>=11&&(p=p.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(_){const D=_.createObjectStore("documentOverlays",{keyPath:Xh});D.createIndex("collectionPathOverlayIndex",ni,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",Wc,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(_){const D=_.createObjectStore("remoteDocumentsV14",{keyPath:HI});D.createIndex("documentKeyIndex",GI),D.createIndex("collectionGroupIndex",qI)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>{!function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:zI}).createIndex("sequenceNumberIndex",KI,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:ny}).createIndex("documentKeyIndex",Ho,{unique:!1})}(e)})),p}Qn(e){let t=0;return e.store("remoteDocuments").Wt((s,a)=>{t+=af(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Kn(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.qt().next(a=>se.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.qt("userMutationsIndex",p).next(_=>se.forEach(_,D=>{wt(D.userId===l.userId);const A=Qc(this.M,D);return fy(e,l.userId,A).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.Wt((p,_)=>{const D=new je(p),A=[0,$r(D)];l.push(t.get(A).next(N=>N?se.resolve():t.put({targetId:0,path:$r(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>se.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:Jh});const s=t.store("collectionParents"),a=new dy,l=p=>{if(a.add(p)){const _=p.lastSegment(),D=p.popLast();return s.put({collectionId:_,parent:$r(D)})}};return t.store("remoteDocuments").Wt({jt:!0},(p,_)=>{const D=new je(p);return l(D.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([p,_,D],A)=>{const N=ho(_);return l(N.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((s,a)=>{const l=nf(a),p=ay(this.M,l);return t.put(p)})}Hn(e,t){const s=t.store("remoteDocuments"),a=[];return s.Wt((l,p)=>{const _=t.store("remoteDocumentsV14"),D=(A=p,A.document?new Fe(je.fromString(A.document.name).popFirst(5)):A.noDocument?Fe.fromSegments(A.noDocument.path):A.unknownDocument?Fe.fromSegments(A.unknownDocument.path):et()).path.toArray();var A;const N={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(_.put(N))}).next(()=>se.waitFor(a))}}function Kp(n){n.createObjectStore("targetDocuments",{keyPath:bd}).createIndex("documentTargetsIndex",WI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kp,{unique:!0}),n.createObjectStore("targetGlobal")}const _y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vy{constructor(e,t,s,a,l,p,_,D,A,N,F=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Jn=l,this.window=p,this.document=_,this.Yn=A,this.Xn=N,this.Zn=F,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=z=>Promise.resolve(),!vy.vt())throw new Ae(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gy(this,a),this.cs=t+"main",this.M=new oy(D),this.hs=new ri(this.cs,this.Zn,new m0(this.M)),this.ls=new nw(this.referenceDelegate,this.M),this.fs=new my(this.M),this.ds=new QI,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===N&&kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,_y);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Qi(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var s=(0,he.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,he.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Rs(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return lf(e).get("owner").next(t=>se.resolve(this.bs(t)))}Ps(e){return Zp(e).delete(this.clientId)}Vs(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=mr(s,"clientMetadata");return a.qt().next(l=>{const p=e.Ss(l,18e5),_=l.filter(D=>-1===p.indexOf(D));return se.forEach(_,D=>a.delete(D.clientId)).next(()=>_)})}).catch(()=>[]);if(e._s)for(const s of t)e._s.removeItem(e.Ds(s.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?se.resolve(!0):lf(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,_y);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zp(e).qt().next(s=>void 0===this.Ss(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new sy(t,Qi.A);return e.As(s).next(()=>e.Ps(s))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(s=>this.vs(s.updateTimeMs,t)&&!this.Cs(s.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Zp(e).qt().next(t=>this.Ss(t,18e5).map(s=>s.clientId)))}get started(){return this.es}getMutationQueue(e,t){return uf.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new XI(e)}getDocumentOverlayCache(e){return ly.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,s){Ne("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=14===(p=this.Zn)?Td:13===p?ry:12===p?Ns:11===p?ef:void et();var p;let _;return this.hs.runTransaction(e,a,l,D=>(_=new sy(D,this.ts?this.ts.next():Qi.A),"readwrite-primary"===t?this.Ts(_).next(A=>!!A||this.Es(_)).next(A=>{if(!A)throw kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ae(ie.FAILED_PRECONDITION,zc);return s(_)}).next(A=>this.Rs(_).next(()=>A)):this.Fs(_).next(()=>s(_)))).then(D=>(_.raiseOnCommittedEvent(),D))}Fs(e){return lf(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ie.FAILED_PRECONDITION,_y)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lf(e).put("owner",t)}static vt(){return ri.vt()}As(e){const t=lf(e);return t.get("owner").next(s=>this.bs(s)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}vs(e,t){const s=Date.now();return!(e<s-t||e>s&&(kn(`Detected an update time that is in the future: ${e} > ${s}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,It.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const s=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return kn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){kn("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lf(n){return mr(n,"owner")}function Zp(n){return mr(n,"clientMetadata")}function Yp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ey{constructor(e,t,s){this.fs=e,this.$s=t,this.indexManager=s}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Ls(e,t,s))}Ls(e,t,s){return this.fs.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}Us(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}qs(e,t){return this.fs.getEntries(e,t).next(s=>this.Gs(e,s).next(()=>s))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.Us(t,s))}Ks(e,t,s){return Fe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Qs(e,t.path):Vm(t)?this.js(e,t,s):this.Ws(e,t,s);var a}Qs(e,t){return this.Bs(e,new Fe(t)).next(s=>{let a=Mp();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}js(e,t,s){const a=t.collectionGroup;let l=Mp();return this.indexManager.getCollectionParents(e,a).next(p=>se.forEach(p,_=>{const D=(A=t,N=_.child(a),new $o(N,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,N;return this.Ws(e,D,s).next(A=>{A.forEach((N,F)=>{l=l.insert(N,F)})})}).next(()=>l))}Ws(e,t,s){let a;return this.fs.getAllFromCollection(e,t.path,s).next(l=>(a=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const p of l)for(const _ of p.mutations){const D=_.key;let A=a.get(D);null==A&&(A=xn.newInvalidDocument(D),a=a.insert(D,A)),Gm(_,A,p.localWriteTime),A.isFoundDocument()||(a=a.remove(D))}}).next(()=>(a.forEach((l,p)=>{Pv(t,p)||(a=a.remove(l))}),a))}}class Qp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.zs=s,this.Hs=a}static Js(e,t){let s=Jt(),a=Jt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Qp(e,t.fromCache,s,a)}}class Iy{Ys(e){this.Xs=e}Ks(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(_t.min())?this.Zs(e,t):this.Xs.qs(e,a).next(l=>{const p=this.ti(t,l);return(Bh(t)||Lm(t))&&this.ei(t.limitType,p,a,s)?this.Zs(e,t):(pp()<=ei.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bm(t)),this.Xs.Ks(e,t,Tv(s,-1)).next(_=>(p.forEach(D=>{_=_.insert(D.key,D)}),_)))});var l}ti(e,t){let s=new zt(Um(e));return t.forEach((a,l)=>{Pv(e,l)&&(s=s.add(l))}),s}ei(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Zs(e,t){return pp()<=ei.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Bm(t)),this.Xs.Ks(e,t,oo.min())}}class y0{constructor(e,t,s,a){this.persistence=e,this.ni=t,this.M=a,this.si=new Un(Ot),this.ii=new Ea(l=>xi(l),kh),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(s)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Ey(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function wy(n,e,t,s){return new y0(n,e,t,s)}function Dy(n,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,he.Z)(function*(n,e){const t=Ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.$s.getAllMutationBatches(s).next(l=>(a=l,t.ui(e),t.$s.getAllMutationBatches(s))).next(l=>{const p=[],_=[];let D=Jt();for(const A of a){p.push(A.batchId);for(const N of A.mutations)D=D.add(N.key)}for(const A of l){_.push(A.batchId);for(const N of A.mutations)D=D.add(N.key)}return t.ai.qs(s,D).next(A=>({ci:A,removedBatchIds:p,addedBatchIds:_}))})})}),Jp.apply(this,arguments)}function _0(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(p,_,D,A){const N=D.batch,F=N.keys();let z=se.resolve();return F.forEach(oe=>{z=z.next(()=>A.getEntry(_,oe)).next(ye=>{const $e=D.docVersions.get(oe);wt(null!==$e),ye.version.compareTo($e)<0&&(N.applyToRemoteDocument(ye,D),ye.isValidDocument()&&(ye.setReadTime(D.commitVersion),A.addEntry(ye)))})}),z.next(()=>p.$s.removeMutationBatch(_,N))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.$s.performConsistencyCheck(s)).next(()=>t.ai.qs(s,a))})}function by(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function ZD(n,e){const t=Ue(n),s=e.snapshotVersion;let a=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.oi.newChangeBuffer({trackRemovals:!0});a=t.si;const _=[];e.targetChanges.forEach((A,N)=>{const F=a.get(N);if(!F)return;_.push(t.ls.removeMatchingKeys(l,A.removedDocuments,N).next(()=>t.ls.addMatchingKeys(l,A.addedDocuments,N)));let z=F.withSequenceNumber(l.currentSequenceNumber);var oe,ye,$e;e.targetMismatches.has(N)?z=z.withResumeToken(cn.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,s)),a=a.insert(N,z),ye=z,$e=A,(0===(oe=F).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&_.push(t.ls.updateTargetData(l,z))});let D=uo();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),_.push(v0(l,p,e.documentUpdates).next(A=>{D=A})),!s.isEqual(_t.min())){const A=t.ls.getLastRemoteSnapshotVersion(l).next(N=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,s));_.push(A)}return se.waitFor(_).next(()=>p.apply(l)).next(()=>t.ai.Gs(l,D)).next(()=>D)}).then(l=>(t.si=a,l))}function v0(n,e,t){let s=Jt();return t.forEach(a=>s=s.add(a)),e.getEntries(n,s).next(a=>{let l=uo();return t.forEach((p,_)=>{const D=a.get(p);_.isNoDocument()&&_.version.isEqual(_t.min())?(e.removeEntry(p,_.readTime),l=l.insert(p,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(p,_)):Ne("LocalStore","Ignoring outdated watch update for ",p,". Current version:",D.version," Watch version:",_.version)}),l})}function iw(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(s,e)))}function Jc(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.ls.getTargetData(s,e).next(l=>l?(a=l,se.resolve(a)):t.ls.allocateTargetId(s).next(p=>(a=new Au(e,p,0,s.currentSequenceNumber),t.ls.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.si.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.si=t.si.insert(s.targetId,s),t.ii.set(e,s.targetId)),s})}function Md(n,e,t){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,he.Z)(function*(n,e,t){const s=Ue(n),a=s.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Rs(p))throw p;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.si=s.si.remove(e),s.ii.delete(a.target)}),Kn.apply(this,arguments)}function df(n,e,t){const s=Ue(n);let a=_t.min(),l=Jt();return s.persistence.runTransaction("Execute query","readonly",p=>function(_,D,A){const N=Ue(_),F=N.ii.get(A);return void 0!==F?se.resolve(N.si.get(F)):N.ls.getTargetData(D,A)}(s,p,Ms(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.ls.getMatchingKeysForTargetId(p,_.targetId).next(D=>{l=D})}).next(()=>s.ni.Ks(p,e,t?a:_t.min(),t?l:Jt())).next(_=>(Ty(s,xI(e),_),{documents:_,hi:l})))}function E0(n,e){const t=Ue(n),s=Ue(t.ls),a=t.si.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Et(l,e).next(p=>p?p.target:null))}function I0(n,e){const t=Ue(n),s=t.ri.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.oi.getAllFromCollectionGroup(a,e,Tv(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Ty(t,e,a),a))}function Ty(n,e,t){let s=_t.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.ri.set(e,s)}function Xp(){return Xp=(0,he.Z)(function*(n,e,t,s){const a=Ue(n);let l=Jt(),p=uo();for(const A of t){const N=e.li(A.metadata.name);A.document&&(l=l.add(N));const F=e.fi(A);F.setReadTime(e.di(A.metadata.readTime)),p=p.insert(N,F)}const _=a.oi.newChangeBuffer({trackRemovals:!0}),D=yield Jc(a,(A=s,Ms(gd(je.fromString(`__bundle__/docs/${A}`)))));var A;return a.persistence.runTransaction("Apply bundle documents","readwrite",A=>v0(A,_,p).next(N=>(_.apply(A),N)).next(N=>a.ls.removeMatchingKeysForTargetId(A,D.targetId).next(()=>a.ls.addMatchingKeys(A,l,D.targetId)).next(()=>a.ai.Gs(A,N)).next(()=>N)))}),Xp.apply(this,arguments)}function w0(n,e){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,he.Z)(function*(n,e,t=Jt()){const s=yield Jc(n,Ms(uy(e.bundledQuery))),a=Ue(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=fn(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.ds.saveNamedQuery(l,e);const _=s.withResumeToken(cn.EMPTY_BYTE_STRING,p);return a.si=a.si.insert(_.targetId,_),a.ls.updateTargetData(l,_).next(()=>a.ls.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.ls.addMatchingKeys(l,t,s.targetId)).next(()=>a.ds.saveNamedQuery(l,e))})}),Pu.apply(this,arguments)}class ow{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return se.resolve(this._i.get(t))}saveBundleMetadata(e,t){var s;return this._i.set(t.id,{id:(s=t).id,version:s.version,createTime:fn(s.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(s=t).name,query:uy(s.bundledQuery),readTime:fn(s.readTime)}),se.resolve();var s}}class aw{constructor(){this.overlays=new Un(Fe.comparator),this.mi=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.Xt(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.mi.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=qc(),l=t.length+1,p=new Fe(t.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const D=_.getNext().value,A=D.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===l&&D.largestBatchId>s&&a.set(D.getKey(),D)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Un((A,N)=>A-N);const p=this.overlays.getIterator();for(;p.hasNext();){const A=p.getNext().value;if(A.getKey().getCollectionGroup()===t&&A.largestBatchId>s){let N=l.get(A.largestBatchId);null===N&&(N=qc(),l=l.insert(A.largestBatchId,N)),N.set(A.getKey(),A)}}const _=qc(),D=l.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((A,N)=>_.set(A,N)),!(_.size()>=a)););return se.resolve(_)}Xt(e,t,s){if(null===s)return;const a=this.overlays.get(s.key);if(null!==a){const p=this.mi.get(a.largestBatchId).delete(s.key);this.mi.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new Bp(t,s));let l=this.mi.get(t);void 0===l&&(l=Jt(),this.mi.set(t,l)),this.mi.set(t,l.add(s.key))}}class eg{constructor(){this.gi=new zt(xr.yi),this.pi=new zt(xr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const s=new xr(e,t);this.gi=this.gi.add(s),this.pi=this.pi.add(s)}Ti(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Ei(new xr(e,t))}Ai(e,t){e.forEach(s=>this.removeReference(s,t))}Ri(e){const t=new Fe(new je([])),s=new xr(t,e),a=new xr(t,e+1),l=[];return this.pi.forEachInRange([s,a],p=>{this.Ei(p),l.push(p.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Fe(new je([])),s=new xr(t,e),a=new xr(t,e+1);let l=Jt();return this.pi.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new xr(e,0),s=this.gi.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Fe.comparator(e.key,t.key)||Ot(e.Vi,t.Vi)}static Ii(e,t){return Ot(e.Vi,t.Vi)||Fe.comparator(e.key,t.key)}}class D0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new zt(xr.yi)}checkEmpty(e){return se.resolve(0===this.$s.length)}addMutationBatch(e,t,s,a){const l=this.vi;this.vi++;const p=new Lp(l,t,s,a);this.$s.push(p);for(const _ of a)this.Si=this.Si.add(new xr(_.key,l)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return se.resolve(p)}lookupMutationBatch(e,t){return se.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ci(t+1),l=a<0?0:a;return se.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return se.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xr(t,0),a=new xr(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([s,a],p=>{const _=this.Di(p.Vi);l.push(_)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(Ot);return t.forEach(a=>{const l=new xr(a,0),p=new xr(a,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,p],_=>{s=s.add(_.Vi)})}),se.resolve(this.xi(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Fe.isDocumentKey(l)||(l=l.child(""));const p=new xr(new Fe(l),0);let _=new zt(Ot);return this.Si.forEachWhile(D=>{const A=D.key.path;return!!s.isPrefixOf(A)&&(A.length===a&&(_=_.add(D.Vi)),!0)},p),se.resolve(this.xi(_))}xi(e){const t=[];return e.forEach(s=>{const a=this.Di(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){wt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let s=this.Si;return se.forEach(t.mutations,a=>{const l=new xr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Si=s})}dn(e){}containsKey(e,t){const s=new xr(t,0),a=this.Si.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return se.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class YD{constructor(e){this.ki=e,this.docs=new Un(Fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.ki(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let s=uo();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),se.resolve(s)}getAllFromCollection(e,t,s){let a=uo();const l=new Fe(t.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:_,value:{document:D}}=p.getNext();if(!t.isPrefixOf(_.path))break;_.path.length>t.length+1||Av(Cv(D),s)<=0||(a=a.insert(D.key,D.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,s,a){et()}Mi(e,t){return se.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new b0(this)}getSize(e){return se.resolve(this.size)}}class b0 extends h0{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.qn.addEntry(e,a)):this.qn.removeEntry(s)}),se.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class T0{constructor(e){this.persistence=e,this.Oi=new Ea(t=>xi(t),kh),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Fi=0,this.$i=new eg,this.targetCount=0,this.Bi=fo.mn()}forEachTarget(e,t){return this.Oi.forEach((s,a)=>t(a)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Fi&&(this.Fi=t),se.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new fo(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.In(t),se.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Oi.forEach((p,_)=>{_.sequenceNumber<=t&&null===s.get(_.targetId)&&(this.Oi.delete(p),l.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),se.waitFor(l).next(()=>a)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.Oi.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.$i.Ti(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.$i.Ai(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.$i.Pi(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.$i.containsKey(t))}}class zo{constructor(e,t){this.Li={},this.overlays={},this.ts=new Qi(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new T0(this),this.indexManager=new Hp,this.fs=new YD(s=>this.referenceDelegate.Ui(s)),this.M=new oy(t),this.ds=new ow(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Li[e.toKey()];return s||(s=new D0(t,this.referenceDelegate),this.Li[e.toKey()]=s),s}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,s){Ne("MemoryPersistence","Starting transaction:",e);const a=new uw(this.ts.next());return this.referenceDelegate.qi(),s(a).next(l=>this.referenceDelegate.Gi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ki(e,t){return se.or(Object.values(this.Li).map(s=>()=>s.containsKey(e,t)))}}class uw extends Kc{constructor(e){super(),this.currentSequenceNumber=e}}class Cy{constructor(e){this.persistence=e,this.Qi=new eg,this.ji=null}static Wi(e){return new Cy(e)}get zi(){if(this.ji)return this.ji;throw et()}addReference(e,t,s){return this.Qi.addReference(s,t),this.zi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Qi.removeReference(s,t),this.zi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(a=>this.zi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.zi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.zi,s=>{const a=Fe.fromPath(s);return this.Hi(e,a).next(l=>{l||t.removeEntry(a,_t.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(s=>{s?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return se.or([()=>se.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function po(n,e){return`firestore_clients_${n}_${e}`}function Ps(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ji(n,e){return`firestore_targets_${n}_${e}`}class hf{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Ji(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new Ae(a.error.code,a.error.message))),p?new hf(e,t,a.state,l):(kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Ae(s.error.code,s.error.message))),l?new Nd(e,s.state,a):(kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=Gh();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Rh(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new tg(e,l):(kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ay{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ay(t.clientId,t.onlineState):(kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sy{constructor(){this.activeTargetIds=Gh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xy{constructor(e,t,s,a,l){this.window=e,this.Jn=t,this.persistenceKey=s,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Un(Ot),this.started=!1,this.ir=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=po(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Sy),this.ar=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Os();for(const a of t){if(a===e.tr)continue;const l=e.getItem(po(e.persistenceKey,a));if(l){const p=tg.Ji(a,l);p&&(e.sr=e.sr.insert(p.clientId,p))}}e._r();const s=e.storage.getItem(e.lr);if(s){const a=e.wr(s);a&&e.mr(a)}for(const a of e.ir)e.nr(a);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ji(this.persistenceKey,e));if(s){const a=Nd.Ji(e,s);a&&(t=a.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ji(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.pr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ne("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==s.key)if(t.ar.test(s.key)){if(null==s.newValue){const a=t.Rr(s.key);return t.br(a,null)}{const a=t.Pr(s.key,s.newValue);if(a)return t.br(a.clientId,a)}}else if(t.cr.test(s.key)){if(null!==s.newValue){const a=t.Vr(s.key,s.newValue);if(a)return t.vr(a)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const a=t.Sr(s.key,s.newValue);if(a)return t.Dr(a)}}else if(s.key===t.lr){if(null!==s.newValue){const a=t.wr(s.newValue);if(a)return t.mr(a)}}else if(s.key===t.ur){const a=function(l){let p=Qi.A;if(null!=l)try{const _=JSON.parse(l);wt("number"==typeof _),p=_}catch(_){kn("SharedClientState","Failed to read sequence number from WebStorage",_)}return p}(s.newValue);a!==Qi.A&&t.sequenceNumberHandler(a)}else if(s.key===t.dr){const a=t.Cr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const a=new hf(this.currentUser,e,t,s),l=Ps(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Yi())}pr(e){const t=Ps(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const a=Ji(this.persistenceKey,e),l=new Nd(e,t,s);this.setItem(a,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return tg.Ji(s,t)}Vr(e,t){const s=this.cr.exec(e),a=Number(s[1]);return hf.Ji(new Ur(void 0!==s[2]?s[2]:null),a,t)}Sr(e,t){const s=this.hr.exec(e),a=Number(s[1]);return Nd.Ji(a,t)}wr(e){return Ay.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),l=this.gr(s),p=[],_=[];return l.forEach(D=>{a.has(D)||p.push(D)}),a.forEach(D=>{l.has(D)||_.push(D)}),this.syncEngine.Or(p,_).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Gh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class ng{constructor(){this.Fr=new Sy,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Sy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ff{Br(e){}shutdown(){}}class C0{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const A0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cw{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class S0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,a,l){const p=this.oo(e,t);Ne("RestConnection","Sending: ",p,s);const _={};return this.uo(_,a,l),this.ao(e,p,_,s).then(D=>(Ne("RestConnection","Received: ",D),D),D=>{throw vu("RestConnection",`${e} failed with error: `,D,"url: ",p,"request:",s),D})}co(e,t,s,a,l){return this.ro(e,t,s,a,l)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}oo(e,t){return`${this.so}/v1/${t}:${A0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,s,a){return new Promise((l,p)=>{const _=new wI;_.listenOnce(ov.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Am.NO_ERROR:const A=_.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(A)),l(A);break;case Am.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),p(new Ae(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Am.HTTP_ERROR:const N=_.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',N,"response text:",_.getResponseText()),N>0){const F=_.getResponseJson().error;if(F&&F.status&&F.message){const z=function(oe){const ye=oe.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(ye)>=0?ye:ie.UNKNOWN}(F.status);p(new Ae(z,F.message))}else p(new Ae(ie.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new Ae(ie.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const D=JSON.stringify(a);_.send(t,"POST",D,s,15)})}ho(e,t,s){const a=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Cm(),p=II(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new uv({})),this.uo(_.initMessageHeaders,t,s),(0,It.uI)()||(0,It.b$)()||(0,It.d)()||(0,It.w1)()||(0,It.Mn)()||(0,It.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const D=a.join("");Ne("Connection","Creating WebChannel: "+D,_);const A=l.createWebChannel(D,_);let N=!1,F=!1;const z=new cw({jr:ye=>{F?Ne("Connection","Not sending because WebChannel is closed:",ye):(N||(Ne("Connection","Opening WebChannel transport."),A.open(),N=!0),Ne("Connection","WebChannel sending:",ye),A.send(ye))},Wr:()=>A.close()}),oe=(ye,$e,ot)=>{ye.listen($e,Xt=>{try{ot(Xt)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return oe(A,Sh.EventType.OPEN,()=>{F||Ne("Connection","WebChannel transport opened.")}),oe(A,Sh.EventType.CLOSE,()=>{F||(F=!0,Ne("Connection","WebChannel transport closed"),z.eo())}),oe(A,Sh.EventType.ERROR,ye=>{F||(F=!0,vu("Connection","WebChannel transport errored:",ye),z.eo(new Ae(ie.UNAVAILABLE,"The operation could not be completed")))}),oe(A,Sh.EventType.MESSAGE,ye=>{var $e;if(!F){const ot=ye.data[0];wt(!!ot);const Xt=ot,Dt=Xt.error||(null===($e=Xt[0])||void 0===$e?void 0:$e.error);if(Dt){Ne("Connection","WebChannel received error:",Dt);const Mn=Dt.status;let bt=function(Ut){const qu=Bn[Ut];if(void 0!==qu)return zm(qu)}(Mn),Bt=Dt.message;void 0===bt&&(bt=ie.INTERNAL,Bt="Unknown error status: "+Mn+" with message "+Dt.message),F=!0,z.eo(new Ae(bt,Bt)),A.close()}else Ne("Connection","WebChannel received:",ot),z.no(ot)}}),oe(p,av.STAT_EVENT,ye=>{ye.stat===_u.PROXY?Ne("Connection","Detected buffering proxy"):ye.stat===_u.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.Zr()},0),z}}function My(){return"undefined"!=typeof window?window:null}function Xc(){return"undefined"!=typeof document?document:null}function pf(n){return new BI(n,!0)}class rg{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=s,this.fo=a,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),a=Math.max(0,t-s);a>0&&Ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,a,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Ny{constructor(e,t,s,a,l,p,_,D){this.Jn=e,this.Ao=s,this.Ro=a,this.bo=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=D,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new rg(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,he.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,he.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var s=this;return(0,he.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===ie.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Po===t&&this.Uo(s,a)},s=>{e(()=>{const a=new Ae(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(a)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(a=>{s(()=>this.qo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}xo(){var e=this;this.state=5,this.So.Io((0,he.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ry extends Ny{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Zv(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:et(),a=e.targetChange.targetIds||[],l=function(D,A){return D.N?(wt(void 0===A||"string"==typeof A),cn.fromBase64String(A||"")):(wt(void 0===A||A instanceof Uint8Array),cn.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&function(D){const A=void 0===D.code?ie.UNKNOWN:zm(D.code);return new Ae(A,D.message||"")}(p);t=new Hv(s,a,l,_||null)}else if("documentChange"in e){const s=e.documentChange,a=co(n,s.document.name),l=fn(s.document.updateTime),p=new Ei({mapValue:{fields:s.document.fields}}),_=xn.newFoundDocument(a,l,p);t=new Ed(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const s=e.documentDelete,a=co(n,s.document),l=s.readTime?fn(s.readTime):_t.min(),p=xn.newNoDocument(a,l);t=new Ed([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=co(n,s.document);t=new Ed([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return et();{const s=e.filter,l=new kI(s.count||0);t=new $v(s.targetId,l)}}var D;return t}(this.M,e),s=function(a){if(!("targetChange"in a))return _t.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?_t.min():l.readTime?fn(l.readTime):_t.min()}(e);return this.listener.Ko(t,s)}Qo(e){const t={};t.database=Kh(this.M),t.addTarget=function(a,l){let p;const _=l.target;return p=hd(_)?{documents:jI(a,_)}:{query:Rp(a,_)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=qv(a,l.resumeToken):l.snapshotVersion.compareTo(_t.min())>0&&(p.readTime=Wh(a,l.snapshotVersion.toTimestamp())),p}(this.M,e);const s=function Qv(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Oo(t)}jo(e){const t={};t.database=Kh(this.M),t.removeTarget=e,this.Oo(t)}}class ig extends Ny{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function GD(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(s,a){let l=fn(s.updateTime?s.updateTime:a);return l.isEqual(_t.min())&&(l=fn(a)),new PI(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=fn(e.commitTime);return this.listener.Jo(s,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Kh(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Zh(this.M,s))};this.Oo(t)}}class x0 extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.M=a,this.Zo=!1}tu(){if(this.Zo)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ro(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ie.UNKNOWN,a.toString())})}co(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.co(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ie.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class M0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(kn(t),this.su=!1):Ne("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class N0{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(_=>{s.enqueueAndForget((0,he.Z)(function*(){var D;Ou(p)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,he.Z)(function*(A){const N=Ue(A);N.lu.add(4),yield el(N),N._u.set("Unknown"),N.lu.delete(4),yield Rd(N)}),function(A){return D.apply(this,arguments)})(p))}))}),this._u=new M0(s,a)}}function Rd(n){return sg.apply(this,arguments)}function sg(){return sg=(0,he.Z)(function*(n){if(Ou(n))for(const e of n.fu)yield e(!0)}),sg.apply(this,arguments)}function el(n){return og.apply(this,arguments)}function og(){return og=(0,he.Z)(function*(n){for(const e of n.fu)yield e(!1)}),og.apply(this,arguments)}function gf(n,e){const t=Ue(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),ky(t)?Oy(t):Fu(t).Co()&&Py(t,e))}function mf(n,e){const t=Ue(n),s=Fu(t);t.hu.delete(e),s.Co()&&R0(t,e),0===t.hu.size&&(s.Co()?s.ko():Ou(t)&&t._u.set("Unknown"))}function Py(n,e){n.wu.Z(e.targetId),Fu(n).Qo(e)}function R0(n,e){n.wu.Z(e),Fu(n).jo(e)}function Oy(n){n.wu=new Id({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Fu(n).start(),n._u.iu()}function ky(n){return Ou(n)&&!Fu(n).Do()&&n.hu.size>0}function Ou(n){return 0===Ue(n).lu.size}function P0(n){n.wu=void 0}function lw(n){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,he.Z)(function*(n){n.hu.forEach((e,t)=>{Py(n,e)})}),Fy.apply(this,arguments)}function dw(n,e){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,he.Z)(function*(n,e){P0(n),ky(n)?(n._u.uu(e),Oy(n)):n._u.set("Unknown")}),Ly.apply(this,arguments)}function hw(n,e,t){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,he.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Hv&&2===e.state&&e.cause)try{yield(s=(0,he.Z)(function*(a,l){const p=l.cause;for(const _ of l.targetIds)a.hu.has(_)&&(yield a.remoteSyncer.rejectListen(_,p),a.hu.delete(_),a.wu.removeTarget(_))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield ag(n,s)}else if(e instanceof Ed?n.wu.ut(e):e instanceof $v?n.wu._t(e):n.wu.ht(e),!t.isEqual(_t.min()))try{const s=yield by(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.wu.yt(l);return p.targetChanges.forEach((_,D)=>{if(_.resumeToken.approximateByteSize()>0){const A=a.hu.get(D);A&&a.hu.set(D,A.withResumeToken(_.resumeToken,l))}}),p.targetMismatches.forEach(_=>{const D=a.hu.get(_);if(!D)return;a.hu.set(_,D.withResumeToken(cn.EMPTY_BYTE_STRING,D.snapshotVersion)),R0(a,_);const A=new Au(D.target,_,1,D.sequenceNumber);Py(a,A)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Ne("RemoteStore","Failed to raise snapshot:",s),yield ag(n,s)}var s}),Vy.apply(this,arguments)}function ag(n,e,t){return By.apply(this,arguments)}function By(){return By=(0,he.Z)(function*(n,e,t){if(!Rs(e))throw e;n.lu.add(1),yield el(n),n._u.set("Offline"),t||(t=()=>by(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Rd(n)}))}),By.apply(this,arguments)}function O0(n,e){return e().catch(t=>ag(n,t,e))}function Pd(n){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,he.Z)(function*(n){const e=Ue(n),t=tl(e);let s=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;k0(e);)try{const a=yield iw(e.localStore,s);if(null===a){0===e.cu.length&&t.ko();break}s=a.batchId,F0(e,a)}catch(a){yield ag(e,a)}jy(e)&&$y(e)}),Uy.apply(this,arguments)}function k0(n){return Ou(n)&&n.cu.length<10}function F0(n,e){n.cu.push(e);const t=tl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function jy(n){return Ou(n)&&!tl(n).Do()&&n.cu.length>0}function $y(n){tl(n).start()}function L0(n){return ug.apply(this,arguments)}function ug(){return ug=(0,he.Z)(function*(n){tl(n).Xo()}),ug.apply(this,arguments)}function V0(n){return cg.apply(this,arguments)}function cg(){return cg=(0,he.Z)(function*(n){const e=tl(n);for(const t of n.cu)e.Ho(t.mutations)}),cg.apply(this,arguments)}function B0(n,e,t){return lg.apply(this,arguments)}function lg(){return lg=(0,he.Z)(function*(n,e,t){const s=n.cu.shift(),a=Vp.from(s,e,t);yield O0(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Pd(n)}),lg.apply(this,arguments)}function U0(n,e){return Da.apply(this,arguments)}function Da(){return Da=(0,he.Z)(function*(n,e){var t;e&&tl(n).zo&&(yield(t=(0,he.Z)(function*(s,a){if(Uv(l=a.code)&&l!==ie.ABORTED){const p=s.cu.shift();tl(s).No(),yield O0(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Pd(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),jy(n)&&$y(n)}),Da.apply(this,arguments)}function j0(n,e){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,he.Z)(function*(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const s=Ou(t);t.lu.add(3),yield el(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Rd(t)}),Hy.apply(this,arguments)}function ku(n,e){return $0.apply(this,arguments)}function $0(){return $0=(0,he.Z)(function*(n,e){const t=Ue(n);e?(t.lu.delete(2),yield Rd(t)):e||(t.lu.add(2),yield el(t),t._u.set("Unknown"))}),$0.apply(this,arguments)}function Fu(n){return n.mu||(n.mu=function(e,t,s){const a=Ue(e);return a.tu(),new Ry(t,a.bo,a.authCredentials,a.appCheckCredentials,a.M,s)}(n.datastore,n.asyncQueue,{zr:lw.bind(null,n),Jr:dw.bind(null,n),Ko:hw.bind(null,n)}),n.fu.push(function(){var e=(0,he.Z)(function*(t){t?(n.mu.No(),ky(n)?Oy(n):n._u.set("Unknown")):(yield n.mu.stop(),P0(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function tl(n){return n.gu||(n.gu=function(e,t,s){const a=Ue(e);return a.tu(),new ig(t,a.bo,a.authCredentials,a.appCheckCredentials,a.M,s)}(n.datastore,n.asyncQueue,{zr:L0.bind(null,n),Jr:U0.bind(null,n),Yo:V0.bind(null,n),Jo:B0.bind(null,n)}),n.fu.push(function(){var e=(0,he.Z)(function*(t){t?(n.gu.No(),yield Pd(n)):(yield n.gu.stop(),n.cu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class dg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,_=new dg(e,t,p,a,l);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nl(n,e){if(kn("AsyncQueue",`${e}: ${n}`),Rs(n))return new Ae(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class yf{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Fe.comparator(t.key,s.key):(t,s)=>Fe.comparator(t.key,s.key),this.keyedMap=Mp(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new yf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new yf;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class mt{constructor(){this.yu=new Un(Fe.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):et():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Od{constructor(e,t,s,a,l,p,_,D){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=D}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new Od(e,t,yf.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class fw{constructor(){this.Iu=void 0,this.listeners=[]}}class pw{constructor(){this.queries=new Ea(e=>Rv(e),jr),this.onlineState="Unknown",this.Tu=new Set}}function kd(n,e){return Gy.apply(this,arguments)}function Gy(){return Gy=(0,he.Z)(function*(n,e){const t=Ue(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new fw),a)try{l.Iu=yield t.onListen(s)}catch(p){const _=nl(p,`Initialization of query '${Bm(e.query)}' failed`);return void e.onError(_)}t.queries.set(s,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&hg(t)}),Gy.apply(this,arguments)}function Fd(n,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,he.Z)(function*(n,e){const t=Ue(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Ld.apply(this,arguments)}function jn(n,e){const t=Ue(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const _ of p.listeners)_.Au(a)&&(s=!0);p.Iu=a}}s&&hg(t)}function QD(n,e,t){const s=Ue(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function hg(n){n.Tu.forEach(e=>{e.next()})}class qy{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Od(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class gw{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Wy{constructor(e){this.M=e}li(e){return co(this.M,e)}fi(e){return e.metadata.exists?Jm(this.M,e.document,!1):xn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return fn(e)}}class H0{constructor(e,t,s){this.xu=e,this.localStore=t,this.M=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zy(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=je.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new Wy(this.M);for(const a of e)if(a.metadata.queries){const l=s.li(a.metadata.name);for(const p of a.metadata.queries){const _=(t.get(p)||Jt()).add(l);t.set(p,_)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function sw(n,e,t,s){return Xp.apply(this,arguments)}(e.localStore,new Wy(e.M),e.documents,e.xu.id),s=e.ku(e.documents);for(const a of e.queries)yield w0(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function zy(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ky{constructor(e){this.key=e}}class G0{constructor(e){this.key=e}}class q0{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Jt(),this.mutatedKeys=Jt(),this.Lu=Um(e),this.Uu=new yf(this.Lu)}get qu(){return this.Fu}Gu(e,t){const s=t?t.Ku:new mt,a=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,_=!1;const D=Bh(this.query)&&a.size===this.query.limit?a.last():null,A=Lm(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((N,F)=>{const z=a.get(N),oe=Pv(this.query,F)?F:null,ye=!!z&&this.mutatedKeys.has(z.key),$e=!!oe&&(oe.hasLocalMutations||this.mutatedKeys.has(oe.key)&&oe.hasCommittedMutations);let ot=!1;z&&oe?z.data.isEqual(oe.data)?ye!==$e&&(s.track({type:3,doc:oe}),ot=!0):this.Qu(z,oe)||(s.track({type:2,doc:oe}),ot=!0,(D&&this.Lu(oe,D)>0||A&&this.Lu(oe,A)<0)&&(_=!0)):!z&&oe?(s.track({type:0,doc:oe}),ot=!0):z&&!oe&&(s.track({type:1,doc:z}),ot=!0,(D||A)&&(_=!0)),ot&&(oe?(p=p.add(oe),l=$e?l.add(N):l.delete(N)):(p=p.delete(N),l=l.delete(N)))}),Bh(this.query)||Lm(this.query))for(;p.size>this.query.limit;){const N=Bh(this.query)?p.last():p.first();p=p.delete(N.key),l=l.delete(N.key),s.track({type:1,doc:N})}return{Uu:p,Ku:s,ei:_,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((A,N)=>function(F,z){const oe=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return oe(F)-oe(z)}(A.type,N.type)||this.Lu(A.doc,N.doc)),this.ju(s);const p=t?this.Wu():[],_=0===this.Bu.size&&this.current?1:0,D=_!==this.$u;return this.$u=_,0!==l.length||D?{snapshot:new Od(this.query,e.Uu,a,l,e.mutatedKeys,0===_,D,!1),zu:p}:{zu:p}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new mt,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Jt(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new G0(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new Ky(s))}),t}Ju(e){this.Fu=e.hi,this.Bu=Jt();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Od.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class mw{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class _f{constructor(e){this.key=e,this.Xu=!1}}class yw{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Zu={},this.ta=new Ea(_=>Rv(_),jr),this.ea=new Map,this.na=new Set,this.sa=new Un(Fe.comparator),this.ia=new Map,this.ra=new eg,this.oa={},this.ua=new Map,this.aa=fo.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function _w(n,e){return Zy.apply(this,arguments)}function Zy(){return Zy=(0,he.Z)(function*(n,e){const t=wg(n);let s,a;const l=t.ta.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.Yu();else{const p=yield Jc(t.localStore,Ms(e));t.isPrimaryClient&&gf(t.remoteStore,p);const _=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Vd(t,e,s,"current"===_)}return a}),Zy.apply(this,arguments)}function Vd(n,e,t,s){return fg.apply(this,arguments)}function fg(){return fg=(0,he.Z)(function*(n,e,t,s){n.ha=(N,F,z)=>{return(oe=(0,he.Z)(function*(ye,$e,ot,Xt){let Dt=$e.view.Gu(ot);Dt.ei&&(Dt=yield df(ye.localStore,$e.query,!1).then(({documents:Bt})=>$e.view.Gu(Bt,Dt)));const Mn=Xt&&Xt.targetChanges.get($e.targetId),bt=$e.view.applyChanges(Dt,ye.isPrimaryClient,Mn);return _g(ye,$e.targetId,bt.zu),bt.snapshot}),function(ye,$e,ot,Xt){return oe.apply(this,arguments)})(n,N,F,z);var oe};const a=yield df(n.localStore,e,!0),l=new q0(e,a.hi),p=l.Gu(a.documents),_=qh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),D=l.applyChanges(p,n.isPrimaryClient,_);_g(n,t,D.zu);const A=new mw(e,t,l);return n.ta.set(e,A),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),D.snapshot}),fg.apply(this,arguments)}function W0(n,e){return pg.apply(this,arguments)}function pg(){return pg=(0,he.Z)(function*(n,e){const t=Ue(n),s=t.ta.get(e),a=t.ea.get(s.targetId);if(a.length>1)return t.ea.set(s.targetId,a.filter(l=>!jr(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Md(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),mf(t.remoteStore,s.targetId),vf(t,s.targetId)}).catch(Wo))):(vf(t,s.targetId),yield Md(t.localStore,s.targetId,!0))}),pg.apply(this,arguments)}function rl(){return rl=(0,he.Z)(function*(n,e,t){const s=Dg(n);try{const a=yield function(l,p){const _=Ue(l),D=zn.now(),A=p.reduce((F,z)=>F.add(z.key),Jt());let N;return _.persistence.runTransaction("Locally write mutations","readwrite",F=>_.ai.qs(F,A).next(z=>{N=z;const oe=[];for(const ye of p){const $e=qm(ye,N.get(ye.key));null!=$e&&oe.push(new va(ye.key,$e,CI($e.value.mapValue),gr.exists(!0)))}return _.$s.addMutationBatch(F,D,oe,p)})).then(F=>(F.applyToLocalDocumentSet(N),{batchId:F.batchId,changes:N}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,_){let D=l.oa[l.currentUser.toKey()];D||(D=new Un(Ot)),D=D.insert(p,_),l.oa[l.currentUser.toKey()]=D}(s,a.batchId,t),yield ba(s,a.changes),yield Pd(s.remoteStore)}catch(a){const l=nl(a,"Failed to persist write");t.reject(l)}}),rl.apply(this,arguments)}function Bd(n,e){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,he.Z)(function*(n,e){const t=Ue(n);try{const s=yield ZD(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.ia.get(l);p&&(wt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Xu=!0:a.modifiedDocuments.size>0?wt(p.Xu):a.removedDocuments.size>0&&(wt(p.Xu),p.Xu=!1))}),yield ba(t,s,e)}catch(s){yield Wo(s)}}),Yy.apply(this,arguments)}function z0(n,e,t){const s=Ue(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.ta.forEach((l,p)=>{const _=p.view.Eu(e);_.snapshot&&a.push(_.snapshot)}),function(l,p){const _=Ue(l);_.onlineState=p;let D=!1;_.queries.forEach((A,N)=>{for(const F of N.listeners)F.Eu(p)&&(D=!0)}),D&&hg(_)}(s.eventManager,e),a.length&&s.Zu.Ko(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Ew(n,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,he.Z)(function*(n,e,t){const s=Ue(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.ia.get(e),l=a&&a.key;if(l){let p=new Un(Fe.comparator);p=p.insert(l,xn.newNoDocument(l,_t.min()));const _=Jt().add(l),D=new vd(_t.min(),new Map,new zt(Ot),p,_);yield Bd(s,D),s.sa=s.sa.remove(l),s.ia.delete(e),Jy(s)}else yield Md(s.localStore,e,!1).then(()=>vf(s,e,t)).catch(Wo)}),gg.apply(this,arguments)}function K0(n,e){return mg.apply(this,arguments)}function mg(){return mg=(0,he.Z)(function*(n,e){const t=Ue(n),s=e.batch.batchId;try{const a=yield _0(t.localStore,e);Y0(t,s,null),Z0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ba(t,a)}catch(a){yield Wo(a)}}),mg.apply(this,arguments)}function Iw(n,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,he.Z)(function*(n,e,t){const s=Ue(n);try{const a=yield function(l,p){const _=Ue(l);return _.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let A;return _.$s.lookupMutationBatch(D,p).next(N=>(wt(null!==N),A=N.keys(),_.$s.removeMutationBatch(D,N))).next(()=>_.$s.performConsistencyCheck(D)).next(()=>_.ai.qs(D,A))})}(s.localStore,e);Y0(s,e,t),Z0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ba(s,a)}catch(a){yield Wo(a)}}),yg.apply(this,arguments)}function Qy(){return Qy=(0,he.Z)(function*(n,e){const t=Ue(n);Ou(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Ue(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>p.$s.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===s)return void e.resolve();const a=t.ua.get(s)||[];a.push(e),t.ua.set(s,a)}catch(s){const a=nl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Qy.apply(this,arguments)}function Z0(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function Y0(n,e,t){const s=Ue(n);let a=s.oa[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.oa[s.currentUser.toKey()]=a}}function vf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.ea.get(e))n.ta.delete(s),t&&n.Zu.la(s,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(s=>{n.ra.containsKey(s)||Dw(n,s)})}function Dw(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(mf(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),Jy(n))}function _g(n,e,t){for(const s of t)s instanceof Ky?(n.ra.addReference(s.key,e),vg(n,s)):s instanceof G0?(Ne("SyncEngine","Document no longer in limbo: "+s.key),n.ra.removeReference(s.key,e),n.ra.containsKey(s.key)||Dw(n,s.key)):et()}function vg(n,e){const t=e.key,s=t.path.canonicalString();n.sa.get(t)||n.na.has(s)||(Ne("SyncEngine","New document in limbo: "+t),n.na.add(s),Jy(n))}function Jy(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Fe(je.fromString(e)),s=n.aa.next();n.ia.set(s,new _f(t)),n.sa=n.sa.insert(t,s),gf(n.remoteStore,new Au(Ms(gd(t.path)),s,2,Qi.A))}}function ba(n,e,t){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,he.Z)(function*(n,e,t){const s=Ue(n),a=[],l=[],p=[];var _;s.ta.isEmpty()||(s.ta.forEach((_,D)=>{p.push(s.ha(D,e,t).then(A=>{if(A){s.isPrimaryClient&&s.sharedClientState.updateQueryState(D.targetId,A.fromCache?"not-current":"current"),a.push(A);const N=Qp.Js(D.targetId,A);l.push(N)}}))}),yield Promise.all(p),s.Zu.Ko(a),yield(_=(0,he.Z)(function*(D,A){const N=Ue(D);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",F=>se.forEach(A,z=>se.forEach(z.zs,oe=>N.persistence.referenceDelegate.addReference(F,z.targetId,oe)).next(()=>se.forEach(z.Hs,oe=>N.persistence.referenceDelegate.removeReference(F,z.targetId,oe)))))}catch(F){if(!Rs(F))throw F;Ne("LocalStore","Failed to update sequence numbers: "+F)}for(const F of A){const z=F.targetId;if(!F.fromCache){const oe=N.si.get(z),$e=oe.withLastLimboFreeSnapshotVersion(oe.snapshotVersion);N.si=N.si.insert(z,$e)}}}),function(D,A){return _.apply(this,arguments)})(s.localStore,l))}),Eg.apply(this,arguments)}function Ef(n,e){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,he.Z)(function*(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const s=yield Dy(t.localStore,e);t.currentUser=e,(a=t).ua.forEach(p=>{p.forEach(_=>{_.reject(new Ae(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.ua.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ba(t,s.ci)}var a}),Xy.apply(this,arguments)}function bw(n,e){const t=Ue(n),s=t.ia.get(e);if(s&&s.Xu)return Jt().add(s.key);{let a=Jt();const l=t.ea.get(e);if(!l)return a;for(const p of l){const _=t.ta.get(p);a=a.unionWith(_.view.qu)}return a}}function Tw(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,he.Z)(function*(n,e){const t=Ue(n),s=yield df(t.localStore,e.query,!0),a=e.view.Ju(s);return t.isPrimaryClient&&_g(t,e.targetId,a.zu),a}),e_.apply(this,arguments)}function Cw(n,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,he.Z)(function*(n,e){const t=Ue(n);return I0(t.localStore,e).then(s=>ba(t,s))}),Ig.apply(this,arguments)}function Aw(n,e,t,s){return t_.apply(this,arguments)}function t_(){return t_=(0,he.Z)(function*(n,e,t,s){const a=Ue(n),l=yield function(p,_){const D=Ue(p),A=Ue(D.$s);return D.persistence.runTransaction("Lookup mutation documents","readonly",N=>A.ln(N,_).next(F=>F?D.ai.qs(N,F):se.resolve(null)))}(a.localStore,e);var _;null!==l?("pending"===t?yield Pd(a.remoteStore):"acknowledged"===t||"rejected"===t?(Y0(a,e,s||null),Z0(a,e),_=e,Ue(Ue(a.localStore).$s).dn(_)):et(),yield ba(a,l)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),t_.apply(this,arguments)}function n_(){return n_=(0,he.Z)(function*(n,e){const t=Ue(n);if(wg(t),Dg(t),!0===e&&!0!==t.ca){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield r_(t,s.toArray());t.ca=!0,yield ku(t.remoteStore,!0);for(const l of a)gf(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const s=[];let a=Promise.resolve();t.ea.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(vf(t,p),Md(t.localStore,p,!0))),mf(t.remoteStore,p)}),yield a,yield r_(t,s),function(l){const p=Ue(l);p.ia.forEach((_,D)=>{mf(p.remoteStore,D)}),p.ra.bi(),p.ia=new Map,p.sa=new Un(Fe.comparator)}(t),t.ca=!1,yield ku(t.remoteStore,!1)}}),n_.apply(this,arguments)}function r_(n,e,t){return i_.apply(this,arguments)}function i_(){return i_=(0,he.Z)(function*(n,e,t){const s=Ue(n),a=[],l=[];for(const p of e){let _;const D=s.ea.get(p);if(D&&0!==D.length){_=yield Jc(s.localStore,Ms(D[0]));for(const A of D){const N=s.ta.get(A),F=yield Tw(s,N);F.snapshot&&l.push(F.snapshot)}}else{const A=yield E0(s.localStore,p);_=yield Jc(s.localStore,A),yield Vd(s,s_(A),p,!1)}a.push(_)}return s.Zu.Ko(l),a}),i_.apply(this,arguments)}function s_(n){return Vh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Sw(n){const e=Ue(n);return Ue(Ue(e.localStore).persistence).Os()}function Q0(n,e,t,s){return o_.apply(this,arguments)}function o_(){return o_=(0,he.Z)(function*(n,e,t,s){const a=Ue(n);if(a.ca)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const l=a.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield I0(a.localStore,xI(l[0])),_=vd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ba(a,p,_);break}case"rejected":yield Md(a.localStore,e,!0),vf(a,e,s);break;default:et()}}),o_.apply(this,arguments)}function a_(n,e,t){return u_.apply(this,arguments)}function u_(){return u_=(0,he.Z)(function*(n,e,t){const s=wg(n);if(s.ca){for(const a of e){if(s.ea.has(a)){Ne("SyncEngine","Adding an already active target "+a);continue}const l=yield E0(s.localStore,a),p=yield Jc(s.localStore,l);yield Vd(s,s_(l),p.targetId,!1),gf(s.remoteStore,p)}for(const a of t)s.ea.has(a)&&(yield Md(s.localStore,a,!1).then(()=>{mf(s.remoteStore,a),vf(s,a)}).catch(Wo))}}),u_.apply(this,arguments)}function wg(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ew.bind(null,e),e.Zu.Ko=jn.bind(null,e.eventManager),e.Zu.la=QD.bind(null,e.eventManager),e}function Dg(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iw.bind(null,e),e}class J0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.M=pf(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return wy(this.persistence,new Iy,e.initialUser,this.M)}_a(e){return new zo(Cy.Wi,this.M)}da(e){return new ng}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class X0 extends J0{constructor(e,t,s){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,he.Z)(function*(){yield t().call(s,e),yield s.ga.initialize(s,e),yield Dg(s.ga.syncEngine),yield Pd(s.ga.remoteStore),yield s.persistence.Is(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}ma(e){return wy(this.persistence,new Iy,e.initialUser,this.M)}wa(e){return new rw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new vy(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,My(),Xc(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new ng}}class c_ extends X0{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,he.Z)(function*(){yield t().call(s,e);const a=s.ga.syncEngine;s.sharedClientState instanceof xy&&(s.sharedClientState.syncEngine={kr:Aw.bind(null,a),Mr:Q0.bind(null,a),Or:a_.bind(null,a),Os:Sw.bind(null,a),Nr:Cw.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Is(function(){var l=(0,he.Z)(function*(p){yield function Ud(n,e){return n_.apply(this,arguments)}(s.ga.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):p||s.gcScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}da(e){const t=My();if(!xy.vt(t))throw new Ae(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xy(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class l_{initialize(e,t){var s=this;return(0,he.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>z0(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ef.bind(null,s.syncEngine),yield ku(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pw}createDatastore(e){const t=pf(e.databaseInfo.databaseId),s=new S0(e.databaseInfo);return new x0(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=_=>z0(this.syncEngine,_,0),p=C0.vt()?new C0:new ff,new N0(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,_,D,A){const N=new yw(s,a,l,p,_,D);return A&&(N.ca=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const s=Ue(t);Ne("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield el(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function d_(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mw{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Cr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,he.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const s=e.Ta.decode(t),a=Number(s);isNaN(a)&&e.Ra(`length string (${s}) is not valid number`);const l=yield e.ba(a);return new gw(JSON.parse(l),t.length+a)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,he.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ba(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const s=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Nw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,he.Z)(function*(l,p){const _=Ue(l),D=Kh(_.M)+"/documents",A={documents:p.map(oe=>Dd(_.M,oe))},N=yield _.co("BatchGetDocuments",D,A),F=new Map;N.forEach(oe=>{const ye=function HD(n,e){return"found"in e?function(t,s){wt(!!s.found);const a=co(t,s.found.name),l=fn(s.found.updateTime),p=new Ei({mapValue:{fields:s.found.fields}});return xn.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){wt(!!s.missing),wt(!!s.readTime);const a=co(t,s.missing),l=fn(s.readTime);return xn.newNoDocument(a,l)}(n,e):et()}(_.M,oe);F.set(ye.key.toString(),ye)});const z=[];return p.forEach(oe=>{const ye=F.get(oe.toString());wt(!!ye),z.push(ye)}),z}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Fe.fromPath(a);e.mutations.push(new Wm(l,e.precondition(l)))}),yield(s=(0,he.Z)(function*(a,l){const p=Ue(a),_=Kh(p.M)+"/documents",D={writes:l.map(A=>Zh(p.M,A))};yield p.ro("Commit",_,D)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=_t.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Ae(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Ae(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rw{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.va=5,this.So=new rg(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,he.Z)(function*(){const t=new Nw(e.datastore),s=e.Da(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Ca(l)}))}).catch(a=>{e.Ca(a)})}))}Da(e){try{const t=this.updateFunction(e);return!ad(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Uv(t)}return!1}}class Pw{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Ur.UNAUTHENTICATED,this.clientId=gv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,he.Z)(function*(_){Ne("FirestoreClient","Received user=",_.uid),yield l.authCredentialListener(_),l.user=_});return function(_){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Ne("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=nl(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function eE(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,he.Z)(function*(l){s.isEqual(l)||(yield Dy(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),h_.apply(this,arguments)}function tE(n,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Cg(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>j0(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>j0(e.remoteStore,l)),n.onlineComponents=e}),Tg.apply(this,arguments)}function Cg(n){return f_.apply(this,arguments)}function f_(){return f_=(0,he.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield eE(n,new J0)),n.offlineComponents}),f_.apply(this,arguments)}function Ag(n){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,he.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield tE(n,new l_)),n.onlineComponents}),Sg.apply(this,arguments)}function nE(n){return Cg(n).then(e=>e.persistence)}function p_(n){return Cg(n).then(e=>e.localStore)}function rE(n){return Ag(n).then(e=>e.remoteStore)}function If(n){return Ag(n).then(e=>e.syncEngine)}function Lu(n){return xg.apply(this,arguments)}function xg(){return xg=(0,he.Z)(function*(n){const e=yield Ag(n),t=e.eventManager;return t.onListen=_w.bind(null,e.syncEngine),t.onUnlisten=W0.bind(null,e.syncEngine),t}),xg.apply(this,arguments)}function Mg(n,e,t={}){const s=new Cr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(a,l,p,_,D){const A=new bg({next:F=>{l.enqueueAndForget(()=>Fd(a,N));const z=F.docs.has(p);!z&&F.fromCache?D.reject(new Ae(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&F.fromCache&&_&&"server"===_.source?D.reject(new Ae(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(F)},error:F=>D.reject(F)}),N=new qy(gd(p.path),A,{includeMetadataChanges:!0,Du:!0});return kd(a,N)}(yield Lu(n),n.asyncQueue,e,t,s)})),s.promise}function iE(n,e,t={}){const s=new Cr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(a,l,p,_,D){const A=new bg({next:F=>{l.enqueueAndForget(()=>Fd(a,N)),F.fromCache&&"server"===_.source?D.reject(new Ae(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(F)},error:F=>D.reject(F)}),N=new qy(p,A,{includeMetadataChanges:!0,Du:!0});return kd(a,N)}(yield Lu(n),n.asyncQueue,e,t,s)})),s.promise}const Bw=new Map;function m_(n,e,t){if(!t)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wf(n,e,t,s){if(!0===e&&!0===s)throw new Ae(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aE(n){if(!Fe.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function il(n){if(Fe.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vu(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vu(n);throw new Ae(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Uw(n,e){if(e<=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class y_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y_({}),this._settingsFrozen=!1,e instanceof Uo?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ae(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(a.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new lv;switch(t.type){case"gapi":const s=t.client;return wt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new hv(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bw.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),Bw.delete(e),t.terminate())}(this),Promise.resolve()}}class Dn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class ii{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class go extends ii{constructor(e,t,s){super(e,t,gd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Fe(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function __(n,e,...t){if(n=(0,It.m9)(n),m_("collection","path",e),n instanceof Df){const s=je.fromString(e,...t);return il(s),new go(n,null,s)}{if(!(n instanceof Dn||n instanceof go))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(je.fromString(e,...t));return il(s),new go(n.firestore,null,s)}}function sl(n,e,...t){if(n=(0,It.m9)(n),1===arguments.length&&(e=gv.R()),m_("doc","path",e),n instanceof Df){const s=je.fromString(e,...t);return aE(s),new Dn(n,null,new Fe(s))}{if(!(n instanceof Dn||n instanceof go))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(je.fromString(e,...t));return aE(s),new Dn(n.firestore,n instanceof go?n.converter:null,new Fe(s))}}function jd(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),(n instanceof Dn||n instanceof go)&&(e instanceof Dn||e instanceof go)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uE(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),n instanceof ii&&e instanceof ii&&n.firestore===e.firestore&&jr(n._query,e._query)&&n.converter===e.converter}class cE{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new rg(this,"async_queue_retry"),this.Ua=()=>{const t=Xc();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Xc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Xc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Cr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,he.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Rs(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(s=>{throw this.Fa=s,this.$a=!1,kn("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.$a=!1,s))));return this.Na=t,t}enqueueAfterDelay(e,t,s){this.qa(),this.La.indexOf(e)>-1&&(t=0);const a=dg.createAndSchedule(this,e,t,s,l=>this.Qa(l));return this.Oa.push(a),a}qa(){this.Fa&&et()}verifyOperationInProgress(){}ja(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Ng(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class $w{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yn extends Df{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new cE,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lE(this),this._firestoreClient.terminate()}}function or(n){return n._firestoreClient||lE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function lE(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new jD(n._databaseId,l,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var l,_;n._firestoreClient=new Pw(n._authCredentials,n._appCheckCredentials,n._queue,s)}function ol(n,e,t){const s=new Cr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield eE(n,t),yield tE(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function Rg(n){if(n._initialized||n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ta{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(cn.fromBase64String(e))}catch(t){throw new Ae(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ko(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class al{constructor(e){this._methodName=e}}class Pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const zw=/^__.*__$/;class Kw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class fE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class Og{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.M=s,this.ignoreUndefinedProperties=a,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Xa({path:s,tc:!1});return a.ec(e),a}nc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Xa({path:s,tc:!1});return a.Ja(),a}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Uu(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(pE(this.Ya)&&zw.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class bf{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=s||pf(e)}uc(e,t,s,a=!1){return new Og({Ya:e,methodName:t,oc:s,path:pr.emptyPath(),tc:!1,rc:a},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Bu(n){const e=n._freezeSettings(),t=pf(n._databaseId);return new bf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tf(n,e,t,s,a,l={}){const p=n.uc(l.merge||l.mergeFields?2:0,e,t,a);Cf("Data must be an object, but it was:",p,s);const _=Gd(s,p);let D,A;if(l.merge)D=new kc(p.fieldMask),A=p.fieldTransforms;else if(l.mergeFields){const N=[];for(const F of l.mergeFields){const z=mo(e,F,t);if(!p.contains(z))throw new Ae(ie.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);vE(N,z)||N.push(z)}D=new kc(N),A=p.fieldTransforms.filter(F=>D.covers(F.field))}else D=null,A=p.fieldTransforms;return new Kw(new Ei(_),D,A)}class Hd extends al{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function E_(n,e,t){return new Og({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class kg extends al{_toFieldTransform(e){return new Gc(e.path,new md)}isEqual(e){return e instanceof kg}}class gE extends al{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=E_(this,e,!0),s=this.ac.map(l=>ul(l,t)),a=new bu(s);return new Gc(e.path,a)}isEqual(e){return this===e}}class Zw extends al{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=E_(this,e,!0),s=this.ac.map(l=>ul(l,t)),a=new $c(s);return new Gc(e.path,a)}isEqual(e){return this===e}}class mE extends al{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Hc(e.M,jm(e.M,this.cc));return new Gc(e.path,t)}isEqual(e){return this===e}}function Fg(n,e,t,s){const a=n.uc(1,e,t);Cf("Data must be an object, but it was:",a,s);const l=[],p=Ei.empty();Oc(s,(D,A)=>{const N=qd(e,D,t);A=(0,It.m9)(A);const F=a.nc(N);if(A instanceof Hd)l.push(N);else{const z=ul(A,F);null!=z&&(l.push(N),p.set(N,z))}});const _=new kc(l);return new fE(p,_,a.fieldTransforms)}function I_(n,e,t,s,a,l){const p=n.uc(1,e,t),_=[mo(e,s,t)],D=[a];if(l.length%2!=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<l.length;z+=2)_.push(mo(e,l[z])),D.push(l[z+1]);const A=[],N=Ei.empty();for(let z=_.length-1;z>=0;--z)if(!vE(A,_[z])){const oe=_[z];let ye=D[z];ye=(0,It.m9)(ye);const $e=p.nc(oe);if(ye instanceof Hd)A.push(oe);else{const ot=ul(ye,$e);null!=ot&&(A.push(oe),N.set(oe,ot))}}const F=new kc(A);return new fE(N,F,p.fieldTransforms)}function yE(n,e,t,s=!1){return ul(t,n.uc(s?4:3,e))}function ul(n,e){if(_E(n=(0,It.m9)(n)))return Cf("Unsupported field value:",e,n),Gd(n,e);if(n instanceof al)return function(t,s){if(!pE(s.Ya))throw s.ic(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ic(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let _=ul(p,s.sc(l));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,It.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jm(s.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=zn.fromDate(t);return{timestampValue:Wh(s.M,a)}}if(t instanceof zn){const a=new zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wh(s.M,a)}}if(t instanceof Pg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ko)return{bytesValue:qv(s.M,t._byteString)};if(t instanceof Dn){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ic(`Unsupported field value: ${Vu(t)}`)}(n,e)}function Gd(n,e){const t={};return yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oc(n,(s,a)=>{const l=ul(a,e.Za(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function _E(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof Pg||n instanceof Ko||n instanceof Dn||n instanceof al)}function Cf(n,e,t){if(!_E(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Vu(t);throw e.ic("an object"===s?n+" a custom object":n+" "+s)}var s}function mo(n,e,t){if((e=(0,It.m9)(e))instanceof Ta)return e._internalPath;if("string"==typeof e)return qd(n,e);throw Uu("Field path arguments must be of type string or ",n,!1,void 0,t)}const Yw=new RegExp("[~\\*/\\[\\]]");function qd(n,e,t){if(e.search(Yw)>=0)throw Uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ta(...e.split("."))._internalPath}catch(s){throw Uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uu(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let D="";return(l||p)&&(D+=" (found",l&&(D+=` in field ${s}`),p&&(D+=` in document ${a}`),D+=")"),new Ae(ie.INVALID_ARGUMENT,_+n+D)}function vE(n,e){return n.some(t=>t.isEqual(e))}class Af{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qw extends Af{data(){return super.data()}}function cl(n,e){return"string"==typeof e?qd(n,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}class Zo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends Af{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(cl("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Sf extends Ca{data(e={}){return super.data(e)}}class Aa{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zo(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Sf(this._firestore,this._userDataWriter,s.key,s,new Zo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new Sf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zo(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const _=new Sf(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zo(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let D=-1,A=-1;return 0!==p.type&&(D=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),A=l.indexOf(p.doc.key)),{type:EE(p.type),doc:_,oldIndex:D,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function Lg(n,e){return n instanceof Ca&&e instanceof Ca?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Aa&&e instanceof Aa&&n._firestore===e._firestore&&uE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function w_(n){if(Lm(n)&&0===n.explicitOrderBy.length)throw new Ae(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xf{}function ju(n,...e){for(const t of e)n=t._apply(n);return n}class rb extends xf{constructor(e,t,s){super(),this.hc=e,this.lc=t,this.fc=s,this.type="where"}_apply(e){const t=Bu(e.firestore),s=function(a,l,p,_,D,A,N){let F;if(D.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if("in"===A||"not-in"===A){TE(N,A);const oe=[];for(const ye of N)oe.push(bE(_,a,ye));F={arrayValue:{values:oe}}}else F=bE(_,a,N)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||TE(N,A),F=yE(p,"where",N,"in"===A||"not-in"===A);const z=Ar.create(D,A,F);return function(oe,ye){if(ye.S()){const ot=bp(oe);if(null!==ot&&!ot.isEqual(ye.field))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ot.toString()}' and '${ye.field.toString()}'`);const Xt=Dp(oe);null!==Xt&&CE(0,ye.field,Xt)}const $e=function(ot,Xt){for(const Dt of ot.filters)if(Xt.indexOf(Dt.op)>=0)return Dt.op;return null}(oe,function(ot){switch(ot){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==$e)throw new Ae(ie.INVALID_ARGUMENT,$e===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${$e.toString()}' filters.`)}(a,z),z}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ii(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new $o(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class b_ extends xf{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Uc(a,l);return function(_,D){if(null===Dp(_)){const A=bp(_);null!==A&&CE(0,A,D.field)}}(s,p),p}(e._query,this.hc,this.dc);return new ii(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new $o(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Vg extends xf{constructor(e,t,s){super(),this.type=e,this._c=t,this.wc=s}_apply(e){return new ii(e.firestore,e.converter,Nv(e._query,this._c,this.wc))}}class wE extends xf{constructor(e,t,s){super(),this.type=e,this.mc=t,this.gc=s}_apply(e){const t=DE(e,this.type,this.mc,this.gc);return new ii(e.firestore,e.converter,(a=t,new $o((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class C_ extends xf{constructor(e,t,s){super(),this.type=e,this.mc=t,this.gc=s}_apply(e){const t=DE(e,this.type,this.mc,this.gc);return new ii(e.firestore,e.converter,(a=t,new $o((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function DE(n,e,t,s){if(t[0]=(0,It.m9)(t[0]),t[0]instanceof Af)return function(a,l,p,_,D){if(!_)throw new Ae(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const A=[];for(const N of jc(a))if(N.field.isKeyField())A.push(cd(l,_.key));else{const F=_.data.field(N.field);if(Nh(F))throw new Ae(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===F){const z=N.field.canonicalString();throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}A.push(F)}return new Du(A,D)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Bu(n.firestore);return function(l,p,_,D,A,N){const F=l.explicitOrderBy;if(A.length>F.length)throw new Ae(ie.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let oe=0;oe<A.length;oe++){const ye=A[oe];if(F[oe].field.isKeyField()){if("string"!=typeof ye)throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof ye}`);if(!Vm(l)&&-1!==ye.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${ye}' contains a slash.`);const $e=l.path.child(je.fromString(ye));if(!Fe.isDocumentKey($e))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${$e}' is not because it contains an odd number of segments.`);const ot=new Fe($e);z.push(cd(p,ot))}else{const $e=yE(_,D,ye);z.push($e)}}return new Du(z,N)}(n._query,n.firestore._databaseId,a,e,t,s)}}function bE(n,e,t){if("string"==typeof(t=(0,It.m9)(t))){if(""===t)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vm(e)&&-1!==t.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(je.fromString(t));if(!Fe.isDocumentKey(s))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return cd(n,new Fe(s))}if(t instanceof Dn)return cd(n,t._key);throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vu(t)}.`)}function TE(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CE(n,e,t){if(!t.isEqual(e))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Bg{convertValue(e,t="none"){switch(ud(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const s={};return Oc(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new Pg(Sn(e.latitude),Sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rm(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=Eu(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=je.fromString(e);wt(t0(s));const a=new Uo(s.get(1),s.get(3)),l=new Fe(s.popFirst(5));return a.isEqual(t)||kn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Mf(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class nD extends Bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}class S_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,s){this._verifyNotCommitted();const a=$u(e,this._firestore),l=Mf(a.converter,t,s),p=Tf(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,gr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=$u(e,this._firestore);let p;return p="string"==typeof(t=(0,It.m9)(t))||t instanceof Ta?I_(this._dataReader,"WriteBatch.update",l._key,t,s,a):Fg(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$u(e,this._firestore);return this._mutations=this._mutations.concat(new yd(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $u(n,e){if((n=(0,It.m9)(n)).firestore!==e)throw new Ae(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Os extends Bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function Ug(n,e,t){n=Ht(n,Dn);const s=Ht(n.firestore,yn),a=Mf(n.converter,e,t);return ll(s,[Tf(Bu(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,gr.none())])}function AE(n,e,t,...s){n=Ht(n,Dn);const a=Ht(n.firestore,yn),l=Bu(a);let p;return p="string"==typeof(e=(0,It.m9)(e))||e instanceof Ta?I_(l,"updateDoc",n._key,e,t,s):Fg(l,"updateDoc",n._key,e),ll(a,[p.toMutation(n._key,gr.exists(!0))])}function xE(n,...e){var t,s,a;n=(0,It.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Ng(e[p])||(l=e[p],p++);const _={includeMetadataChanges:l.includeMetadataChanges};if(Ng(e[p])){const F=e[p];e[p]=null===(t=F.next)||void 0===t?void 0:t.bind(F),e[p+1]=null===(s=F.error)||void 0===s?void 0:s.bind(F),e[p+2]=null===(a=F.complete)||void 0===a?void 0:a.bind(F)}let D,A,N;if(n instanceof Dn)A=Ht(n.firestore,yn),N=gd(n._key.path),D={next:F=>{e[p]&&e[p](jg(A,n,F))},error:e[p+1],complete:e[p+2]};else{const F=Ht(n,ii);A=Ht(F.firestore,yn),N=F._query;const z=new Os(A);D={next:oe=>{e[p]&&e[p](new Aa(A,z,F,oe))},error:e[p+1],complete:e[p+2]},w_(n._query)}return function(F,z,oe,ye){const $e=new bg(ye),ot=new qy(z,$e,oe);return F.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return kd(yield Lu(F),ot)})),()=>{$e.pa(),F.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Fd(yield Lu(F),ot)}))}}(or(A),N,_,D)}function ll(n,e){return function(t,s){const a=new Cr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function vw(n,e,t){return rl.apply(this,arguments)}(yield If(t),s,a)})),a.promise}(or(n),e)}function jg(n,e,t){const s=t.docs.get(e._key),a=new Os(n);return new Ca(n,a,e._key,s,new Zo(t.hasPendingWrites,t.fromCache),e.converter)}class $g extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bu(e)}get(e){const t=$u(e,this._firestore),s=new nD(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return et();const l=a[0];if(l.isFoundDocument())return new Af(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Af(this._firestore,s,t._key,null,t.converter);throw et()})}set(e,t,s){const a=$u(e,this._firestore),l=Mf(a.converter,t,s),p=Tf(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=$u(e,this._firestore);let p;return p="string"==typeof(t=(0,It.m9)(t))||t instanceof Ta?I_(this._dataReader,"Transaction.update",l._key,t,s,a):Fg(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=$u(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$u(e,this._firestore),s=new Os(this._firestore);return super.get(e).then(a=>new Ca(this._firestore,s,t._key,a._document,new Zo(!1,!1),t.converter))}}function R_(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RE(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function P_(){if(!function mp(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Pc=Fr.SDK_VERSION,(0,Fr._registerComponent)(new No.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new yn(a,new dv(t.getProvider("auth-internal")),new pv(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,Fr.registerVersion)(xh,"3.4.7",n),(0,Fr.registerVersion)(xh,"3.4.7","esm2017")}();class Wd{constructor(e){this._delegate=e}static fromBase64String(e){return P_(),new Wd(Ko.fromBase64String(e))}static fromUint8Array(e){return RE(),new Wd(Ko.fromUint8Array(e))}toBase64(){return P_(),this._delegate.toBase64()}toUint8Array(){return RE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function O_(n){return function PE(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class OE{enableIndexedDbPersistence(e,t){return function $d(n,e){Rg(n=Ht(n,yn));const t=or(n),s=n._freezeSettings(),a=new l_;return ol(t,a,new X0(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Gw(n){Rg(n=Ht(n,yn));const e=or(n),t=n._freezeSettings(),s=new l_;return ol(e,s,new c_(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function XD(n){if(n._initialized&&!n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(s){if(!ri.vt())return Promise.resolve();const a=s+"main";yield ri.delete(a)}),function(s){return t.apply(this,arguments)})(Yp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class kE{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function jw(n,e,t,s={}){var a;const l=(n=Ht(n,Df))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&vu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,_;if("string"==typeof s.mockUserToken)p=s.mockUserToken,_=Ur.MOCK_USER;else{p=(0,It.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new Ae(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ur(D)}n._authCredentials=new Mm(new cv(p,_))}}(this._delegate,e,t,s)}enableNetwork(){return function qw(n){return function g_(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield nE(n),t=yield rE(n);return e.setNetworkEnabled(!0),function(s){const a=Ue(s);return a.lu.delete(0),Rd(a)}(t)}))}(or(n=Ht(n,yn)))}(this._delegate)}disableNetwork(){return function eb(n){return function Ow(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield nE(n),t=yield rE(n);return e.setNetworkEnabled(!1),(s=(0,he.Z)(function*(a){const l=Ue(a);l.lu.add(0),yield el(l),l._u.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(or(n=Ht(n,yn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,wf("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dE(n){return function(e){const t=new Cr;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function ww(n,e){return Qy.apply(this,arguments)}(yield If(e),t)})),t.promise}(or(n=Ht(n,yn)))}(this._delegate)}onSnapshotsInSync(e){return function x_(n,e){return function Lw(n,e){const t=new bg(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return s=yield Lu(n),a=t,Ue(s).Tu.add(a),void a.next();var s,a})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return s=yield Lu(n),a=t,void Ue(s).Tu.delete(a);var s,a}))}}(or(n=Ht(n,yn)),Ng(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rf(this,__(this._delegate,e))}catch(t){throw si(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xi(this,sl(this._delegate,e))}catch(t){throw si(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ni(this,function v_(n,e){if(n=Ht(n,Df),m_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(n,null,(t=e,new $o(je.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw si(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function M_(n,e){return function sE(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const s=yield(a=n,Ag(a).then(l=>l.datastore));var a;new Rw(n.asyncQueue,s,e,t).run()})),t.promise}(or(n=Ht(n,yn)),t=>e(new $g(n,t)))}(this._delegate,t=>e(new LE(this,t)))}batch(){return or(this._delegate),new k_(new S_(this._delegate,e=>ll(this._delegate,e)))}loadBundle(e){return function tb(n,e){const t=or(n=Ht(n,yn)),s=new $w;return function Vw(n,e,t,s){const a=function(l,p){let _;return _="string"==typeof l?(new TextEncoder).encode(l):l,D=function(D,A){if(D instanceof Uint8Array)return d_(D,A);if(D instanceof ArrayBuffer)return d_(new Uint8Array(D),A);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new Mw(D,p);var D}(t,pf(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function xw(n,e,t){const s=Ue(n);var a;(a=(0,he.Z)(function*(l,p,_){try{const D=yield p.getMetadata();if(yield function(z,oe){const ye=Ue(z),$e=fn(oe.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",ot=>ye.ds.getBundleMetadata(ot,oe.id)).then(ot=>!!ot&&ot.createTime.compareTo($e)>=0)}(l.localStore,D))return yield p.close(),_._completeWith({taskState:"Success",documentsLoaded:(z=D).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);_._updateProgress(zy(D));const A=new H0(D,l.localStore,p.M);let N=yield p.fa();for(;N;){const z=yield A.Nu(N);z&&_._updateProgress(z),N=yield p.fa()}const F=yield A.complete();return yield ba(l,F.Ou,void 0),yield function(z,oe){const ye=Ue(z);return ye.persistence.runTransaction("Save bundle","readwrite",$e=>ye.ds.saveBundleMetadata($e,oe))}(l.localStore,D),_._completeWith(F.progress),Promise.resolve(F.Mu)}catch(D){return vu("SyncEngine",`Loading bundle failed with ${D}`),_._failWith(D),Promise.resolve(new Set)}var z}),function(l,p,_){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield If(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function hE(n,e){return function oE(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,s){const a=Ue(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.ds.getNamedQuery(l,s))}(yield p_(n),e)}))}(or(n=Ht(n,yn)),e).then(t=>t?new ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ni(this,t):null)}}class qg extends Bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wd(new Ko(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xi.forKey(t,this.firestore,null)}}class LE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}get(e){const t=Kd(e);return this._delegate.get(t).then(s=>new Wg(this._firestore,new Ca(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Kd(e);return s?(R_("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Kd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Kd(e);return this._delegate.delete(t),this}}class k_{constructor(e){this._delegate=e}set(e,t,s){const a=Kd(e);return s?(R_("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Kd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Kd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hu{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zd(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Hu.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Hu(e,new qg(e),t),a.set(t,l)),l}}Hu.INSTANCES=new WeakMap;class Xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xi(t,new Dn(t._delegate,s,new Fe(e)))}static forKey(e,t,s){return new Xi(t,new Dn(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Rf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rf(this.firestore,__(this._delegate,e))}catch(t){throw si(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,It.m9)(e))instanceof Dn&&jd(this._delegate,e)}set(e,t){t=R_("DocumentReference.set",t);try{return t?Ug(this._delegate,e,t):Ug(this._delegate,e)}catch(s){throw si(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?AE(this._delegate,e):AE(this._delegate,e,t,...s)}catch(a){throw si(a,"updateDoc()","DocumentReference.update()")}}delete(){return function SE(n){return ll(Ht(n.firestore,yn),[new yd(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=VE(e),s=BE(e,a=>new Wg(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return xE(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rD(n){n=Ht(n,Dn);const e=Ht(n.firestore,yn),t=or(e),s=new Os(e);return function kw(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(s=(0,he.Z)(function*(a,l,p){try{const _=yield function(D,A){const N=Ue(D);return N.persistence.runTransaction("read document","readonly",F=>N.ai.Bs(F,A))}(a,l);_.isFoundDocument()?p.resolve(_):_.isNoDocument()?p.resolve(null):p.reject(new Ae(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const D=nl(_,`Failed to get document '${l} from cache`);p.reject(D)}}),function(a,l,p){return s.apply(this,arguments)})(yield p_(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Ca(e,s,n._key,a,new Zo(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function iD(n){n=Ht(n,Dn);const e=Ht(n.firestore,yn);return Mg(or(e),n._key,{source:"server"}).then(t=>jg(e,n,t))}(this._delegate):function Ii(n){n=Ht(n,Dn);const e=Ht(n.firestore,yn);return Mg(or(e),n._key).then(t=>jg(e,n,t))}(this._delegate),t.then(s=>new Wg(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}function si(n,e,t){return n.message=n.message.replace(e,t),n}function VE(n){for(const e of n)if("object"==typeof e&&!O_(e))return e;return{}}function BE(n,e){var t,s;let a;return a=O_(n[0])?n[0]:O_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Wg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Lg(this._delegate,e._delegate)}}class zd extends Wg{data(e){const t=this._delegate.data(e);return function xm(n,e){n||et()}(void 0!==t),t}}class Ni{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}where(e,t,s){try{return new Ni(this.firestore,ju(this._delegate,function D_(n,e,t){const s=e,a=cl("where",n);return new rb(a,s,t)}(e,t,s)))}catch(a){throw si(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ni(this.firestore,ju(this._delegate,function IE(n,e="asc"){const t=e,s=cl("orderBy",n);return new b_(s,t)}(e,t)))}catch(s){throw si(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ni(this.firestore,ju(this._delegate,function T_(n){return Uw("limit",n),new Vg("limit",n,"F")}(e)))}catch(t){throw si(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ni(this.firestore,ju(this._delegate,function Jw(n){return Uw("limitToLast",n),new Vg("limitToLast",n,"L")}(e)))}catch(t){throw si(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ni(this.firestore,ju(this._delegate,function Xw(...n){return new wE("startAt",n,!0)}(...e)))}catch(t){throw si(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ni(this.firestore,ju(this._delegate,function eD(...n){return new wE("startAfter",n,!1)}(...e)))}catch(t){throw si(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ni(this.firestore,ju(this._delegate,function A_(...n){return new C_("endBefore",n,!1)}(...e)))}catch(t){throw si(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ni(this.firestore,ju(this._delegate,function tD(...n){return new C_("endAt",n,!0)}(...e)))}catch(t){throw si(t,"endAt()","Query.endAt()")}}isEqual(e){return uE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Nf(n){n=Ht(n,ii);const e=Ht(n.firestore,yn),t=or(e),s=new Os(e);return function Fw(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(s=(0,he.Z)(function*(a,l,p){try{const _=yield df(a,l,!0),D=new q0(l,_.hi),A=D.Gu(_.documents),N=D.applyChanges(A,!1);p.resolve(N.snapshot)}catch(_){const D=nl(_,`Failed to execute query '${l} against cache`);p.reject(D)}}),function(a,l,p){return s.apply(this,arguments)})(yield p_(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Aa(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function sD(n){n=Ht(n,ii);const e=Ht(n.firestore,yn),t=or(e),s=new Os(e);return iE(t,n._query,{source:"server"}).then(a=>new Aa(e,s,n,a))}(this._delegate):function ib(n){n=Ht(n,ii);const e=Ht(n.firestore,yn),t=or(e),s=new Os(e);return w_(n._query),iE(t,n._query).then(a=>new Aa(e,s,n,a))}(this._delegate),t.then(s=>new UE(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=VE(e),s=BE(e,a=>new UE(this.firestore,new Aa(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return xE(this._delegate,t,s)}withConverter(e){return new Ni(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}class ub{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UE{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ub(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new zd(this._firestore,s))})}isEqual(e){return Lg(this._delegate,e._delegate)}}class Rf extends Ni{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xi(this.firestore,e):null}doc(e){try{return new Xi(this.firestore,void 0===e?sl(this._delegate):sl(this._delegate,e))}catch(t){throw si(t,"doc()","CollectionReference.doc()")}}add(e){return function oD(n,e){const t=Ht(n.firestore,yn),s=sl(n),a=Mf(n.converter,e);return ll(t,[Tf(Bu(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,gr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Xi(this.firestore,t))}isEqual(e){return jd(this._delegate,e._delegate)}withConverter(e){return new Rf(this.firestore,this._delegate.withConverter(e?Hu.getInstance(this.firestore,e):null))}}function Kd(n){return Ht(n,Dn)}class jE{constructor(...e){this._delegate=new Ta(...e)}static documentId(){return new jE(pr.keyField().canonicalString())}isEqual(e){return(e=(0,It.m9)(e))instanceof Ta&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ME(){return new kg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zd(e)}static delete(){const e=function sb(){return new Hd("deleteField")}();return e._methodName="FieldValue.delete",new Zd(e)}static arrayUnion(...e){const t=function aD(...n){return new gE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zd(t)}static arrayRemove(...e){const t=function NE(...n){return new Zw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zd(t)}static increment(e){const t=function Hg(n){return new mE("increment",n)}(e);return t._methodName="FieldValue.increment",new Zd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cb={Firestore:kE,GeoPoint:Pg,Timestamp:zn,Blob:Wd,Transaction:LE,WriteBatch:k_,DocumentReference:Xi,DocumentSnapshot:Wg,Query:Ni,QueryDocumentSnapshot:zd,QuerySnapshot:UE,CollectionReference:Rf,FieldPath:jE,FieldValue:Zd,setLogLevel:function FE(n){!function Sm(n){_a.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function lb(n){(function zg(n,e){n.INTERNAL.registerComponent(new No.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},cb)))})(n,(e,t)=>new kE(e,t,new OE)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Ks.Z);var F_=O(7579),L_=O(6451),Pf=O(5363),$E=O(8421);function dl(n,e){return(0,vs.e)((t,s)=>{let a=null,l=0,p=!1;const _=()=>p&&!a&&s.complete();t.subscribe((0,fi.x)(s,D=>{null==a||a.unsubscribe();let A=0;const N=l++;(0,$E.Xf)(n(D,N)).subscribe(a=(0,fi.x)(s,F=>s.next(e?e(D,F,N,A++):F),()=>{a=null,_()}))},()=>{p=!0,_()}))})}var V_=O(6063);class HE extends F_.x{constructor(e=1/0,t=1/0,s=V_.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(s.push(e),!a&&s.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=s?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<s.length&&s.splice(0,s.length-l),!a){const p=t.now();let _=0;for(let D=1;D<s.length&&s[D]<=p;D+=2)_=D;_&&s.splice(0,_+1)}}}var GE=O(3099);function qE(n,e,t){let s,a=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):s=null!=n?n:1/0,(0,GE.B)({connector:()=>new HE(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const WE=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var cD=O(5698);function B_(n){return(0,vs.e)((e,t)=>{let s=!1;e.subscribe((0,fi.x)(t,a=>{s=!0,t.next(a)},()=>{s||t.next(n),t.complete()}))})}function lD(n=hb){return(0,vs.e)((e,t)=>{let s=!1;e.subscribe((0,fi.x)(t,a=>{s=!0,t.next(a)},()=>s?t.complete():t.error(n())))})}function hb(){return new WE}var pb=O(576);function zE(n,e){return(0,pb.m)(e)?dl(()=>n,e):dl(()=>n)}var KE=O(9468);O(5867);const Kg=new Map,yo={activated:!1,tokenObservers:[]},vD={initialized:!1,enabled:!1};function Hr(n){return Kg.get(n)||yo}function _o(n,e){Kg.set(n,e)}function Of(){return vD}class nI{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new It.BH,yield function DD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new It.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oi=new It.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zg(n){if(!Hr(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function Yg(n,e){return $_.apply(this,arguments)}function $_(){return $_=(0,he.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const F=yield a.getHeartbeatsHeader();F&&(s["X-Firebase-Client"]=F)}const l={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,l)}catch(F){throw oi.create("fetch-network-error",{originalErrorMessage:F.message})}if(200!==p.status)throw oi.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(F){throw oi.create("fetch-parse-error",{originalErrorMessage:F.message})}const D=_.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const A=1e3*Number(D[1]),N=Date.now();return{token:_.attestationToken,expireTimeMillis:N+A,issuedAtTimeMillis:N}}),$_.apply(this,arguments)}function Eb(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Lf="firebase-app-check-store";let H_=null;function AD(){return H_||(H_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(oi.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(Lf,{keyPath:"compositeKey"})}}catch(t){e(oi.create("storage-open",{originalErrorMessage:t.message}))}}),H_)}function G_(){return G_=(0,he.Z)(function*(n,e){const s=(yield AD()).transaction(Lf,"readwrite"),l=s.objectStore(Lf).put({compositeKey:n,value:e});return new Promise((p,_)=>{l.onsuccess=D=>{p()},s.onerror=D=>{var A;_(oi.create("storage-set",{originalErrorMessage:null===(A=D.target.error)||void 0===A?void 0:A.message}))}})}),G_.apply(this,arguments)}const Yd=new ei.Yd("@firebase/app-check");function aI(n,e){return(0,It.hl)()?function wb(n,e){return function Vf(n,e){return G_.apply(this,arguments)}(function Gu(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jf(){return Of().enabled}function xD(){return uI.apply(this,arguments)}function uI(){return uI=(0,he.Z)(function*(){const n=Of();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uI.apply(this,arguments)}const Tb={error:"UNKNOWN_ERROR"};function cI(n){return It.US.encodeString(JSON.stringify(n),!1)}function Jg(n){return z_.apply(this,arguments)}function z_(){return z_=(0,he.Z)(function*(n,e=!1){const t=n.app;Zg(t);const s=Hr(t);let l,a=s.token;if(!a){const D=yield s.cachedTokenPromise;D&&Xg(D)&&(a=D)}if(!e&&a&&Xg(a))return{token:a.token};let _,p=!1;if(jf()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Yg(Eb(t,yield xD()),n.heartbeatServiceProvider).then(A=>(s.exchangeTokenPromise=void 0,A)),p=!0);const D=yield s.exchangeTokenPromise;return yield aI(t,D),_o(t,Object.assign(Object.assign({},s),{token:D})),{token:D.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(D=>(s.exchangeTokenPromise=void 0,D)),p=!0),a=yield s.exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?Yd.warn(D.message):Yd.error(D),l=D}return a?(_={token:a.token},_o(t,Object.assign(Object.assign({},s),{token:a})),yield aI(t,a)):_=MD(l),p&&Q_(t,_),_}),z_.apply(this,arguments)}function Z_(n,e){const t=Hr(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),_o(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function Y_(n){const{app:e}=n,t=Hr(e);let s=t.tokenRefresher;s||(s=function lI(n){const{app:e}=n;return new nI((0,he.Z)(function*(){let s;if(s=Hr(e).token?yield Jg(n,!0):yield Jg(n),s.error)throw s.error}),()=>!0,()=>{const t=Hr(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),_o(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function Q_(n,e){const t=Hr(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function Xg(n){return n.expireTimeMillis-Date.now()>0}function MD(n){return{token:cI(Tb),error:n}}class dI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hr(this.app);for(const t of e)Z_(this.app,t.next);return Promise.resolve()}}const m="app-check-internal";!function v(){(0,Fr._registerComponent)(new No.wA("app-check",n=>function J_(n,e){return new dI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(m).initialize()})),(0,Fr._registerComponent)(new No.wA(m,n=>function Cb(n){return{getToken:e=>Jg(n,e),addTokenListener:e=>function K_(n,e,t,s){const{app:a}=n,l=Hr(a),p={next:t,error:s,type:e};if(_o(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&Xg(l.token)){const _=l.token;Promise.resolve().then(()=>{t({token:_.token}),Y_(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Y_(n))}(n,"INTERNAL",e),removeTokenListener:e=>Z_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fr.registerVersion)("@firebase/app-check","0.5.5")}();class S{constructor(){return(0,An.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const em=new E.OlP("angularfire2.auth.use-emulator"),tm=new E.OlP("angularfire2.auth.settings"),nm=new E.OlP("angularfire2.auth.tenant-id"),rm=new E.OlP("angularfire2.auth.langugage-code"),im=new E.OlP("angularfire2.auth.use-device-language"),Rb=new E.OlP("angularfire.auth.persistence"),Pb=(n,e,t,s,a,l,p,_)=>(0,rr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),s&&(D.tenantId=s),D.languageCode=a,l&&D.useDeviceLanguage(),p)for(const[A,N]of Object.entries(p))D.settings[A]=N;return _&&D.setPersistence(_),D},[t,s,a,l,p,_]);let Ob=(()=>{class n{constructor(t,s,a,l,p,_,D,A,N,F,z,oe){const ye=new F_.x,$e=_s(void 0).pipe((0,Pf.Q)(p.outsideAngular),dl(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4087)))),(0,Jr.U)(()=>(0,rr.on)(t,l,s)),(0,Jr.U)(ot=>Pb(ot,l,_,A,N,F,D,z)),qE({bufferSize:1,refCount:!1}));if(tr(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_s(null);else{$e.pipe(function fb(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Xr((a,l)=>n(a,l,s)):Nl.y,(0,cD.q)(1),t?B_(e):lD(()=>new WE))}()).subscribe();const Xt=$e.pipe(dl(bt=>bt.getRedirectResult().then(Bt=>Bt,()=>null)),An.iC,qE({bufferSize:1,refCount:!1})),Dt=$e.pipe(dl(bt=>new qn.y(Bt=>({unsubscribe:l.runOutsideAngular(()=>bt.onAuthStateChanged(Ut=>Bt.next(Ut),Ut=>Bt.error(Ut),()=>Bt.complete()))})))),Mn=$e.pipe(dl(bt=>new qn.y(Bt=>({unsubscribe:l.runOutsideAngular(()=>bt.onIdTokenChanged(Ut=>Bt.next(Ut),Ut=>Bt.error(Ut),()=>Bt.complete()))}))));this.authState=Xt.pipe(zE(Dt),(0,KE.R)(p.outsideAngular),(0,Pf.Q)(p.insideAngular)),this.user=Xt.pipe(zE(Mn),(0,KE.R)(p.outsideAngular),(0,Pf.Q)(p.insideAngular)),this.idToken=this.user.pipe(dl(bt=>bt?(0,Ti.D)(bt.getIdToken()):_s(null))),this.idTokenResult=this.user.pipe(dl(bt=>bt?(0,Ti.D)(bt.getIdTokenResult()):_s(null))),this.credential=(0,L_.T)(Xt,ye,this.authState.pipe(Xr(bt=>!bt))).pipe((0,Jr.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,KE.R)(p.outsideAngular),(0,Pf.Q)(p.insideAngular))}return(0,rr.pX)(this,$e,l,{spy:{apply:(ot,Xt,Dt)=>{(ot.startsWith("signIn")||ot.startsWith("createUser"))&&Dt.then(Mn=>ye.next(Mn))}}})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(rr.Dh),E.LFG(rr.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(An.HU),E.LFG(em,8),E.LFG(tm,8),E.LFG(nm,8),E.LFG(rm,8),E.LFG(im,8),E.LFG(Rb,8),E.LFG(S,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function kb(n,e){return function Gb(n,e=um.z){return new qn.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function LD(n,e){return kb(n,e).pipe((0,Jr.U)(t=>({payload:t,type:"query"})))}function EI(n,e){return LD(n,e).pipe(Qr(void 0),Ci(),(0,Jr.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,_)=>{const D=a.find(N=>N.doc.ref.isEqual(p.ref)),A=null==t?void 0:t.payload.docs.find(N=>N.ref.isEqual(p.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(p.metadata)||!D&&A&&JSON.stringify(A.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:p}})}),l}))}function Fb(n,e,t){return EI(n,t).pipe(aa((s,a)=>function Wb(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function zb(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VD(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),function xo(n,e=Nl.y){return n=null!=n?n:Mo,(0,vs.e)((t,s)=>{let a,l=!0;t.subscribe((0,fi.x)(s,p=>{const _=e(p);(l||!n(a,_))&&(l=!1,a=_,s.next(p))}))})}(),(0,Jr.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function VD(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Lb(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Vb{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=EI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Jr.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Qr(void 0),Ci(),Xr(([s,a])=>a.length>0||!s),(0,Jr.U)(([s,a])=>a),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(aa((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Lb(e);return Fb(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jr.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),An.iC)}get(e){return(0,Ti.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new Bb(this.ref.doc(e),this.afs)}}class Bb{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Ub(s,t);return new Vb(a,l,this.afs)}snapshotChanges(){return function qb(n,e){return kb(n,e).pipe(Qr(void 0),Ci(),(0,Jr.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Jr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ti.D)(this.ref.get(e)).pipe(An.iC)}}class Kb{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jr.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),Xr(t=>t.length>0),An.iC):EI(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(aa((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Lb(e);return Fb(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jr.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),An.iC)}get(e){return(0,Ti.D)(this.query.get(e)).pipe(An.iC)}}const Zb=new E.OlP("angularfire2.enableFirestorePersistence"),Yb=new E.OlP("angularfire2.firestore.persistenceSettings"),Qb=new E.OlP("angularfire2.firestore.settings"),Jb=new E.OlP("angularfire2.firestore.use-emulator");function Ub(n,e=(t=>t)){return{query:e(n),ref:n}}let Xb=(()=>{class n{constructor(t,s,a,l,p,_,D,A,N,F,z,oe,ye,$e,ot,Xt,Dt){this.schedulers=D;const Mn=(0,rr.on)(t,_,s),bt=N;F&&Pb(Mn,_,z,ye,$e,ot,oe,Xt),[this.firestore,this.persistenceEnabled$]=(0,rr.cc)(`${Mn.name}.firestore`,"AngularFirestore",Mn.name,()=>{const Bt=_.runOutsideAngular(()=>Mn.firestore());if(l&&Bt.settings(l),bt&&Bt.useEmulator(...bt),a&&!tr(p)){const Ut=()=>{try{return(0,Ti.D)(Bt.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(qu){return"undefined"!=typeof console&&console.warn(qu),_s(!1)}};return[Bt,_.runOutsideAngular(Ut)]}return[Bt,_s(!1)]},[l,bt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Ub(a,s),_=this.schedulers.ngZone.run(()=>l);return new Vb(_,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new Kb(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Bb(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(rr.Dh),E.LFG(rr.xv,8),E.LFG(Zb,8),E.LFG(Qb,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(An.HU),E.LFG(Yb,8),E.LFG(Jb,8),E.LFG(Ob,8),E.LFG(em,8),E.LFG(tm,8),E.LFG(nm,8),E.LFG(rm,8),E.LFG(im,8),E.LFG(Rb,8),E.LFG(S,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function eT(n,e){if(1&n&&(E.TgZ(0,"div",5)(1,"p",6),E._uU(2,"\u0422\u0440\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437 \u0411\u0414 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u2026 "),E.qZA(),E.TgZ(3,"h2"),E._uU(4),E.qZA(),E._uU(5),E.TgZ(6,"p",7),E._uU(7),E.ALo(8,"date"),E.qZA(),E.TgZ(9,"form",8)(10,"button"),E._uU(11,"Github code"),E.qZA()()()),2&n){const t=e.$implicit;E.xp6(4),E.Oqu(t.name),E.xp6(1),E.hij(" ",t.description," "),E.xp6(2),E.hij("\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u0442: ",E.xi3(8,3,1e3*t.datecreate.seconds,"fullDate"),"")}}let tT=(()=>{class n{constructor(t){this.title="Firestore-Angular",this.dataFromBase=t.collection("collection-base").valueChanges()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(Xb))},n.\u0275cmp=E.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:3,consts:[[1,"a"],[1,"b"],["class","text ",4,"ngFor","ngForOf"],[1,"probel"],[1,"f"],[1,"text"],[1,"connect"],[1,"date"],["action","https://github.com/a374ru/firestore-a#readme","target","_blank"]],template:function(t,s){1&t&&(E.TgZ(0,"section")(1,"h1",0),E._uU(2,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0431\u0430\u0437\u044b "),E.TgZ(3,"b"),E._uU(4,"Firestore"),E.qZA(),E._uU(5,"\u2026"),E.qZA(),E.TgZ(6,"main",1),E.YNc(7,eT,12,6,"div",2),E.ALo(8,"async"),E.qZA(),E._UZ(9,"div",3),E.qZA(),E.TgZ(10,"footer",4),E._uU(11," YS\xa9TM\n"),E.qZA()),2&t&&(E.xp6(7),E.Q6J("ngForOf",E.lcZ(8,1,s.dataFromBase)))},directives:[er],pipes:[Wu,Xd],styles:['app-root[_ngcontent-%COMP%]{height:0px}html[_ngcontent-%COMP%]{background-color:#e6d1b9}body[_ngcontent-%COMP%]{margin:0;background-color:#fff9f9;background-image:url(bg.d82dc5a501263bda.svg);background-attachment:scroll;background-size:cover;background-position:bottom right;color:#f29849}.red[_ngcontent-%COMP%]{color:#e34234;font-size:2em}h1[_ngcontent-%COMP%]{color:#8f7161}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:#e34234;text-decoration:none}button[_ngcontent-%COMP%]{color:#2c87bf;text-decoration:none;background-color:#fff9f9;transform:rotate(-7deg);box-shadow:0 3px 44px #f1cbcb;border-radius:7px;border-color:#ebebeb;margin-top:3em}@media screen and (max-width: 425px){body[_ngcontent-%COMP%]{background-image:none}}.connect[_ngcontent-%COMP%]{color:#ccc9}section[_ngcontent-%COMP%]{display:grid;grid-template:auto auto 11rem 1fr/auto auto auto;grid-template-columns:.1fr 1fr .1fr;grid-template-areas:". a ." ". b ." ". . ."}main[_ngcontent-%COMP%]{grid-area:b}.text[_ngcontent-%COMP%]{padding-left:1em;font-size:x-large}h1[_ngcontent-%COMP%]{grid-area:a;font-size:3em}.date[_ngcontent-%COMP%]{color:#2c87bf}.probel[_ngcontent-%COMP%]{grid-area:p}.f[_ngcontent-%COMP%]{display:grid;align-content:center;grid-area:f;height:100px;background-color:#fce5cc55;color:#4f3d18;text-align:center}@media screen and (max-width: 425px){body[_ngcontent-%COMP%]{background-image:none}.text[_ngcontent-%COMP%]{padding-left:0}}']}),n})();const jb_firebase={projectId:"a374ru-test",appId:"1:1011899585553:web:040525bd59ff99becd4db0",storageBucket:"a374ru-test.appspot.com",locationId:"europe-west",apiKey:"AIzaSyCMgHg0bLk4H2qJ1dgzqLg6w3QvqdH0kXM",authDomain:"a374ru-test.firebaseapp.com",messagingSenderId:"1011899585553"};let nT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n,bootstrap:[tT]}),n.\u0275inj=E.cJS({providers:[],imports:[[sa,rr.hO.initializeApp(jb_firebase)]]}),n})();(0,E.G48)(),ic().bootstrapModule(nT).catch(n=>console.error(n))},5867:(at,Te,O)=>{O.d(Te,{Mq:()=>E.getApp,C6:()=>E.getApps});var E=O(9681);(0,E.registerVersion)("firebase","9.6.10","app")},127:(at,Te,O)=>{O.d(Te,{Z:()=>E.Z});var E=O(3942);E.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(at,Te,O)=>{O.r(Te);var E=O(5861),Y=O(3942),P=O(2090),ce=O(9681),Q=O(655),fe=O(1877),ae=O(4859);const Oe=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new fe.Yd("@firebase/auth");function Ge(g,...d){Je.logLevel<=fe.in.ERROR&&Je.error(`Auth (${ce.SDK_VERSION}): ${g}`,...d)}function be(g,...d){throw Be(g,...d)}function me(g,...d){return Be(g,...d)}function ve(g,d,f){const y=Object.assign(Object.assign({},Ve()),{[d]:f});return new P.LL("auth","Firebase",y).create(d,{appName:g.name})}function He(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&be(g,"argument-error"),ve(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(g,...d){if("string"!=typeof g){const f=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(f,...y)}return de.create(g,...d)}function ee(g,d,...f){if(!g)throw Be(d,...f)}function q(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Ge(d),new Error(d)}function X(g,d){g||q(d)}const le=new Map;function ne(g){X(g instanceof Function,"Expected a class definition");let d=le.get(g);return d?(X(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,le.set(g,d),d)}function vt(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Gt(){return"http:"===bn()||"https:"===bn()}function bn(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class en{constructor(d,f){this.shortDelay=d,this.longDelay=f,X(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function st(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tn(g,d){X(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ai{static initialize(d,f,y){this.fetchImpl=d,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ri=new en(3e4,6e4);function qt(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function kt(g,d,f,y){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,E.Z)(function*(g,d,f,y,T={}){return qr(g,T,(0,E.Z)(function*(){let M={},G={};y&&("GET"===d?G=y:M={body:JSON.stringify(y)});const te=(0,P.xO)(Object.assign({key:g.config.apiKey},G)).slice(1),Pe=yield g._getAdditionalHeaders();return Pe["Content-Type"]="application/json",g.languageCode&&(Pe["X-Firebase-Locale"]=g.languageCode),ai.fetch()(_r(g,g.config.apiHost,f,te),Object.assign({method:d,headers:Pe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function qr(g,d,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,E.Z)(function*(g,d,f){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},Kt),d);try{const T=new Pi(g),M=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw Oi(g,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const te=M.ok?G.errorMessage:G.error.message,[Pe,Ye]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Oi(g,"credential-already-in-use",G);if("EMAIL_EXISTS"===Pe)throw Oi(g,"email-already-in-use",G);const ht=y[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw ve(g,ht,Ye);be(g,ht)}}catch(T){if(T instanceof P.ZR)throw T;be(g,"network-request-failed")}})).apply(this,arguments)}function yr(g,d,f,y){return wi.apply(this,arguments)}function wi(){return(wi=(0,E.Z)(function*(g,d,f,y,T={}){const M=yield kt(g,d,f,y,T);return"mfaPendingCredential"in M&&be(g,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function _r(g,d,f,y){const T=`${d}${f}?${y}`;return g.config.emulator?tn(g.config,T):`${g.config.apiScheme}://${T}`}class Pi{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(me(this.auth,"network-request-failed")),Ri.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oi(g,d,f){const y={appName:g.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const T=me(g,d,y);return T.customData._tokenResponse=f,T}function Mr(){return(Mr=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function $n(g,d){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Wr(g,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function dn(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Yo(){return(Yo=(0,E.Z)(function*(g,d=!1){const f=(0,P.m9)(g),y=yield f.getIdToken(d),T=rt(y);ee(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,G=null==M?void 0:M.sign_in_provider;return{claims:T,token:y,authTime:dn(Ft(T.auth_time)),issuedAtTime:dn(Ft(T.iat)),expirationTime:dn(Ft(T.exp)),signInProvider:G||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Ft(g){return 1e3*Number(g)}function rt(g){const[d,f,y]=g.split(".");if(void 0===d||void 0===f||void 0===y)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(f);return T?JSON.parse(T):(Ge("Failed to decode base64 JWT payload"),null)}catch(T){return Ge("Caught error parsing JWT payload as JSON",T),null}}function Qn(g,d){return Di.apply(this,arguments)}function Di(){return(Di=(0,E.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(y){throw y instanceof P.ZR&&Pt(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}function Pt({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Ls{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,E.Z)(function*(){yield f.iteration()}),y)}iteration(){var d=this;return(0,E.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class ar{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(g){return ct.apply(this,arguments)}function ct(){return(ct=(0,E.Z)(function*(g){var d;const f=g.auth,y=yield g.getIdToken(),T=yield Qn(g,Wr(f,{idToken:y}));ee(null==T?void 0:T.users.length,f,"internal-error");const M=T.users[0];g._notifyReloadListener(M);const G=(null===(d=M.providerUserInfo)||void 0===d?void 0:d.length)?we(M.providerUserInfo):[],te=ze(g.providerData,G),ht=!!g.isAnonymous&&!(g.email&&M.passwordHash||(null==te?void 0:te.length)),it={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:te,metadata:new ar(M.createdAt,M.lastLoginAt),isAnonymous:ht};Object.assign(g,it)})).apply(this,arguments)}function Mt(){return(Mt=(0,E.Z)(function*(g){const d=(0,P.m9)(g);yield Jn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ze(g,d){return[...g.filter(y=>!d.some(T=>T.providerId===y.providerId)),...d]}function we(g){return g.map(d=>{var{providerId:f}=d,y=(0,Q._T)(d,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function lt(){return(lt=(0,E.Z)(function*(g,d){const f=yield qr(g,{},(0,E.Z)(function*(){const y=(0,P.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:T,apiKey:M}=g.config,G=_r(g,T,"/v1/token",`key=${M}`),te=yield g._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",ai.fetch()(G,{method:"POST",headers:te,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ee(d.idToken,"internal-error"),ee(void 0!==d.idToken,"internal-error"),ee(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function yt(g){const d=rt(g);return ee(d,"internal-error"),ee(void 0!==d.exp,"internal-error"),ee(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var y=this;return(0,E.Z)(function*(){return ee(!y.accessToken||y.refreshToken,d,"user-token-expired"),f||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var y=this;return(0,E.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:G}=yield function Ze(g,d){return lt.apply(this,arguments)}(d,f);y.updateTokensAndExpiration(T,M,Number(G))})()}updateTokensAndExpiration(d,f,y){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,f){const{refreshToken:y,accessToken:T,expirationTime:M}=f,G=new Nt;return y&&(ee("string"==typeof y,"internal-error",{appName:d}),G.refreshToken=y),T&&(ee("string"==typeof T,"internal-error",{appName:d}),G.accessToken=T),M&&(ee("number"==typeof M,"internal-error",{appName:d}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return q("not implemented")}}function St(g,d){ee("string"==typeof g||void 0===g,"internal-error",{appName:d})}class B{constructor(d){var{uid:f,auth:y,stsTokenManager:T}=d,M=(0,Q._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ls(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ar(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,E.Z)(function*(){const y=yield Qn(f,f.stsTokenManager.getToken(f.auth,d));return ee(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(d){return function ns(g){return Yo.apply(this,arguments)}(this,d)}reload(){return function ur(g){return Mt.apply(this,arguments)}(this)}_assign(d){this!==d&&(ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new B(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var y=this;return(0,E.Z)(function*(){let T=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),T=!0),f&&(yield Jn(y)),yield y.auth._persistUserIfCurrent(y),T&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,E.Z)(function*(){const f=yield d.getIdToken();return yield Qn(d,function ut(g,d){return Mr.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var y,T,M,G,te,Pe,Ye,ht;const it=null!==(y=f.displayName)&&void 0!==y?y:void 0,wn=null!==(T=f.email)&&void 0!==T?T:void 0,_i=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,no=null!==(G=f.photoURL)&&void 0!==G?G:void 0,Mc=null!==(te=f.tenantId)&&void 0!==te?te:void 0,yu=null!==(Pe=f._redirectEventId)&&void 0!==Pe?Pe:void 0,Nc=null!==(Ye=f.createdAt)&&void 0!==Ye?Ye:void 0,Ah=null!==(ht=f.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:ro,emailVerified:ya,isAnonymous:rd,providerData:id,stsTokenManager:xs}=f;ee(ro&&xs,d,"internal-error");const lp=Nt.fromJSON(this.name,xs);ee("string"==typeof ro,d,"internal-error"),St(it,d.name),St(wn,d.name),ee("boolean"==typeof ya,d,"internal-error"),ee("boolean"==typeof rd,d,"internal-error"),St(_i,d.name),St(no,d.name),St(Mc,d.name),St(yu,d.name),St(Nc,d.name),St(Ah,d.name);const sd=new B({uid:ro,auth:d,email:wn,emailVerified:ya,displayName:it,isAnonymous:rd,photoURL:no,phoneNumber:_i,tenantId:Mc,stsTokenManager:lp,createdAt:Nc,lastLoginAt:Ah});return id&&Array.isArray(id)&&(sd.providerData=id.map(dp=>Object.assign({},dp))),yu&&(sd._redirectEventId=yu),sd}static _fromIdTokenResponse(d,f,y=!1){return(0,E.Z)(function*(){const T=new Nt;T.updateFromServerResponse(f);const M=new B({uid:f.localId,auth:d,stsTokenManager:T,isAnonymous:y});return yield Jn(M),M})()}}const j=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(f,y){var T=this;return(0,E.Z)(function*(){T.storage[f]=y})()}_get(f){var y=this;return(0,E.Z)(function*(){const T=y.storage[f];return void 0===T?null:T})()}_remove(f){var y=this;return(0,E.Z)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return g.type="NONE",g})();function ue(g,d,f){return`firebase:${g}:${d}:${f}`}class K{constructor(d,f,y){this.persistence=d,this.auth=f,this.userKey=y;const{config:T,name:M}=this.auth;this.fullUserKey=ue(this.userKey,T.apiKey,M),this.fullPersistenceKey=ue("persistence",T.apiKey,M),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,E.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?B._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,E.Z)(function*(){if(f.persistence===d)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,y="authUser"){return(0,E.Z)(function*(){if(!f.length)return new K(ne(j),d,y);const T=(yield Promise.all(f.map(function(){var Ye=(0,E.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let M=T[0]||ne(j);const G=ue(y,d.config.apiKey,d.name);let te=null;for(const Ye of f)try{const ht=yield Ye._get(G);if(ht){const it=B._fromJSON(d,ht);Ye!==M&&(te=it),M=Ye;break}}catch(ht){}const Pe=T.filter(Ye=>Ye._shouldAllowMigration);return M._shouldAllowMigration&&Pe.length?(M=Pe[0],te&&(yield M._set(G,te.toJSON())),yield Promise.all(f.map(function(){var Ye=(0,E.Z)(function*(ht){if(ht!==M)try{yield ht._remove(G)}catch(it){}});return function(ht){return Ye.apply(this,arguments)}}())),new K(M,d,y)):new K(M,d,y)})()}}function ke(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Lt(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(gt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Ct(d))return"Blackberry";if(sn(d))return"Webos";if(jt(d))return"Safari";if((d.includes("chrome/")||cr(d))&&!d.includes("edge/"))return"Chrome";if(_n(d))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==y?void 0:y.length))return y[1]}return"Other"}function gt(g=(0,P.z$)()){return/firefox\//i.test(g)}function jt(g=(0,P.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function cr(g=(0,P.z$)()){return/crios\//i.test(g)}function Lt(g=(0,P.z$)()){return/iemobile/i.test(g)}function _n(g=(0,P.z$)()){return/android/i.test(g)}function Ct(g=(0,P.z$)()){return/blackberry/i.test(g)}function sn(g=(0,P.z$)()){return/webos/i.test(g)}function Gn(g=(0,P.z$)()){return/iphone|ipad|ipod/i.test(g)}function ki(g=(0,P.z$)()){return Gn(g)||_n(g)||sn(g)||Ct(g)||/windows phone/i.test(g)||Lt(g)}function Jo(g,d=[]){let f;switch(g){case"Browser":f=ke((0,P.z$)());break;case"Worker":f=`${ke((0,P.z$)())}-${g}`;break;default:f=g}const y=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ce.SDK_VERSION}/${y}`}class zr{constructor(d,f,y){this.app=d,this.heartbeatServiceProvider=f,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(d,f){var y=this;return f&&(this._popupRedirectResolver=ne(f)),this._initializationPromise=this.queue((0,E.Z)(function*(){var T,M;if(!y._deleted&&(y.persistenceManager=yield K.create(y,d),!y._deleted)){if(null===(T=y._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch(G){}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(M=y.currentUser)||void 0===M?void 0:M.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,E.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f)}})()}initializeCurrentUser(d){var f=this;return(0,E.Z)(function*(){var y;let T=yield f.assertedPersistence.getCurrentUser();if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const M=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,G=null==T?void 0:T._redirectEventId,te=yield f.tryRedirectSignIn(d);(!M||M===G)&&(null==te?void 0:te.user)&&(T=te.user)}return T?T._redirectEventId?(ee(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===T._redirectEventId?f.directlySetCurrentUser(T):f.reloadAndSetCurrentUserOrClear(T)):f.reloadAndSetCurrentUserOrClear(T):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var f=this;return(0,E.Z)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(T){yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,E.Z)(function*(){try{yield Jn(d)}catch(y){if("auth/network-request-failed"!==y.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function pt(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,E.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,E.Z)(function*(){const y=d?(0,P.m9)(d):null;return y&&ee(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(d){var f=this;return(0,E.Z)(function*(){if(!f._deleted)return d&&ee(f.tenantId===d.tenantId,f,"tenant-id-mismatch"),f.queue((0,E.Z)(function*(){yield f.directlySetCurrentUser(d),f.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,E.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var f=this;return this.queue((0,E.Z)(function*(){yield f.assertedPersistence.setPersistence(ne(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new P.LL("auth","Firebase",d())}onAuthStateChanged(d,f,y){return this.registerStateListener(this.authStateSubscription,d,f,y)}onIdTokenChanged(d,f,y){return this.registerStateListener(this.idTokenSubscription,d,f,y)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var y=this;return(0,E.Z)(function*(){const T=yield y.getOrInitRedirectPersistenceManager(f);return null===d?T.removeCurrentUser():T.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,E.Z)(function*(){if(!f.redirectPersistenceManager){const y=d&&ne(d)||f._popupRedirectResolver;ee(y,f,"argument-error"),f.redirectPersistenceManager=yield K.create(f,[ne(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,E.Z)(function*(){var y,T;return f._isInitialized&&(yield f.queue((0,E.Z)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===d?f._currentUser:(null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,E.Z)(function*(){if(d===f.currentUser)return f.queue((0,E.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,y,T){if(this._deleted)return()=>{};const M="function"==typeof f?f:f.next.bind(f),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof f?d.addObserver(f,y,T):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,E.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Jo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,E.Z)(function*(){var f;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const T=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return T&&(y["X-Firebase-Client"]=T),y})()}}function xe(g){return(0,P.m9)(g)}class At{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,P.ne)(f=>this.observer=f)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xn(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Nn(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Zt{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return q("not implemented")}_getIdTokenResponse(d){return q("not implemented")}_linkToIdToken(d,f){return q("not implemented")}_getReauthenticationResolver(d){return q("not implemented")}}function Tn(g,d){return is.apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:resetPassword",qt(g,d))})).apply(this,arguments)}function Tt(g,d){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Bs(g,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:update",qt(g,d))})).apply(this,arguments)}function er(){return(er=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithPassword",qt(g,d))})).apply(this,arguments)}function Fi(g,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:sendOobCode",qt(g,d))})).apply(this,arguments)}function ui(g,d){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,E.Z)(function*(g,d){return Fi(g,d)})).apply(this,arguments)}function xa(g,d){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,E.Z)(function*(g,d){return Fi(g,d)})).apply(this,arguments)}function ci(g,d){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,E.Z)(function*(g,d){return Fi(g,d)})).apply(this,arguments)}function hl(g,d){return os.apply(this,arguments)}function os(){return(os=(0,E.Z)(function*(g,d){return Fi(g,d)})).apply(this,arguments)}function Nr(){return(Nr=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithEmailLink",qt(g,d))})).apply(this,arguments)}function fl(){return(fl=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithEmailLink",qt(g,d))})).apply(this,arguments)}class Ra extends Zt{constructor(d,f,y,T=null){super("password",y),this._email=d,this._password=f,this._tenantId=T}static _fromEmailAndPassword(d,f){return new Ra(d,f,"password")}static _fromEmailAndCode(d,f,y=null){return new Ra(d,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,E.Z)(function*(){switch(f.signInMethod){case"password":return function ss(g,d){return er.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Na(g,d){return Nr.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:be(d,"internal-error")}})()}_linkToIdToken(d,f){var y=this;return(0,E.Z)(function*(){switch(y.signInMethod){case"password":return Tt(d,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Jd(g,d){return fl.apply(this,arguments)}(d,{idToken:f,email:y._email,oobCode:y._password});default:be(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Rn(g,d){return pl.apply(this,arguments)}function pl(){return(pl=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithIdp",qt(g,d))})).apply(this,arguments)}class Vi extends Zt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Vi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):be("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:T}=f,M=(0,Q._T)(f,["providerId","signInMethod"]);if(!y||!T)return null;const G=new Vi(y,T);return G.idToken=M.idToken||void 0,G.accessToken=M.accessToken||void 0,G.secret=M.secret,G.nonce=M.nonce,G.pendingToken=M.pendingToken||null,G}_getIdTokenResponse(d){return Rn(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,Rn(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Rn(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,P.xO)(f)}return d}}function Gf(g,d){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:sendVerificationCode",qt(g,d))})).apply(this,arguments)}function as(){return(as=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithPhoneNumber",qt(g,d))})).apply(this,arguments)}function gl(){return(gl=(0,E.Z)(function*(g,d){const f=yield yr(g,"POST","/v1/accounts:signInWithPhoneNumber",qt(g,d));if(f.temporaryProof)throw Oi(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Wf={USER_NOT_FOUND:"user-not-found"};function ml(){return(ml=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithPhoneNumber",qt(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Wf)})).apply(this,arguments)}class Io extends Zt{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Io({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Io({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function zu(g,d){return as.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function qf(g,d){return gl.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Xd(g,d){return ml.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:y,verificationCode:T}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:y,code:T}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:y,phoneNumber:T,temporaryProof:M}=d;return y||f||T||M?new Io({verificationId:f,verificationCode:y,phoneNumber:T,temporaryProof:M}):null}}class Us{constructor(d){var f,y,T,M,G,te;const Pe=(0,P.zd)((0,P.pd)(d)),Ye=null!==(f=Pe.apiKey)&&void 0!==f?f:null,ht=null!==(y=Pe.oobCode)&&void 0!==y?y:null,it=function om(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Pe.mode)&&void 0!==T?T:null);ee(Ye&&ht&&it,"argument-error"),this.apiKey=Ye,this.operation=it,this.code=ht,this.continueUrl=null!==(M=Pe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=Pe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(te=Pe.tenantId)&&void 0!==te?te:null}static parseLink(d){const f=function Pa(g){const d=(0,P.zd)((0,P.pd)(g)).link,f=d?(0,P.zd)((0,P.pd)(d)).deep_link_id:null,y=(0,P.zd)((0,P.pd)(g)).deep_link_id;return(y?(0,P.zd)((0,P.pd)(y)).link:null)||y||f||d||g}(d);try{return new Us(f)}catch(y){return null}}}let Ku=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,y){return Ra._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const T=Us.parseLink(y);return ee(T,"argument-error"),Ra._fromEmailAndCode(f,T.code,T.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class us{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Rr extends us{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class wo extends Rr{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ee("providerId"in f&&"signInMethod"in f,"argument-error"),Vi._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ee(d.idToken||d.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return wo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return wo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:T,pendingToken:M,nonce:G,providerId:te}=d;if(!y&&!T&&!f&&!M||!te)return null;try{return new wo(te)._credential({idToken:f,accessToken:y,nonce:G,pendingToken:M})}catch(Pe){return null}}}let js=(()=>{class g extends Rr{constructor(){super("facebook.com")}static credential(f){return Vi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(y){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ea=(()=>{class g extends Rr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return Vi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:T}=f;if(!y&&!T)return null;try{return g.credential(y,T)}catch(M){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),yl=(()=>{class g extends Rr{constructor(){super("github.com")}static credential(f){return Vi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(y){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Do extends Zt{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Rn(d,this.buildRequest())}_linkToIdToken(d,f){const y=this.buildRequest();return y.idToken=f,Rn(d,y)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Rn(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:T,pendingToken:M}=f;return y&&T&&M&&y===T?new Do(y,M):null}static _create(d,f){return new Do(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zr extends us{constructor(d){ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Zr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Zr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Do.fromJSON(d);return ee(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:y}=d;if(!f||!y)return null;try{return Do._create(y,f)}catch(T){return null}}}let Oa=(()=>{class g extends Rr{constructor(){super("twitter.com")}static credential(f,y){return Vi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:T}=f;if(!y||!T)return null;try{return g.credential(y,T)}catch(M){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function ka(g,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signUp",qt(g,d))})).apply(this,arguments)}class tr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,y,T=!1){return(0,E.Z)(function*(){const M=yield B._fromIdTokenResponse(d,y,T),G=th(y);return new tr({user:M,providerId:G,_tokenResponse:y,operationType:f})})()}static _forOperation(d,f,y){return(0,E.Z)(function*(){yield d._updateTokensIfNecessary(y,!0);const T=th(y);return new tr({user:d,providerId:T,_tokenResponse:y,operationType:f})})()}}function th(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function _l(){return(_l=(0,E.Z)(function*(g){var d;const f=xe(g);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new tr({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield ka(f,{returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class Zu extends P.ZR{constructor(d,f,y,T){var M;super(f.code,f.message),this.operationType=y,this.user=T,Object.setPrototypeOf(this,Zu.prototype),this.customData={appName:d.name,tenantId:null!==(M=d.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,f,y,T){return new Zu(d,f,y,T)}}function Yu(g,d,f,y){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Zu._fromErrorAndOperation(g,M,d,y):M})}function Bi(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Qu(){return(Qu=(0,E.Z)(function*(g,d){const f=(0,P.m9)(g);yield ls(!0,f,d);const{providerUserInfo:y}=yield $n(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),T=Bi(y||[]);return f.providerData=f.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function un(g,d){return bo.apply(this,arguments)}function bo(){return(bo=(0,E.Z)(function*(g,d,f=!1){const y=yield Qn(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return tr._forOperation(g,"link",y)})).apply(this,arguments)}function ls(g,d,f){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,E.Z)(function*(g,d,f){yield Jn(d);const T=!1===g?"provider-already-linked":"no-such-provider";ee(Bi(d.providerData).has(f)===g,d.auth,T)})).apply(this,arguments)}function vl(g,d){return $s.apply(this,arguments)}function $s(){return($s=(0,E.Z)(function*(g,d,f=!1){const{auth:y}=g,T="reauthenticate";try{const M=yield Qn(g,Yu(y,T,d,g),f);ee(M.idToken,y,"internal-error");const G=rt(M.idToken);ee(G,y,"internal-error");const{sub:te}=G;return ee(g.uid===te,y,"user-mismatch"),tr._forOperation(g,T,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&be(y,"user-mismatch"),M}})).apply(this,arguments)}function Hs(g,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,E.Z)(function*(g,d,f=!1){const y="signIn",T=yield Yu(g,y,d),M=yield tr._fromIdTokenResponse(g,y,T);return f||(yield g._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Cn(g,d){return na.apply(this,arguments)}function na(){return(na=(0,E.Z)(function*(g,d){return Hs(xe(g),d)})).apply(this,arguments)}function li(g,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,E.Z)(function*(g,d){const f=(0,P.m9)(g);return yield ls(!1,f,d.providerId),un(f,d)})).apply(this,arguments)}function ds(g,d){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,E.Z)(function*(g,d){return vl((0,P.m9)(g),d)})).apply(this,arguments)}function La(g,d){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(g,d){return yr(g,"POST","/v1/accounts:signInWithCustomToken",qt(g,d))})).apply(this,arguments)}function fs(){return(fs=(0,E.Z)(function*(g,d){const f=xe(g),y=yield La(f,{token:d,returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class dt{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?Va._fromServerResponse(d,f):be(d,"internal-error")}}class Va extends dt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new Va(f)}}function ra(g,d,f){var y;ee((null===(y=f.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),ee(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ee(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ee(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Ua(){return(Ua=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g),T={requestType:"PASSWORD_RESET",email:d};f&&ra(y,T,f),yield xa(y,T)})).apply(this,arguments)}function Ju(){return(Ju=(0,E.Z)(function*(g,d,f){yield Tn((0,P.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Ie(){return(Ie=(0,E.Z)(function*(g,d){yield Bs((0,P.m9)(g),{oobCode:d})})).apply(this,arguments)}function xt(g,d){return El.apply(this,arguments)}function El(){return(El=(0,E.Z)(function*(g,d){const f=(0,P.m9)(g),y=yield Tn(f,{oobCode:d}),T=y.requestType;switch(ee(T,f,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(y.mfaInfo,f,"internal-error");default:ee(y.email,f,"internal-error")}let M=null;return y.mfaInfo&&(M=dt._fromServerResponse(xe(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function To(){return(To=(0,E.Z)(function*(g,d){const{data:f}=yield xt((0,P.m9)(g),d);return f.email})).apply(this,arguments)}function kr(){return(kr=(0,E.Z)(function*(g,d,f){const y=xe(g),T=yield ka(y,{returnSecureToken:!0,email:d,password:f}),M=yield tr._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}function Il(){return(Il=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g),T={requestType:"EMAIL_SIGNIN",email:d};ee(f.handleCodeInApp,y,"argument-error"),f&&ra(y,T,f),yield ci(y,T)})).apply(this,arguments)}function ps(){return(ps=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g),T=Ku.credentialWithLink(d,f||vt());return ee(T._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Cn(y,T)})).apply(this,arguments)}function nr(g,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:createAuthUri",qt(g,d))})).apply(this,arguments)}function gs(){return(gs=(0,E.Z)(function*(g,d){const y={identifier:d,continueUri:Gt()?vt():"http://localhost"},{signinMethods:T}=yield nr((0,P.m9)(g),y);return T||[]})).apply(this,arguments)}function rc(){return(rc=(0,E.Z)(function*(g,d){const f=(0,P.m9)(g),T={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&ra(f.auth,T,d);const{email:M}=yield ui(f.auth,T);M!==g.email&&(yield g.reload())})).apply(this,arguments)}function qa(){return(qa=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&ra(y.auth,M,f);const{email:G}=yield hl(y.auth,M);G!==g.email&&(yield g.reload())})).apply(this,arguments)}function ic(g,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,E.Z)(function*(g,d){return kt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function sc(){return(sc=(0,E.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const y=(0,P.m9)(g),M={idToken:yield y.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},G=yield Qn(y,ic(y.auth,M));y.displayName=G.displayName||null,y.photoURL=G.photoUrl||null;const te=y.providerData.find(({providerId:Pe})=>"password"===Pe);te&&(te.displayName=y.displayName,te.photoURL=y.photoURL),yield y._updateTokensIfNecessary(G)})).apply(this,arguments)}function ac(g,d,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,E.Z)(function*(g,d,f){const{auth:y}=g,M={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(M.email=d),f&&(M.password=f);const G=yield Qn(g,Tt(y,M));yield g._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class qs{constructor(d,f,y={}){this.isNewUser=d,this.providerId=f,this.profile=y}}class bl extends qs{constructor(d,f,y,T){super(d,f,y),this.username=T}}class Tl extends qs{constructor(d,f){super(d,"facebook.com",f)}}class Ws extends bl{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class ms extends qs{constructor(d,f){super(d,"google.com",f)}}class uc extends bl{constructor(d,f,y){super(d,"twitter.com",f,y)}}function hr(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Dl(g){var d,f;if(!g)return null;const{providerId:y}=g,T=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},M=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&(null==g?void 0:g.idToken)){const G=null===(f=null===(d=rt(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(G)return new qs(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!y)return null;switch(y){case"facebook.com":return new Tl(M,T);case"github.com":return new Ws(M,T);case"google.com":return new ms(M,T);case"twitter.com":return new uc(M,T,g.screenName||null);case"custom":case"anonymous":return new qs(M,null);default:return new qs(M,y,T)}}(f)}class ji{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new ji("enroll",d)}static _fromMfaPendingCredential(d){return new ji("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,y;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return ji._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(y=d.multiFactorSession)||void 0===y?void 0:y.idToken)return ji._fromIdtoken(d.multiFactorSession.idToken)}return null}}class oa{constructor(d,f,y){this.session=d,this.hints=f,this.signInResolver=y}static _fromError(d,f){const y=xe(d),T=f.customData._serverResponse,M=(T.mfaInfo||[]).map(te=>dt._fromServerResponse(y,te));ee(T.mfaPendingCredential,y,"internal-error");const G=ji._fromMfaPendingCredential(T.mfaPendingCredential);return new oa(G,M,function(){var te=(0,E.Z)(function*(Pe){const Ye=yield Pe._process(y,G);delete T.mfaInfo,delete T.mfaPendingCredential;const ht=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(f.operationType){case"signIn":const it=yield tr._fromIdTokenResponse(y,f.operationType,ht);return yield y._updateCurrentUser(it.user),it;case"reauthenticate":return ee(f.user,y,"internal-error"),tr._forOperation(f.user,f.operationType,ht);default:be(y,"internal-error")}});return function(Pe){return te.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,E.Z)(function*(){return f.signInResolver(d)})()}}function Pn(g,d){return kt(g,"POST","/v2/accounts/mfaEnrollment:start",qt(g,d))}class $i{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>dt._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new $i(d)}getSession(){var d=this;return(0,E.Z)(function*(){return ji._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var y=this;return(0,E.Z)(function*(){const T=d,M=yield y.getSession(),G=yield Qn(y.user,T._process(y.user.auth,M,f));return yield y.user._updateTokensIfNecessary(G),y.user.reload()})()}unenroll(d){var f=this;return(0,E.Z)(function*(){const y="string"==typeof d?d:d.uid,T=yield f.user.getIdToken(),M=yield Qn(f.user,function Kf(g,d){return kt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(g,d))}(f.user.auth,{idToken:T,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:G})=>G!==y),yield f.user._updateTokensIfNecessary(M);try{yield f.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const Ao=new WeakMap,dc="__sak";class zs{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const qn=(()=>{class g extends zs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sl(){const g=(0,P.z$)();return jt(g)||Gn(g)}()&&function Ln(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=ki(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const T=this.storage.getItem(y),M=this.localCache[y];T!==M&&f(y,M,T)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((te,Pe,Ye)=>{this.notifyListeners(te,Ye)});const T=f.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(T);if(f.newValue!==te)null!==f.newValue?this.storage.setItem(T,f.newValue):this.storage.removeItem(T);else if(this.localCache[T]===f.newValue&&!y)return}const M=()=>{const te=this.storage.getItem(T);!y&&this.localCache[T]===te||this.notifyListeners(T,te)},G=this.storage.getItem(T);!function Qo(){return(0,P.w1)()&&10===document.documentMode}()||G===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,y){this.localCache[f]=y;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var T=()=>super._set,M=this;return(0,E.Z)(function*(){yield T().call(M,f,y),M.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,T=this;return(0,E.Z)(function*(){const M=yield y().call(T,f);return T.localCache[f]=JSON.stringify(M),M})()}_remove(f){var y=()=>super._remove,T=this;return(0,E.Z)(function*(){yield y().call(T,f),delete T.localCache[f]})()}}return g.type="LOCAL",g})(),hi=(()=>{class g extends zs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return g.type="SESSION",g})();let An=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(M=>M.isListeningto(f));if(y)return y;const T=new g(f);return this.receivers.push(T),T}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,E.Z)(function*(){const T=f,{eventId:M,eventType:G,data:te}=T.data,Pe=y.handlersMap[G];if(!(null==Pe?void 0:Pe.size))return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const Ye=Array.from(Pe).map(function(){var it=(0,E.Z)(function*(wn){return wn(T.origin,te)});return function(wn){return it.apply(this,arguments)}}()),ht=yield function _s(g){return Promise.all(g.map(function(){var d=(0,E.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return d.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:ht})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function So(g="",d=10){let f="";for(let y=0;y<d;y++)f+=Math.floor(10*Math.random());return g+f}class xl{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,y=50){var T=this;return(0,E.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,te;return new Promise((Pe,Ye)=>{const ht=So("",20);M.port1.start();const it=setTimeout(()=>{Ye(new Error("unsupported_event"))},y);te={messageChannel:M,onMessage(wn){const _i=wn;if(_i.data.eventId===ht)switch(_i.data.status){case"ack":clearTimeout(it),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Pe(_i.data.response);break;default:clearTimeout(it),clearTimeout(G),Ye(new Error("invalid_response"))}}},T.handlers.add(te),M.port1.addEventListener("message",te.onMessage),T.target.postMessage({eventType:d,eventId:ht,data:f},[M.port2])}).finally(()=>{te&&T.removeMessageHandler(te)})})()}}function nn(){return window}function Qr(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}function Ci(){return(Ci=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const aa="firebaseLocalStorageDb",xo="firebaseLocalStorage",Mo="fbase_key";class Xr{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function rr(g,d){return g.transaction([xo],d?"readwrite":"readonly").objectStore(xo)}function Ks(){const g=indexedDB.open(aa,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore(xo,{keyPath:Mo})}catch(T){f(T)}}),g.addEventListener("success",(0,E.Z)(function*(){const y=g.result;y.objectStoreNames.contains(xo)?d(y):(y.close(),yield function pi(){const g=indexedDB.deleteDatabase(aa);return new Xr(g).toPromise()}(),d(yield Ks()))}))})}function he(g,d,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,E.Z)(function*(g,d,f){const y=rr(g,!0).put({[Mo]:d,value:f});return new Xr(y).toPromise()})).apply(this,arguments)}function ei(){return(ei=(0,E.Z)(function*(g,d){const f=rr(g,!1).get(d),y=yield new Xr(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function It(g,d){const f=rr(g,!0).delete(d);return new Xr(f).toPromise()}const ti=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,E.Z)(function*(){return f.db||(f.db=yield Ks()),f.db})()}_withRetries(f){var y=this;return(0,E.Z)(function*(){let T=0;for(;;)try{const M=yield y._openDb();return yield f(M)}catch(M){if(T++>3)throw M;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,E.Z)(function*(){return Qr()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,E.Z)(function*(){f.receiver=An._getInstance(function Ml(){return Qr()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,E.Z)(function*(T,M){return{keyProcessed:(yield f._poll()).includes(M.key)}});return function(T,M){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,E.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,E.Z)(function*(){var y,T;if(f.activeServiceWorker=yield function fi(){return Ci.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new xl(f.activeServiceWorker);const M=yield f.sender._send("ping",{},800);!M||(null===(y=M[0])||void 0===y?void 0:y.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,E.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function Jr(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Ks();return yield he(f,dc,"1"),yield It(f,dc),!0}catch(f){}return!1})()}_withPendingWrite(f){var y=this;return(0,E.Z)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var T=this;return(0,E.Z)(function*(){return T._withPendingWrite((0,E.Z)(function*(){return yield T._withRetries(M=>he(M,f,y)),T.localCache[f]=y,T.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,E.Z)(function*(){const T=yield y._withRetries(M=>function No(g,d){return ei.apply(this,arguments)}(M,f));return y.localCache[f]=T,T})()}_remove(f){var y=this;return(0,E.Z)(function*(){return y._withPendingWrite((0,E.Z)(function*(){return yield y._withRetries(T=>It(T,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,E.Z)(function*(){const y=yield f._withRetries(G=>{const te=rr(G,!1).getAll();return new Xr(te).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:G,value:te}of y)M.add(G),JSON.stringify(f.localCache[G])!==JSON.stringify(te)&&(f.notifyListeners(G,te),T.push(G));for(const G of Object.keys(f.localCache))f.localCache[G]&&!M.has(G)&&(f.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(f,y){this.localCache[f]=y;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function Et(g,d){return kt(g,"POST","/v2/accounts/mfaSignIn:start",qt(g,d))}function vr(){return(vr=(0,E.Z)(function*(g){return(yield kt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Is(g){return new Promise((d,f)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=d,y.onerror=T=>{const M=me("internal-error");M.customData=T,f(M)},y.type="text/javascript",y.charset="UTF-8",function ih(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(y)})}function Ka(g){return`__${g}${Math.floor(1e6*Math.random())}`}const rn=1e12;class Za{constructor(d){this.auth=d,this.counter=rn,this._widgets=new Map}render(d,f){const y=this.counter;return this._widgets.set(y,new On(d,this.auth.name,f||{})),this.counter++,y}reset(d){var f;const y=d||rn;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(d){var f;return(null===(f=this._widgets.get(d||rn))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,E.Z)(function*(){var y;return null===(y=f._widgets.get(d||rn))||void 0===y||y.execute(),""})()}}class On{constructor(d,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof d?document.getElementById(d):d;ee(T,"argument-error",{appName:f}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lr(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(y){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(y){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ya=Ka("rcb"),Yf=new en(3e4,6e4);class Qf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nn().grecaptcha}load(d,f=""){return ee(function cm(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(nn().grecaptcha):new Promise((y,T)=>{const M=nn().setTimeout(()=>{T(me(d,"network-request-failed"))},Yf.get());nn()[Ya]=()=>{nn().clearTimeout(M),delete nn()[Ya];const te=nn().grecaptcha;if(!te)return void T(me(d,"internal-error"));const Pe=te.render;te.render=(Ye,ht)=>{const it=Pe(Ye,ht);return this.counter++,it},this.hostLanguage=f,y(te)},Is(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Ya,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(M),T(me(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!nn().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sh{load(d){return(0,E.Z)(function*(){return new Za(d)})()}clearedOneInstance(){}}const Qa="recaptcha",Ja={theme:"light",type:"image"};class oh{constructor(d,f=Object.assign({},Ja),y){this.parameters=f,this.type=Qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xe(y),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof d?document.getElementById(d):d;ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sh:new Qf,this.validateStartingState()}verify(){var d=this;return(0,E.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(f)||new Promise(M=>{const G=te=>{!te||(d.tokenChangeListeners.delete(G),M(te))};d.tokenChangeListeners.add(G),d.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof d)d(f);else if("string"==typeof d){const y=nn()[d];"function"==typeof y&&y(f)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,E.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,E.Z)(function*(){ee(Gt()&&!Qr(),d.auth,"internal-error"),yield function Er(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function za(g){return vr.apply(this,arguments)}(d.auth);ee(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hi{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Io._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function gn(){return(gn=(0,E.Z)(function*(g,d,f){const y=xe(g),T=yield ir(y,d,(0,P.m9)(f));return new Hi(T,M=>Cn(y,M))})).apply(this,arguments)}function Ds(){return(Ds=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g);yield ls(!1,y,"phone");const T=yield ir(y.auth,d,(0,P.m9)(f));return new Hi(T,M=>li(y,M))})).apply(this,arguments)}function eu(){return(eu=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g),T=yield ir(y.auth,d,(0,P.m9)(f));return new Hi(T,M=>ds(y,M))})).apply(this,arguments)}function ir(g,d,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,E.Z)(function*(g,d,f){var y;const T=yield f.verify();try{let M;if(ee("string"==typeof T,g,"argument-error"),ee(f.type===Qa,g,"argument-error"),M="string"==typeof d?{phoneNumber:d}:d,"session"in M){const G=M.session;if("phoneNumber"in M)return ee("enroll"===G.type,g,"internal-error"),(yield Pn(g,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,g,"internal-error");const te=(null===(y=M.multiFactorHint)||void 0===y?void 0:y.uid)||M.multiFactorUid;return ee(te,g,"missing-multi-factor-info"),(yield Et(g,{mfaPendingCredential:G.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Gf(g,{phoneNumber:M.phoneNumber,recaptchaToken:T});return G}}finally{f._reset()}})).apply(this,arguments)}function Po(){return(Po=(0,E.Z)(function*(g,d){yield un((0,P.m9)(g),d)})).apply(this,arguments)}let Dr=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=xe(f)}verifyPhoneNumber(f,y){return ir(this.auth,f,(0,P.m9)(y))}static credential(f,y){return Io._fromVerification(f,y)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:T}=f;return y&&T?Io._fromTokenResponse(y,T):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Gi(g,d){return d?ne(d):(ee(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class ua extends Zt{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Rn(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Rn(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Rn(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function tu(g){return Hs(g.auth,new ua(g),g.bypassAuthState)}function Pl(g){const{auth:d,user:f}=g;return ee(f,d,"internal-error"),vl(f,new ua(g),g.bypassAuthState)}function fc(g){return qi.apply(this,arguments)}function qi(){return(qi=(0,E.Z)(function*(g){const{auth:d,user:f}=g;return ee(f,d,"internal-error"),un(f,new ua(g),g.bypassAuthState)})).apply(this,arguments)}class Vn{constructor(d,f,y,T,M=!1){this.auth=d,this.resolver=y,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,E.Z)(function*(y,T){d.pendingPromise={resolve:y,reject:T};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(M){d.reject(M)}});return function(y,T){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,E.Z)(function*(){const{urlResponse:y,sessionId:T,postBody:M,tenantId:G,error:te,type:Pe}=d;if(te)return void f.reject(te);const Ye={auth:f.auth,requestUri:y,sessionId:T,tenantId:G||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Pe)(Ye))}catch(ht){f.reject(ht)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return tu;case"linkViaPopup":case"linkViaRedirect":return fc;case"reauthViaPopup":case"reauthViaRedirect":return Pl;default:be(this.auth,"internal-error")}}resolve(d){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ys=new en(2e3,1e4);function uh(){return(uh=(0,E.Z)(function*(g,d,f){const y=xe(g);He(g,d,us);const T=Gi(y,f);return new bs(y,"signInViaPopup",d,T).executeNotNull()})).apply(this,arguments)}function nu(){return(nu=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g);He(y.auth,d,us);const T=Gi(y.auth,f);return new bs(y.auth,"reauthViaPopup",d,T,y).executeNotNull()})).apply(this,arguments)}function pc(){return(pc=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g);He(y.auth,d,us);const T=Gi(y.auth,f);return new bs(y.auth,"linkViaPopup",d,T,y).executeNotNull()})).apply(this,arguments)}let bs=(()=>{class g extends Vn{constructor(f,y,T,M,G){super(f,y,M,G),this.provider=T,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,E.Z)(function*(){const y=yield f.execute();return ee(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,E.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const y=So();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(me(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,T;this.pollId=(null===(T=null===(y=this.authWindow)||void 0===y?void 0:y.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Ys.get())};f()}}return g.currentPopupAction=null,g})();const Wi=new Map;class gc extends Vn{constructor(d,f,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,E.Z)(function*(){let y=Wi.get(f.auth._key());if(!y){try{const M=(yield function br(g,d){return kl.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;y=()=>Promise.resolve(M)}catch(T){y=()=>Promise.reject(T)}Wi.set(f.auth._key(),y)}return f.bypassAuthState||Wi.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,y=this;return(0,E.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(y,d);if("unknown"!==d.type){if(d.eventId){const T=yield y.auth._redirectUserForId(d.eventId);if(T)return y.user=T,f().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function kl(){return(kl=(0,E.Z)(function*(g,d){const f=ru(d),y=ca(g);if(!(yield y._isAvailable()))return!1;const T="true"===(yield y._get(f));return yield y._remove(f),T})).apply(this,arguments)}function Vr(g,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,E.Z)(function*(g,d){return ca(g)._set(ru(d),"true")})).apply(this,arguments)}function ca(g){return ne(g._redirectPersistence)}function ru(g){return ue("pendingRedirect",g.config.apiKey,g.name)}function w(){return(w=(0,E.Z)(function*(g,d,f){const y=xe(g);He(g,d,us);const T=Gi(y,f);return yield Vr(T,y),T._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function k(){return(k=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g);He(y.auth,d,us);const T=Gi(y.auth,f);yield Vr(T,y.auth);const M=yield nt(y);return T._openRedirect(y.auth,d,"reauthViaRedirect",M)})).apply(this,arguments)}function Ce(){return(Ce=(0,E.Z)(function*(g,d,f){const y=(0,P.m9)(g);He(y.auth,d,us);const T=Gi(y.auth,f);yield ls(!1,y,d.providerId),yield Vr(T,y.auth);const M=yield nt(y);return T._openRedirect(y.auth,d,"linkViaRedirect",M)})).apply(this,arguments)}function Ke(){return(Ke=(0,E.Z)(function*(g,d){return yield xe(g)._initializationPromise,Xe(g,d,!1)})).apply(this,arguments)}function Xe(g,d){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,E.Z)(function*(g,d,f=!1){const y=xe(g),T=Gi(y,d),G=yield new gc(y,T,f).execute();return G&&!f&&(delete G.user._redirectEventId,yield y._persistUserIfCurrent(G.user),yield y._setRedirectUser(null,d)),G})).apply(this,arguments)}function nt(g){return $t.apply(this,arguments)}function $t(){return($t=(0,E.Z)(function*(g){const d=So(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Ts{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(f=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function zi(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ko(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var y;if(d.error&&!ko(d)){const T=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(me(this.auth,T))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const y=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Js(d))}saveEventToCache(d){this.cachedEventUids.add(Js(d)),this.lastProcessedEventTime=Date.now()}}function Js(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function ko({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Ki(g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,E.Z)(function*(g,d={}){return kt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Fl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lh=/^https?/;function Cs(){return(Cs=(0,E.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Ki(g);for(const f of d)try{if(iu(f))return}catch(y){}be(g,"unauthorized-domain")})).apply(this,arguments)}function iu(g){const d=vt(),{protocol:f,hostname:y}=new URL(d);if(g.startsWith("chrome-extension://")){const G=new URL(g);return""===G.hostname&&""===y?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&G.hostname===y}if(!lh.test(f))return!1;if(Fl.test(g))return y===g;const T=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(y)}const dm=new en(3e4,6e4);function Ll(){const g=nn().___jsl;if(null==g?void 0:g.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let su=null;function hm(g){return su=su||function Vl(g){return new Promise((d,f)=>{var y,T,M;function G(){Ll(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Ll(),f(me(g,"network-request-failed"))},timeout:dm.get()})}if(null===(T=null===(y=nn().gapi)||void 0===y?void 0:y.iframes)||void 0===T?void 0:T.Iframe)d(gapi.iframes.getContext());else{if(!(null===(M=nn().gapi)||void 0===M?void 0:M.load)){const te=Ka("iframefcb");return nn()[te]=()=>{gapi.load?G():f(me(g,"network-request-failed"))},Is(`https://apis.google.com/js/api.js?onload=${te}`).catch(Pe=>f(Pe))}G()}}).catch(d=>{throw su=null,d})}(g),su}const fm=new en(5e3,15e3),vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eo(g){const d=g.config;ee(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?tn(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,y={apiKey:d.apiKey,appName:g.name,v:ce.SDK_VERSION},T=Bl.get(g.config.apiHost);T&&(y.eid=T);const M=g._getFrameworks();return M.length&&(y.fw=M.join(",")),`${f}?${(0,P.xO)(y).slice(1)}`}function dh(){return dh=(0,E.Z)(function*(g){const d=yield hm(g),f=nn().gapi;return ee(f,g,"internal-error"),d.open({where:document.body,url:eo(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vc,dontclear:!0},y=>new Promise(function(){var T=(0,E.Z)(function*(M,G){yield y.restyle({setHideOnLeave:!1});const te=me(g,"network-request-failed"),Pe=nn().setTimeout(()=>{G(te)},fm.get());function Ye(){nn().clearTimeout(Pe),M(y)}y.ping(Ye).then(Ye,()=>{G(te)})});return function(M,G){return T.apply(this,arguments)}}()))}),dh.apply(this,arguments)}const Ec={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ou{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function jl(g,d,f,y,T,M){ee(g.config.authDomain,g,"auth-domain-config-required"),ee(g.config.apiKey,g,"invalid-api-key");const G={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:y,v:ce.SDK_VERSION,eventId:T};if(d instanceof us){d.setDefaultLanguage(g.languageCode),G.providerId=d.providerId||"",(0,P.xb)(d.getCustomParameters())||(G.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Pe,Ye]of Object.entries(M||{}))G[Pe]=Ye}if(d instanceof Rr){const Pe=d.getScopes().filter(Ye=>""!==Ye);Pe.length>0&&(G.scopes=Pe.join(","))}g.tenantId&&(G.tid=g.tenantId);const te=G;for(const Pe of Object.keys(te))void 0===te[Pe]&&delete te[Pe];return`${function wc({config:g}){return g.emulator?tn(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,P.xO)(te).slice(1)}`}const gi="webStorageSupport";class gh extends class gm{constructor(d){this.factorId=d}_process(d,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,y);case"signin":return this._finalizeSignIn(d,f.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new gh(d)}_finalizeEnroll(d,f,y){return function Cl(g,d){return kt(g,"POST","/v2/accounts/mfaEnrollment:finalize",qt(g,d))}(d,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function Zs(g,d){return kt(g,"POST","/v2/accounts/mfaSignIn:finalize",qt(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hl=(()=>{class g{constructor(){}static assertion(f){return gh._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var mh="@firebase/auth",yh="0.19.11";class Gl{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,E.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(y=>{var T;d((null===(T=y)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function la(){return window}function Lo(){return(Lo=(0,E.Z)(function*(g,d,f){var y;const{BuildInfo:T}=la();X(d.sessionId,"AuthEvent did not contain a session ID");const M=yield Eh(d.sessionId),G={};return Gn()?G.ibi=T.packageName:_n()?G.apn=T.packageName:be(g,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=M,jl(g,f,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,G)})).apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(g){const{BuildInfo:d}=la(),f={};Gn()?f.iosBundleId=d.packageName:_n()?f.androidPackageName=d.packageName:be(g,"operation-not-supported-in-this-environment"),yield Ki(g,f)})).apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(g,d,f){const{cordova:y}=la();let T=()=>{};try{yield new Promise((M,G)=>{let te=null;function Pe(){var it;M();const wn=null===(it=y.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof wn&&wn(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Ye(){te||(te=window.setTimeout(()=>{G(me(g,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}d.addPassiveListener(Pe),document.addEventListener("resume",Ye,!1),_n()&&document.addEventListener("visibilitychange",ht,!1),T=()=>{d.removePassiveListener(Pe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ht,!1),te&&window.clearTimeout(te)}})}finally{T()}})).apply(this,arguments)}function Eh(g){return cu.apply(this,arguments)}function cu(){return(cu=(0,E.Z)(function*(g){const d=lu(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lu(g){if(X(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let y=0;y<g.length;y++)f[y]=g.charCodeAt(y);return f}!function Dc(g){(0,ce._registerComponent)(new ae.wA("auth",(d,{options:f})=>{const y=d.getProvider("app").getImmediate(),T=d.getProvider("heartbeat"),{apiKey:M,authDomain:G}=y.options;return((te,Pe)=>{ee(M&&!M.includes(":"),"invalid-api-key",{appName:te.name}),ee(!(null==G?void 0:G.includes(":")),"argument-error",{appName:te.name});const Ye={apiKey:M,authDomain:G,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jo(g)},ht=new zr(te,Pe,Ye);return function re(g,d){const f=(null==d?void 0:d.persistence)||[],y=(Array.isArray(f)?f:[f]).map(ne);(null==d?void 0:d.errorMap)&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(y,null==d?void 0:d.popupRedirectResolver)}(ht,f),ht})(y,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,y)=>{d.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new ae.wA("auth-internal",d=>{const f=xe(d.getProvider("auth").getImmediate());return new Gl(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(mh,yh,function ql(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ce.registerVersion)(mh,yh,"esm2017")}("Browser");class Ih extends Ts{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,E.Z)(function*(){yield d.initPromise})()}}function wh(g){return As.apply(this,arguments)}function As(){return(As=(0,E.Z)(function*(g){const d=yield to()._get(Zi(g));return d&&(yield to()._remove(Zi(g))),d})).apply(this,arguments)}function ym(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const y=Math.floor(Math.random()*d.length);g.push(d.charAt(y))}return g.join("")}function to(){return ne(qn)}function Zi(g){return ue("authEvent",g.config.apiKey,g.name)}function ha(g){if(!(null==g?void 0:g.includes("?")))return{};const[d,...f]=g.split("?");return(0,P.zd)(f.join("?"))}function rp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Sc(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function ip(g=(0,P.z$)()){return!("file:"!==Sc()&&"ionic:"!==Sc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function fr(){try{const g=self.localStorage,d=So();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Si(g=(0,P.z$)()){return function iv(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Kl(g=(0,P.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,P.hl)()}catch(g){return fu()&&(0,P.hl)()}return!1}function fu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function xc(){return(function Em(){return"http:"===Sc()||"https:"===Sc()}()||(0,P.ru)()||ip())&&!function Im(){return(0,P.b$)()||(0,P.UG)()}()&&fr()&&!fu()}function Bo(){return ip()&&"undefined"!=typeof document}function fa(){return(fa=(0,E.Z)(function*(){return!!Bo()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const yi={LOCAL:"local",NONE:"none",SESSION:"session"},pu=ee,Yl="persistence";function gu(g){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,E.Z)(function*(g){yield g._initializationPromise;const d=Jl(),f=ue(Yl,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Jl(){var g;try{return(null===(g=function Zl(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(d){return null}}const wm=ee;class Ss{constructor(){this.browserResolver=ne(class au{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hi,this._completeRedirectFn=Xe}_openPopup(d,f,y,T){var M=this;return(0,E.Z)(function*(){var G;X(null===(G=M.eventManagers[d._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const te=jl(d,f,y,vt(),T);return function ph(g,d,f,y=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-y)/2,0).toString();let te="";const Pe=Object.assign(Object.assign({},Ec),{width:y.toString(),height:T.toString(),top:M,left:G}),Ye=(0,P.z$)().toLowerCase();f&&(te=cr(Ye)?"_blank":f),gt(Ye)&&(d=d||"http://localhost",Pe.scrollbars="yes");const ht=Object.entries(Pe).reduce((wn,[_i,no])=>`${wn}${_i}=${no},`,"");if(function Sa(g=(0,P.z$)()){var d;return Gn(g)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Ye)&&"_self"!==te)return function Ic(g,d){const f=document.createElement("a");f.href=g,f.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(d||"",te),new ou(null);const it=window.open(d||"",te,ht);ee(it,g,"popup-blocked");try{it.focus()}catch(wn){}return new ou(it)}(d,te,So())})()}_openRedirect(d,f,y,T){var M=this;return(0,E.Z)(function*(){return yield M._originValidation(d),function vs(g){nn().location.href=g}(jl(d,f,y,vt(),T)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:T,promise:M}=this.eventManagers[f];return T?Promise.resolve(T):(X(M,"If manager is not set, promise should be"),M)}const y=this.initAndGetManager(d);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(d){var f=this;return(0,E.Z)(function*(){const y=yield function pm(g){return dh.apply(this,arguments)}(d),T=new Ts(d);return y.register("authEvent",M=>(ee(null==M?void 0:M.authEvent,d,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:T},f.iframes[d._key()]=y,T})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(gi,{type:gi},T=>{var M;const G=null===(M=null==T?void 0:T[0])||void 0===M?void 0:M[gi];void 0!==G&&f(!!G),be(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function lm(g){return Cs.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ki()||jt()||Gn()}}),this.cordovaResolver=ne(class mn{constructor(){this._redirectPersistence=hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xe}_initialize(d){var f=this;return(0,E.Z)(function*(){const y=d._key();let T=f.eventManagers.get(y);return T||(T=new Ih(d),f.eventManagers.set(y,T),f.attachCallbackListeners(d,T)),T})()}_openPopup(d){be(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,y,T){var M=this;return(0,E.Z)(function*(){!function vh(g){var d,f,y,T,M,G,te,Pe,Ye,ht;const it=la();ee("function"==typeof(null===(d=null==it?void 0:it.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(f=null==it?void 0:it.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(M=null===(T=null===(y=null==it?void 0:it.cordova)||void 0===y?void 0:y.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Pe=null===(te=null===(G=null==it?void 0:it.cordova)||void 0===G?void 0:G.plugins)||void 0===te?void 0:te.browsertab)||void 0===Pe?void 0:Pe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ht=null===(Ye=null==it?void 0:it.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ht?void 0:ht.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const G=yield M._initialize(d);yield G.initialized(),G.resetRedirect(),function Oo(){Wi.clear()}(),yield M._originValidation(d);const te=function Tc(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:ym(),postBody:null,tenantId:g.tenantId,error:me(g,"no-auth-event")}}(d,y,T);yield function Cc(g,d){return to()._set(Zi(g),d)}(d,te);const Pe=yield function Wl(g,d,f){return Lo.apply(this,arguments)}(d,te,f),Ye=yield function uu(g){const{cordova:d}=la();return new Promise(f=>{d.plugins.browsertab.isAvailable(y=>{let T=null;y?d.plugins.browsertab.openUrl(g):T=d.InAppBrowser.open(g,function Vs(g=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(T)})})}(Pe);return function tp(g,d,f){return Vo.apply(this,arguments)}(d,G,Ye)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function _h(g){return mi.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:y,handleOpenURL:T,BuildInfo:M}=la(),G=setTimeout((0,E.Z)(function*(){yield wh(d),f.onEvent(rp())}),500),te=function(){var ht=(0,E.Z)(function*(it){clearTimeout(G);const wn=yield wh(d);let _i=null;wn&&(null==it?void 0:it.url)&&(_i=function np(g,d){var f,y;const T=function da(g){const d=ha(g),f=d.link?decodeURIComponent(d.link):void 0,y=ha(f).link,T=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return ha(T).link||T||y||f||g}(d);if(T.includes("/__/auth/callback")){const M=ha(T),G=M.firebaseError?function Ac(g){try{return JSON.parse(g)}catch(d){return null}}(decodeURIComponent(M.firebaseError)):null,te=null===(y=null===(f=null==G?void 0:G.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],Pe=te?me(te):null;return Pe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:T,postBody:null}}return null}(wn,it.url)),f.onEvent(_i||rp())});return function(wn){return ht.apply(this,arguments)}}();void 0!==y&&"function"==typeof y.subscribe&&y.subscribe(null,te);const Pe=T,Ye=`${M.packageName.toLowerCase()}://`;la().handleOpenURL=function(){var ht=(0,E.Z)(function*(it){if(it.toLowerCase().startsWith(Ye)&&te({url:it}),"function"==typeof Pe)try{Pe(it)}catch(wn){console.error(wn)}});return function(it){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=hi,this._completeRedirectFn=Xe}_initialize(d){var f=this;return(0,E.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,y,T){var M=this;return(0,E.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(d,f,y,T)})()}_openRedirect(d,f,y,T){var M=this;return(0,E.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(d,f,y,T)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Bo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,E.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Tr(){return fa.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function sp(g){return g.unwrap()}function pa(g){return td(g)}function td(g){const{_tokenResponse:d}=g instanceof P.ZR?g.customData:g;if(!d)return null;if(!(g instanceof P.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Dr.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let y;switch(f){case"google.com":y=ea;break;case"facebook.com":y=js;break;case"github.com":y=yl;break;case"twitter.com":y=Oa;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:G,pendingToken:te,nonce:Pe}=d;return M||G||T||te?te?f.startsWith("saml.")?Do._create(f,te):Vi._fromParams({providerId:f,signInMethod:f,pendingToken:te,idToken:T,accessToken:M}):new wo(f).credential({idToken:T,accessToken:M,rawNonce:Pe}):null}return g instanceof P.ZR?y.credentialFromError(g):y.credentialFromResult(g)}function sr(g,d){return d.catch(f=>{throw f instanceof P.ZR&&function ed(g,d){var f;const y=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new Dm(g,function Wa(g,d){var f;const y=(0,P.m9)(g),T=d;return ee(d.customData.operationType,y,"argument-error"),ee(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),oa._fromError(y,T)}(g,d));else if(y){const T=td(d),M=d;T&&(M.credential=T,M.tenantId=y.tenantId||void 0,M.email=y.email||void 0,M.phoneNumber=y.phoneNumber||void 0)}}(g,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:pa(f),additionalUserInfo:hr(f),user:an.getOrCreate(T)}})}function ga(g,d){return ma.apply(this,arguments)}function ma(){return(ma=(0,E.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:y=>sr(g,f.confirm(y))}})).apply(this,arguments)}class Dm{constructor(d,f){this.resolver=f,this.auth=function Xl(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return sr(sp(this.auth),this.resolver.resolveSignIn(d))}}class an{constructor(d){this._delegate=d,this.multiFactor=function Al(g){const d=(0,P.m9)(g);return Ao.has(d)||Ao.set(d,$i._fromUser(d)),Ao.get(d)}(d)}static getOrCreate(d){return an.USER_MAP.has(d)||an.USER_MAP.set(d,new an(d)),an.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,E.Z)(function*(){return sr(f.auth,li(f._delegate,d))})()}linkWithPhoneNumber(d,f){var y=this;return(0,E.Z)(function*(){return ga(y.auth,function Xa(g,d,f){return Ds.apply(this,arguments)}(y._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,E.Z)(function*(){return sr(f.auth,function Ol(g,d,f){return pc.apply(this,arguments)}(f._delegate,d,Ss))})()}linkWithRedirect(d){var f=this;return(0,E.Z)(function*(){return yield gu(xe(f.auth)),function H(g,d,f){return function J(g,d,f){return Ce.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ss)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,E.Z)(function*(){return sr(f.auth,ds(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return ga(this.auth,function ah(g,d,f){return eu.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return sr(this.auth,function ch(g,d,f){return nu.apply(this,arguments)}(this._delegate,d,Ss))}reauthenticateWithRedirect(d){var f=this;return(0,E.Z)(function*(){return yield gu(xe(f.auth)),function b(g,d,f){return function x(g,d,f){return k.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ss)})()}sendEmailVerification(d){return function di(g,d){return rc.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,E.Z)(function*(){return yield function ta(g,d){return Qu.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function oc(g,d){return ac((0,P.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function wl(g,d){return ac((0,P.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Rl(g,d){return Po.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function sa(g,d){return sc.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Ga(g,d,f){return qa.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}an.USER_MAP=new WeakMap;const mu=ee;let Th=(()=>{class g{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=f.options;mu(T,"invalid-api-key",{appName:f.name}),mu(T,"invalid-api-key",{appName:f.name});const M="undefined"!=typeof window?Ss:void 0;this._delegate=y.initialize({options:{persistence:bm(T,f.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?an.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function on(g,d,f){const y=xe(g);ee(y._canInitEmulator,y,"emulator-config-failed"),ee(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const T=!!(null==f?void 0:f.disableWarnings),M=Xn(d),{host:G,port:te}=function rs(g){const d=Xn(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(y);if(T){const M=T[1];return{host:M,port:Nn(y.substr(M.length+1))}}{const[M,G]=y.split(":");return{host:M,port:Nn(G)}}}(d);y.config.emulator={url:`${M}//${G}${null===te?"":`:${te}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:G,port:te,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function bi(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,y)}applyActionCode(f){return function Xu(g,d){return Ie.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return xt(this._delegate,f)}confirmPasswordReset(f,y){return function ja(g,d,f){return Ju.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var T=this;return(0,E.Z)(function*(){return sr(T._delegate,function Co(g,d,f){return kr.apply(this,arguments)}(T._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ha(g,d){return gs.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function nc(g,d){const f=Us.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,E.Z)(function*(){mu(xc(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function qe(g,d){return Ke.apply(this,arguments)}(f._delegate,Ss);return y?sr(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function _m(g,d){xe(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,y,T){const{next:M,error:G,complete:te}=op(f,y,T);return this._delegate.onAuthStateChanged(M,G,te)}onIdTokenChanged(f,y,T){const{next:M,error:G,complete:te}=op(f,y,T);return this._delegate.onIdTokenChanged(M,G,te)}sendSignInLinkToEmail(f,y){return function tc(g,d,f){return Il.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function Ba(g,d,f){return Ua.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,E.Z)(function*(){let T;switch(function Dh(g,d){pu(Object.values(yi).includes(d),g,"invalid-persistence-type"),(0,P.b$)()?pu(d!==yi.SESSION,g,"unsupported-persistence-type"):(0,P.UG)()?pu(d===yi.NONE,g,"unsupported-persistence-type"):fu()?pu(d===yi.NONE||d===yi.LOCAL&&(0,P.hl)(),g,"unsupported-persistence-type"):pu(d===yi.NONE||fr(),g,"unsupported-persistence-type")}(y._delegate,f),f){case yi.SESSION:T=hi;break;case yi.LOCAL:T=(yield ne(ti)._isAvailable())?ti:qn;break;case yi.NONE:T=j;break;default:return be("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return sr(this._delegate,function Fa(g){return _l.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return sr(this._delegate,Cn(this._delegate,f))}signInWithCustomToken(f){return sr(this._delegate,function hs(g,d){return fs.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return sr(this._delegate,function ec(g,d,f){return Cn((0,P.m9)(g),Ku.credential(d,f))}(this._delegate,f,y))}signInWithEmailLink(f,y){return sr(this._delegate,function $a(g,d,f){return ps.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return ga(this._delegate,function Ir(g,d,f){return gn.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,E.Z)(function*(){return mu(xc(),y._delegate,"operation-not-supported-in-this-environment"),sr(y._delegate,function Ai(g,d,f){return uh.apply(this,arguments)}(y._delegate,f,Ss))})()}signInWithRedirect(f){var y=this;return(0,E.Z)(function*(){return mu(xc(),y._delegate,"operation-not-supported-in-this-environment"),yield gu(y._delegate),function mc(g,d,f){return function yc(g,d,f){return w.apply(this,arguments)}(g,d,f)}(y._delegate,f,Ss)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function pn(g,d){return To.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=yi,g})();function op(g,d,f){let y=g;"function"!=typeof g&&({next:y,error:d,complete:f}=g);const T=y;return{next:G=>T(G&&an.getOrCreate(G)),error:d,complete:f}}function bm(g,d){const f=function bh(g,d){const f=Jl();if(!f)return[];const y=ue(Yl,g,d);switch(f.getItem(y)){case yi.NONE:return[j];case yi.LOCAL:return[ti,hi];case yi.SESSION:return[hi];default:return[]}}(g,d);if("undefined"!=typeof self&&!f.includes(ti)&&f.push(ti),"undefined"!=typeof window)for(const y of[qn,hi])f.includes(y)||f.push(y);return f.includes(j)||f.push(j),f}class Ch{constructor(){this.providerId="phone",this._delegate=new Dr(sp(Y.Z.auth()))}static credential(d,f){return Dr.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Ch.PHONE_SIGN_IN_METHOD=Dr.PHONE_SIGN_IN_METHOD,Ch.PROVIDER_ID=Dr.PROVIDER_ID;const ap=ee;class up{constructor(d,f,y=Y.Z.app()){var T;ap(null===(T=y.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new oh(d,f,y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nd(g){g.INTERNAL.registerComponent(new ae.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new Th(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ku,FacebookAuthProvider:js,GithubAuthProvider:yl,GoogleAuthProvider:ea,OAuthProvider:wo,SAMLAuthProvider:Zr,PhoneAuthProvider:Ch,PhoneMultiFactorGenerator:Hl,RecaptchaVerifier:up,TwitterAuthProvider:Oa,Auth:Th,AuthCredential:Zt,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(at,Te,O)=>{O.d(Te,{y:()=>$});var E=O(2961),Y=O(727),P=O(8822),ce=O(4671);var ae=O(2416),pe=O(576),_e=O(2806);let $=(()=>{class Me{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const de=new Me;return de.source=this,de.operator=Ve,de}subscribe(Ve,de,Ee){const Je=function Qe(Me){return Me&&Me instanceof E.Lv||function Z(Me){return Me&&(0,pe.m)(Me.next)&&(0,pe.m)(Me.error)&&(0,pe.m)(Me.complete)}(Me)&&(0,Y.Nn)(Me)}(Ve)?Ve:new E.Hp(Ve,de,Ee);return(0,_e.x)(()=>{const{operator:Ge,source:be}=this;Je.add(Ge?Ge.call(Je,be):be?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(de){Ve.error(de)}}forEach(Ve,de){return new(de=U(de))((Ee,Je)=>{const Ge=new E.Hp({next:be=>{try{Ve(be)}catch(me){Je(me),Ge.unsubscribe()}},error:Je,complete:Ee});this.subscribe(Ge)})}_subscribe(Ve){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Ve)}[P.L](){return this}pipe(...Ve){return function fe(Me){return 0===Me.length?ce.y:1===Me.length?Me[0]:function(Ve){return Me.reduce((de,Ee)=>Ee(de),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=U(Ve))((de,Ee)=>{let Je;this.subscribe(Ge=>Je=Ge,Ge=>Ee(Ge),()=>de(Je))})}}return Me.create=Oe=>new Me(Oe),Me})();function U(Me){var Oe;return null!==(Oe=null!=Me?Me:ae.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(at,Te,O)=>{O.d(Te,{x:()=>ae});var E=O(8306),Y=O(727);const ce=(0,O(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Q=O(8737),fe=O(2806);let ae=(()=>{class _e extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Z=new pe(this,this);return Z.operator=U,Z}_throwIfClosed(){if(this.closed)throw new ce}next(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(U)}})}error(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Z}=this;for(;Z.length;)Z.shift().error(U)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Z,isStopped:Qe,observers:Me}=this;return Z||Qe?Y.Lc:(this.currentObservers=null,Me.push(U),new Y.w0(()=>{this.currentObservers=null,(0,Q.P)(Me,U)}))}_checkFinalizedStatuses(U){const{hasError:Z,thrownError:Qe,isStopped:Me}=this;Z?U.error(Qe):Me&&U.complete()}asObservable(){const U=new E.y;return U.source=this,U}}return _e.create=($,U)=>new pe($,U),_e})();class pe extends ae{constructor($,U){super(),this.destination=$,this.source=U}next($){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Z||Z.call(U,$)}error($){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Z||Z.call(U,$)}complete(){var $,U;null===(U=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===U||U.call($)}_subscribe($){var U,Z;return null!==(Z=null===(U=this.source)||void 0===U?void 0:U.subscribe($))&&void 0!==Z?Z:Y.Lc}}},2961:(at,Te,O)=>{O.d(Te,{Hp:()=>Ve,Lv:()=>Z});var E=O(576),Y=O(727),P=O(2416),ce=O(7849);function Q(){}const fe=_e("C",void 0,void 0);function _e(be,me,ve){return{kind:be,value:me,error:ve}}var $=O(3410),U=O(2806);class Z extends Y.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,Y.Nn)(me)&&me.add(this)):this.destination=Ge}static create(me,ve,He){return new Ve(me,ve,He)}next(me){this.isStopped?Je(function pe(be){return _e("N",be,void 0)}(me),this):this._next(me)}error(me){this.isStopped?Je(function ae(be){return _e("E",void 0,be)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?Je(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Me(be,me){return Qe.call(be,me)}class Oe{constructor(me){this.partialObserver=me}next(me){const{partialObserver:ve}=this;if(ve.next)try{ve.next(me)}catch(He){de(He)}}error(me){const{partialObserver:ve}=this;if(ve.error)try{ve.error(me)}catch(He){de(He)}else de(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(ve){de(ve)}}}class Ve extends Z{constructor(me,ve,He){let Be;if(super(),(0,E.m)(me)||!me)Be={next:null!=me?me:void 0,error:null!=ve?ve:void 0,complete:null!=He?He:void 0};else{let ee;this&&P.v.useDeprecatedNextContext?(ee=Object.create(me),ee.unsubscribe=()=>this.unsubscribe(),Be={next:me.next&&Me(me.next,ee),error:me.error&&Me(me.error,ee),complete:me.complete&&Me(me.complete,ee)}):Be=me}this.destination=new Oe(Be)}}function de(be){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(be):(0,ce.h)(be)}function Je(be,me){const{onStoppedNotification:ve}=P.v;ve&&$.z.setTimeout(()=>ve(be,me))}const Ge={closed:!0,next:Q,error:function Ee(be){throw be},complete:Q}},727:(at,Te,O)=>{O.d(Te,{Lc:()=>fe,w0:()=>Q,Nn:()=>ae});var E=O(576);const P=(0,O(3888).d)(_e=>function(U){_e(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Z,Qe)=>`${Qe+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ce=O(8737);class Q{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Me of U)Me.remove(this);else U.remove(this);const{initialTeardown:Z}=this;if((0,E.m)(Z))try{Z()}catch(Me){$=Me instanceof P?Me.errors:[Me]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const Me of Qe)try{pe(Me)}catch(Oe){$=null!=$?$:[],Oe instanceof P?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new P($)}}add($){var U;if($&&$!==this)if(this.closed)pe($);else{if($ instanceof Q){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push($)}}_hasParent($){const{_parentage:U}=this;return U===$||Array.isArray(U)&&U.includes($)}_addParent($){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push($),U):U?[U,$]:$}_removeParent($){const{_parentage:U}=this;U===$?this._parentage=null:Array.isArray(U)&&(0,ce.P)(U,$)}remove($){const{_finalizers:U}=this;U&&(0,ce.P)(U,$),$ instanceof Q&&$._removeParent(this)}}Q.EMPTY=(()=>{const _e=new Q;return _e.closed=!0,_e})();const fe=Q.EMPTY;function ae(_e){return _e instanceof Q||_e&&"closed"in _e&&(0,E.m)(_e.remove)&&(0,E.m)(_e.add)&&(0,E.m)(_e.unsubscribe)}function pe(_e){(0,E.m)(_e)?_e():_e.unsubscribe()}},2416:(at,Te,O)=>{O.d(Te,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Te,O)=>{O.d(Te,{E:()=>Y});const Y=new(O(8306).y)(Q=>Q.complete())},8996:(at,Te,O)=>{O.d(Te,{D:()=>me});var E=O(8421),Y=O(5363),P=O(9468),fe=O(8306),pe=O(2202),_e=O(576),$=O(9672);function Z(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,$.f)(Be,He,()=>{const ee=ve[Symbol.asyncIterator]();(0,$.f)(Be,He,()=>{ee.next().then(q=>{q.done?Be.complete():Be.next(q.value)})},0,!0)})})}var Qe=O(3670),Me=O(8239),Oe=O(1144),Ve=O(6495),de=O(2206),Ee=O(4532),Je=O(3260);function me(ve,He){return He?function be(ve,He){if(null!=ve){if((0,Qe.c)(ve))return function ce(ve,He){return(0,E.Xf)(ve).pipe((0,P.R)(He),(0,Y.Q)(He))}(ve,He);if((0,Oe.z)(ve))return function ae(ve,He){return new fe.y(Be=>{let ee=0;return He.schedule(function(){ee===ve.length?Be.complete():(Be.next(ve[ee++]),Be.closed||this.schedule())})})}(ve,He);if((0,Me.t)(ve))return function Q(ve,He){return(0,E.Xf)(ve).pipe((0,P.R)(He),(0,Y.Q)(He))}(ve,He);if((0,de.D)(ve))return Z(ve,He);if((0,Ve.T)(ve))return function U(ve,He){return new fe.y(Be=>{let ee;return(0,$.f)(Be,He,()=>{ee=ve[pe.h](),(0,$.f)(Be,He,()=>{let q,X;try{({value:q,done:X}=ee.next())}catch(le){return void Be.error(le)}X?Be.complete():Be.next(q)},0,!0)}),()=>(0,_e.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,He);if((0,Je.L)(ve))return function Ge(ve,He){return Z((0,Je.Q)(ve),He)}(ve,He)}throw(0,Ee.z)(ve)}(ve,He):(0,E.Xf)(ve)}},8421:(at,Te,O)=>{O.d(Te,{Xf:()=>Qe});var E=O(655),Y=O(1144),P=O(8239),ce=O(8306),Q=O(3670),fe=O(2206),ae=O(4532),pe=O(6495),_e=O(3260),$=O(576),U=O(7849),Z=O(8822);function Qe(be){if(be instanceof ce.y)return be;if(null!=be){if((0,Q.c)(be))return function Me(be){return new ce.y(me=>{const ve=be[Z.L]();if((0,$.m)(ve.subscribe))return ve.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,Y.z)(be))return function Oe(be){return new ce.y(me=>{for(let ve=0;ve<be.length&&!me.closed;ve++)me.next(be[ve]);me.complete()})}(be);if((0,P.t)(be))return function Ve(be){return new ce.y(me=>{be.then(ve=>{me.closed||(me.next(ve),me.complete())},ve=>me.error(ve)).then(null,U.h)})}(be);if((0,fe.D)(be))return Ee(be);if((0,pe.T)(be))return function de(be){return new ce.y(me=>{for(const ve of be)if(me.next(ve),me.closed)return;me.complete()})}(be);if((0,_e.L)(be))return function Je(be){return Ee((0,_e.Q)(be))}(be)}throw(0,ae.z)(be)}function Ee(be){return new ce.y(me=>{(function Ge(be,me){var ve,He,Be,ee;return(0,E.mG)(this,void 0,void 0,function*(){try{for(ve=(0,E.KL)(be);!(He=yield ve.next()).done;)if(me.next(He.value),me.closed)return}catch(q){Be={error:q}}finally{try{He&&!He.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(Be)throw Be.error}}me.complete()})})(be,me).catch(ve=>me.error(ve))})}},6451:(at,Te,O)=>{O.d(Te,{T:()=>fe});var E=O(6131),Y=O(8421),P=O(515),ce=O(7669),Q=O(8996);function fe(...ae){const pe=(0,ce.yG)(ae),_e=(0,ce._6)(ae,1/0),$=ae;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,E.J)(_e)((0,Q.D)($,pe)):P.E}},5403:(at,Te,O)=>{O.d(Te,{x:()=>Y});var E=O(2961);function Y(ce,Q,fe,ae,pe){return new P(ce,Q,fe,ae,pe)}class P extends E.Lv{constructor(Q,fe,ae,pe,_e,$){super(Q),this.onFinalize=_e,this.shouldUnsubscribe=$,this._next=fe?function(U){try{fe(U)}catch(Z){Q.error(Z)}}:super._next,this._error=pe?function(U){try{pe(U)}catch(Z){Q.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(U){Q.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Q;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(Q=this.onFinalize)||void 0===Q||Q.call(this))}}}},4004:(at,Te,O)=>{O.d(Te,{U:()=>P});var E=O(4482),Y=O(5403);function P(ce,Q){return(0,E.e)((fe,ae)=>{let pe=0;fe.subscribe((0,Y.x)(ae,_e=>{ae.next(ce.call(Q,_e,pe++))}))})}},6131:(at,Te,O)=>{O.d(Te,{J:()=>$});var E=O(4004),Y=O(8421),P=O(4482),ce=O(9672),Q=O(5403),ae=O(576);function pe(U,Z,Qe=1/0){return(0,ae.m)(Z)?pe((Me,Oe)=>(0,E.U)((Ve,de)=>Z(Me,Ve,Oe,de))((0,Y.Xf)(U(Me,Oe))),Qe):("number"==typeof Z&&(Qe=Z),(0,P.e)((Me,Oe)=>function fe(U,Z,Qe,Me,Oe,Ve,de,Ee){const Je=[];let Ge=0,be=0,me=!1;const ve=()=>{me&&!Je.length&&!Ge&&Z.complete()},He=ee=>Ge<Me?Be(ee):Je.push(ee),Be=ee=>{Ve&&Z.next(ee),Ge++;let q=!1;(0,Y.Xf)(Qe(ee,be++)).subscribe((0,Q.x)(Z,X=>{null==Oe||Oe(X),Ve?He(X):Z.next(X)},()=>{q=!0},void 0,()=>{if(q)try{for(Ge--;Je.length&&Ge<Me;){const X=Je.shift();de?(0,ce.f)(Z,de,()=>Be(X)):Be(X)}ve()}catch(X){Z.error(X)}}))};return U.subscribe((0,Q.x)(Z,He,()=>{me=!0,ve()})),()=>{null==Ee||Ee()}}(Me,Oe,U,Qe)))}var _e=O(4671);function $(U=1/0){return pe(_e.y,U)}},5363:(at,Te,O)=>{O.d(Te,{Q:()=>ce});var E=O(9672),Y=O(4482),P=O(5403);function ce(Q,fe=0){return(0,Y.e)((ae,pe)=>{ae.subscribe((0,P.x)(pe,_e=>(0,E.f)(pe,Q,()=>pe.next(_e),fe),()=>(0,E.f)(pe,Q,()=>pe.complete(),fe),_e=>(0,E.f)(pe,Q,()=>pe.error(_e),fe)))})}},3099:(at,Te,O)=>{O.d(Te,{B:()=>fe});var E=O(8996),Y=O(5698),P=O(7579),ce=O(2961),Q=O(4482);function fe(pe={}){const{connector:_e=(()=>new P.x),resetOnError:$=!0,resetOnComplete:U=!0,resetOnRefCountZero:Z=!0}=pe;return Qe=>{let Me=null,Oe=null,Ve=null,de=0,Ee=!1,Je=!1;const Ge=()=>{null==Oe||Oe.unsubscribe(),Oe=null},be=()=>{Ge(),Me=Ve=null,Ee=Je=!1},me=()=>{const ve=Me;be(),null==ve||ve.unsubscribe()};return(0,Q.e)((ve,He)=>{de++,!Je&&!Ee&&Ge();const Be=Ve=null!=Ve?Ve:_e();He.add(()=>{de--,0===de&&!Je&&!Ee&&(Oe=ae(me,Z))}),Be.subscribe(He),Me||(Me=new ce.Hp({next:ee=>Be.next(ee),error:ee=>{Je=!0,Ge(),Oe=ae(be,$,ee),Be.error(ee)},complete:()=>{Ee=!0,Ge(),Oe=ae(be,U),Be.complete()}}),(0,E.D)(ve).subscribe(Me))})(Qe)}}function ae(pe,_e,...$){return!0===_e?(pe(),null):!1===_e?null:_e(...$).pipe((0,Y.q)(1)).subscribe(()=>pe())}},9468:(at,Te,O)=>{O.d(Te,{R:()=>Y});var E=O(4482);function Y(P,ce=0){return(0,E.e)((Q,fe)=>{fe.add(P.schedule(()=>Q.subscribe(fe),ce))})}},5698:(at,Te,O)=>{O.d(Te,{q:()=>ce});var E=O(515),Y=O(4482),P=O(5403);function ce(Q){return Q<=0?()=>E.E:(0,Y.e)((fe,ae)=>{let pe=0;fe.subscribe((0,P.x)(ae,_e=>{++pe<=Q&&(ae.next(_e),Q<=pe&&ae.complete())}))})}},4408:(at,Te,O)=>{O.d(Te,{o:()=>Q});var E=O(727);class Y extends E.w0{constructor(ae,pe){super()}schedule(ae,pe=0){return this}}const P={setInterval(fe,ae,...pe){const{delegate:_e}=P;return(null==_e?void 0:_e.setInterval)?_e.setInterval(fe,ae,...pe):setInterval(fe,ae,...pe)},clearInterval(fe){const{delegate:ae}=P;return((null==ae?void 0:ae.clearInterval)||clearInterval)(fe)},delegate:void 0};var ce=O(8737);class Q extends Y{constructor(ae,pe){super(ae,pe),this.scheduler=ae,this.work=pe,this.pending=!1}schedule(ae,pe=0){if(this.closed)return this;this.state=ae;const _e=this.id,$=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId($,_e,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId($,this.id,pe),this}requestAsyncId(ae,pe,_e=0){return P.setInterval(ae.flush.bind(ae,this),_e)}recycleAsyncId(ae,pe,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return pe;P.clearInterval(pe)}execute(ae,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ae,pe);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,pe){let $,_e=!1;try{this.work(ae)}catch(U){_e=!0,$=U||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ae,scheduler:pe}=this,{actions:_e}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(_e,this),null!=ae&&(this.id=this.recycleAsyncId(pe,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Te,O)=>{O.d(Te,{v:()=>P});var E=O(6063);class Y{constructor(Q,fe=Y.now){this.schedulerActionCtor=Q,this.now=fe}schedule(Q,fe=0,ae){return new this.schedulerActionCtor(this,Q).schedule(ae,fe)}}Y.now=E.l.now;class P extends Y{constructor(Q,fe=Y.now){super(Q,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Q){const{actions:fe}=this;if(this._active)return void fe.push(Q);let ae;this._active=!0;do{if(ae=Q.execute(Q.state,Q.delay))break}while(Q=fe.shift());if(this._active=!1,ae){for(;Q=fe.shift();)Q.unsubscribe();throw ae}}}},4986:(at,Te,O)=>{O.d(Te,{z:()=>P});var E=O(4408);const P=new(O(7565).v)(E.o)},6063:(at,Te,O)=>{O.d(Te,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(at,Te,O)=>{O.d(Te,{z:()=>E});const E={setTimeout(Y,P,...ce){const{delegate:Q}=E;return(null==Q?void 0:Q.setTimeout)?Q.setTimeout(Y,P,...ce):setTimeout(Y,P,...ce)},clearTimeout(Y){const{delegate:P}=E;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(at,Te,O)=>{O.d(Te,{h:()=>Y});const Y=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Te,O)=>{O.d(Te,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Te,O)=>{O.d(Te,{_6:()=>fe,yG:()=>Q});var E=O(576);function P(ae){return ae[ae.length-1]}function Q(ae){return function Y(ae){return ae&&(0,E.m)(ae.schedule)}(P(ae))?ae.pop():void 0}function fe(ae,pe){return"number"==typeof P(ae)?ae.pop():pe}},8737:(at,Te,O)=>{function E(Y,P){if(Y){const ce=Y.indexOf(P);0<=ce&&Y.splice(ce,1)}}O.d(Te,{P:()=>E})},3888:(at,Te,O)=>{function E(Y){const ce=Y(Q=>{Error.call(Q),Q.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}O.d(Te,{d:()=>E})},2806:(at,Te,O)=>{O.d(Te,{x:()=>P,O:()=>ce});var E=O(2416);let Y=null;function P(Q){if(E.v.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),Q(),fe){const{errorThrown:ae,error:pe}=Y;if(Y=null,ae)throw pe}}else Q()}function ce(Q){E.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Q)}},9672:(at,Te,O)=>{function E(Y,P,ce,Q=0,fe=!1){const ae=P.schedule(function(){ce(),fe?Y.add(this.schedule(null,Q)):this.unsubscribe()},Q);if(Y.add(ae),!fe)return ae}O.d(Te,{f:()=>E})},4671:(at,Te,O)=>{function E(Y){return Y}O.d(Te,{y:()=>E})},1144:(at,Te,O)=>{O.d(Te,{z:()=>E});const E=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(at,Te,O)=>{O.d(Te,{D:()=>Y});var E=O(576);function Y(P){return Symbol.asyncIterator&&(0,E.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(at,Te,O)=>{function E(Y){return"function"==typeof Y}O.d(Te,{m:()=>E})},3670:(at,Te,O)=>{O.d(Te,{c:()=>P});var E=O(8822),Y=O(576);function P(ce){return(0,Y.m)(ce[E.L])}},6495:(at,Te,O)=>{O.d(Te,{T:()=>P});var E=O(2202),Y=O(576);function P(ce){return(0,Y.m)(null==ce?void 0:ce[E.h])}},8239:(at,Te,O)=>{O.d(Te,{t:()=>Y});var E=O(576);function Y(P){return(0,E.m)(null==P?void 0:P.then)}},3260:(at,Te,O)=>{O.d(Te,{Q:()=>P,L:()=>ce});var E=O(655),Y=O(576);function P(Q){return(0,E.FC)(this,arguments,function*(){const ae=Q.getReader();try{for(;;){const{value:pe,done:_e}=yield(0,E.qq)(ae.read());if(_e)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(pe)}}finally{ae.releaseLock()}})}function ce(Q){return(0,Y.m)(null==Q?void 0:Q.getReader)}},4482:(at,Te,O)=>{O.d(Te,{e:()=>P});var E=O(576);function P(ce){return Q=>{if(function Y(ce){return(0,E.m)(null==ce?void 0:ce.lift)}(Q))return Q.lift(function(fe){try{return ce(fe,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(at,Te,O)=>{O.d(Te,{h:()=>P});var E=O(2416),Y=O(3410);function P(ce){Y.z.setTimeout(()=>{const{onUnhandledError:Q}=E.v;if(!Q)throw ce;Q(ce)})}},4532:(at,Te,O)=>{function E(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{z:()=>E})},655:(at,Te,O)=>{function ce(q,X){var le={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&X.indexOf(ne)<0&&(le[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(ne=Object.getOwnPropertySymbols(q);Se<ne.length;Se++)X.indexOf(ne[Se])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Se])&&(le[ne[Se]]=q[ne[Se]])}return le}function pe(q,X,le,ne){return new(le||(le=Promise))(function(re,vt){function Gt(pt){try{st(ne.next(pt))}catch(en){vt(en)}}function bn(pt){try{st(ne.throw(pt))}catch(en){vt(en)}}function st(pt){pt.done?re(pt.value):function Se(re){return re instanceof le?re:new le(function(vt){vt(re)})}(pt.value).then(Gt,bn)}st((ne=ne.apply(q,X||[])).next())})}function de(q){return this instanceof de?(this.v=q,this):new de(q)}function Ee(q,X,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,ne=le.apply(q,X||[]),re=[];return Se={},vt("next"),vt("throw"),vt("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function vt(tn){ne[tn]&&(Se[tn]=function(ai){return new Promise(function(Kt,Ri){re.push([tn,ai,Kt,Ri])>1||Gt(tn,ai)})})}function Gt(tn,ai){try{!function bn(tn){tn.value instanceof de?Promise.resolve(tn.value.v).then(st,pt):en(re[0][2],tn)}(ne[tn](ai))}catch(Kt){en(re[0][3],Kt)}}function st(tn){Gt("next",tn)}function pt(tn){Gt("throw",tn)}function en(tn,ai){tn(ai),re.shift(),re.length&&Gt(re[0][0],re[0][1])}}function Ge(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,X=q[Symbol.asyncIterator];return X?X.call(q):(q=function Z(q){var X="function"==typeof Symbol&&Symbol.iterator,le=X&&q[X],ne=0;if(le)return le.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),le={},ne("next"),ne("throw"),ne("return"),le[Symbol.asyncIterator]=function(){return this},le);function ne(re){le[re]=q[re]&&function(vt){return new Promise(function(Gt,bn){!function Se(re,vt,Gt,bn){Promise.resolve(bn).then(function(st){re({value:st,done:Gt})},vt)}(Gt,bn,(vt=q[re](vt)).done,vt.value)})}}}O.d(Te,{_T:()=>ce,mG:()=>pe,qq:()=>de,FC:()=>Ee,KL:()=>Ge})},5e3:(at,Te,O)=>{O.d(Te,{AFp:()=>Pf,ip1:()=>F_,CZH:()=>L_,hGG:()=>pI,sBO:()=>CD,_Vd:()=>wf,EJc:()=>lD,SBq:()=>Vu,qLn:()=>sr,OlP:()=>En,zs3:()=>fn,ZZ4:()=>J_,aQg:()=>X_,soG:()=>B_,h0i:()=>$d,R0b:()=>es,FiY:()=>hn,Lbi:()=>GE,g9A:()=>HE,Qsj:()=>Df,FYo:()=>y_,JOm:()=>te,Rgc:()=>Uu,dDg:()=>yD,q4F:()=>__,GfV:()=>go,s_b:()=>Zo,ifc:()=>Ft,eFA:()=>eI,G48:()=>TD,X6Q:()=>$_,_c5:()=>fI,VLi:()=>_b,zSh:()=>qc,wAp:()=>mt,vHH:()=>Oe,cg1:()=>Fu,kL8:()=>dg,dqk:()=>Pt,sIi:()=>Jh,QGY:()=>my,F4k:()=>f0,RDi:()=>Bi,AaK:()=>pe,TTD:()=>js,xp6:()=>_v,Xpm:()=>St,lG2:()=>jt,Yz7:()=>Kt,cJS:()=>qt,oAB:()=>K,Yjl:()=>cr,Y36:()=>fo,_UZ:()=>zp,qZA:()=>Sd,TgZ:()=>Wo,LFG:()=>H,$8M:()=>Ka,ALo:()=>gE,lcZ:()=>mE,xi3:()=>Fg,Q6J:()=>Mu,YNc:()=>oy,_uU:()=>Ny,Oqu:()=>Ry,hij:()=>ig});var E=O(7579),Y=O(727),P=O(8306),ce=O(6451),Q=O(3099);function fe(r){for(let i in r)if(r[i]===fe)return i;throw Error("Could not find renamed property on target object.")}function pe(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(pe).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function _e(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const $=fe({__forward_ref__:fe});function U(r){return r.__forward_ref__=U,r.toString=function(){return pe(this())},r}function Z(r){return function Qe(r){return"function"==typeof r&&r.hasOwnProperty($)&&r.__forward_ref__===U}(r)?r():r}class Oe extends Error{constructor(i,o){super(function Ve(r,i){return`NG0${Math.abs(r)}${i?": "+i:""}`}(i,o)),this.code=i}}function de(r){return"string"==typeof r?r:null==r?"":String(r)}function Ee(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():de(r)}function me(r,i){const o=i?` in ${i}`:"";throw new Oe(-201,`No provider for ${Ee(r)} found${o}`)}function st(r,i){null==r&&function pt(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function Kt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function qt(r){return{providers:r.providers||[],imports:r.imports||[]}}function kt(r){return Yn(r,wi)||Yn(r,Pi)}function Yn(r,i){return r.hasOwnProperty(i)?r[i]:null}function yr(r){return r&&(r.hasOwnProperty(_r)||r.hasOwnProperty(Oi))?r[_r]:null}const wi=fe({\u0275prov:fe}),_r=fe({\u0275inj:fe}),Pi=fe({ngInjectableDef:fe}),Oi=fe({ngInjectorDef:fe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Mr;function Fn(r){const i=Mr;return Mr=r,i}function Wr(r,i,o){const u=kt(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&ut.Optional?null:void 0!==i?i:void me(pe(r),"Injector")}function dn(r){return{toString:r}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),Ft=(()=>{return(r=Ft||(Ft={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Ft;var r})();const rt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,Qn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=rt||"undefined"!=typeof global&&global||yt||Qn,Jn={},ct=[],ur=fe({\u0275cmp:fe}),Mt=fe({\u0275dir:fe}),ze=fe({\u0275pipe:fe}),we=fe({\u0275mod:fe}),Ze=fe({\u0275fac:fe}),lt=fe({__NG_ELEMENT_ID__:fe});let Nt=0;function St(r){return dn(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||ct,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Ft.Emulated,id:"c",styles:r.styles||ct,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,h=r.features,m=r.pipes;return u.id+=Nt++,u.inputs=gt(r.inputs,o),u.outputs=gt(r.outputs),h&&h.forEach(v=>v(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(j):null,u})}function L(r){return Lt(r)||function _n(r){return r[Mt]||null}(r)}function j(r){return function Ct(r){return r[ze]||null}(r)}const ue={};function K(r){return dn(()=>{const i={type:r.type,bootstrap:r.bootstrap||ct,declarations:r.declarations||ct,imports:r.imports||ct,exports:r.exports||ct,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ue[r.id]=r.type),i})}function gt(r,i){if(null==r)return Jn;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,i&&(i[c]=h)}return o}const jt=St;function cr(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Lt(r){return r[ur]||null}function sn(r,i){const o=r[we]||null;if(!o&&!0===i)throw new Error(`Type ${pe(r)} does not have '\u0275mod' property.`);return o}function ci(r){return Array.isArray(r)&&"object"==typeof r[1]}function Kr(r){return Array.isArray(r)&&!0===r[1]}function hl(r){return 0!=(8&r.flags)}function os(r){return 2==(2&r.flags)}function Na(r){return 1==(1&r.flags)}function Nr(r){return null!==r.template}function Jd(r){return 0!=(512&r[2])}function Rr(r,i){return r.hasOwnProperty(Ze)?r[Ze]:null}class wo{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function js(){return ea}function ea(r){return r.type.prototype.ngOnChanges&&(r.setInput=zf),yl}function yl(){const r=cs(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Jn)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function zf(r,i,o,u){const c=cs(r)||function Zr(r,i){return r[Do]=i}(r,{previous:Jn,current:null}),h=c.current||(c.current={}),m=c.previous,v=this.declaredInputs[o],I=m[v];h[v]=new wo(I&&I.currentValue,i,m===Jn),r[u]=i}js.ngInherit=!0;const Do="__ngSimpleChanges__";function cs(r){return r[Do]||null}let Yu;function Bi(r){Yu=r}function un(r){return!!r.listen}const bo={createRenderer:(r,i)=>function ta(){return void 0!==Yu?Yu:"undefined"!=typeof document?document:void 0}()};function Qt(r){for(;Array.isArray(r);)r=r[0];return r}function lr(r,i){return Qt(i[r.index])}function na(r,i){return r.data[i]}function li(r,i){return r[i]}function dr(r,i){const o=i[r];return ci(o)?o:o[0]}function Ui(r){return 128==(128&r[2])}function Or(r,i){return null==i?null:r[i]}function hs(r){r[18]=0}function fs(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const dt={lFrame:qs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ja(){return dt.bindingsEnabled}function Ie(){return dt.lFrame.lView}function xt(){return dt.lFrame.tView}function pn(){let r=To();for(;null!==r&&64===r.type;)r=r.parent;return r}function To(){return dt.lFrame.currentTNode}function kr(r,i){const o=dt.lFrame;o.currentTNode=r,o.isParent=i}function ec(){return dt.lFrame.isParent}function $a(){return dt.isInCheckNoChangesMode}function ps(r){dt.isInCheckNoChangesMode=r}function nr(){const r=dt.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function gs(){return dt.lFrame.bindingIndex++}function qa(r,i){const o=dt.lFrame;o.bindingIndex=o.bindingRootIndex=r,ia(i)}function ia(r){dt.lFrame.currentDirectiveIndex=r}function oc(r){dt.lFrame.currentQueryIndex=r}function wl(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function ac(r,i,o){if(o&ut.SkipSelf){let c=i,h=r;for(;!(c=c.parent,null!==c||o&ut.Host||(c=wl(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;i=c,r=h}const u=dt.lFrame=Dl();return u.currentTNode=i,u.lView=r,!0}function Gs(r){const i=Dl(),o=r[1];dt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Dl(){const r=dt.lFrame,i=null===r?null:r.child;return null===i?qs(r):i}function qs(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function bl(){const r=dt.lFrame;return dt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Tl=bl;function Ws(){const r=bl();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function hr(){return dt.lFrame.selectedIndex}function ys(r){dt.lFrame.selectedIndex=r}function ji(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:S}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),I&&(r.viewHooks||(r.viewHooks=[])).push(-o,I),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=S&&(r.destroyHooks||(r.destroyHooks=[])).push(o,S)}}function oa(r,i,o){Cl(r,i,3,o)}function Wa(r,i,o,u){(3&r[2])===o&&Cl(r,i,o,u)}function Pn(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Cl(r,i,o,u){const h=null!=u?u:-1,m=i.length-1;let v=0;for(let I=void 0!==u?65535&r[18]:0;I<m;I++)if("number"==typeof i[I+1]){if(v=i[I],null!=u&&v>=u)break}else i[I]<0&&(r[18]+=65536),(v<h||-1==h)&&(Kf(r,o,i,I),r[18]=(4294901760&r[18])+I+2),I++}function Kf(r,i,o,u){const c=o[u]<0,h=o[u+1],v=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class Ao{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Ti(r,i,o){const u=un(r);let c=0;for(;c<o.length;){const h=o[c];if("number"==typeof h){if(0!==h)break;c++;const m=o[c++],v=o[c++],I=o[c++];u?r.setAttribute(i,v,I,m):i.setAttributeNS(m,v,I)}else{const m=h,v=o[++c];_s(m)?u&&r.setProperty(i,m,v):u?r.setAttribute(i,m,v):i.setAttribute(m,v),c++}}return c}function hi(r){return 3===r||4===r||6===r}function _s(r){return 64===r.charCodeAt(0)}function An(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||So(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function So(r,i,o,u,c){let h=0,m=r.length;if(-1===i)m=-1;else for(;h<r.length;){const v=r[h++];if("number"==typeof v){if(v===i){m=-1;break}if(v>i){m=h-1;break}}}for(;h<r.length;){const v=r[h];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==m&&(r.splice(m,0,i),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function xl(r){return-1!==r}function nn(r){return 32767&r}function Qr(r,i){let o=function vs(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let fi=!0;function Ci(r){const i=fi;return fi=r,i}let Nl=0;function Mo(r,i){const o=rr(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Xr(u.data,r),Xr(i,null),Xr(u.blueprint,null));const c=pi(r,i),h=r.injectorIndex;if(xl(c)){const m=nn(c),v=Qr(c,i),I=v[1].data;for(let C=0;C<8;C++)i[h+C]=v[m+C]|I[m+C]}return i[h+8]=c,h}function Xr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function rr(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function pi(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const h=c[1],m=h.type;if(u=2===m?h.declTNode:1===m?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Ks(r,i,o){!function xo(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(lt)&&(u=o[lt]),null==u&&(u=o[lt]=Nl++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Fr(r,i,o){if(o&ut.Optional)return r;me(i,"NodeInjector")}function No(r,i,o,u){if(o&ut.Optional&&void 0===u&&(u=null),0==(o&(ut.Self|ut.Host))){const c=r[9],h=Fn(void 0);try{return c?c.get(i,u,o&ut.Optional):Wr(i,u,o&ut.Optional)}finally{Fn(h)}}return Fr(u,i,o)}function ei(r,i,o,u=ut.Default,c){if(null!==r){const h=function Et(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(lt)?r[lt]:void 0;return"number"==typeof i?i>=0?255&i:hc:i}(o);if("function"==typeof h){if(!ac(i,r,u))return u&ut.Host?Fr(c,o,u):No(i,o,u,c);try{const m=h(u);if(null!=m||u&ut.Optional)return m;me(o)}finally{Tl()}}else if("number"==typeof h){let m=null,v=rr(r,i),I=-1,C=u&ut.Host?i[16][6]:null;for((-1===v||u&ut.SkipSelf)&&(I=-1===v?pi(r,i):i[v+8],-1!==I&&za(u,!1)?(m=i[1],v=nn(I),i=Qr(I,i)):v=-1);-1!==v;){const S=i[1];if(Zs(h,v,S.data)){const R=Es(v,i,o,m,u,C);if(R!==It)return R}I=i[v+8],-1!==I&&za(u,i[1].data[v+8]===C)&&Zs(h,v,i)?(m=S,v=nn(I),i=Qr(I,i)):v=-1}}}return No(i,o,u,c)}const It={};function hc(){return new vr(pn(),Ie())}function Es(r,i,o,u,c,h){const m=i[1],v=m.data[r+8],S=function We(r,i,o,u,c){const h=r.providerIndexes,m=i.data,v=1048575&h,I=r.directiveStart,S=h>>20,V=c?v+S:r.directiveEnd;for(let W=u?v:v+S;W<V;W++){const ge=m[W];if(W<I&&o===ge||W>=I&&ge.type===o)return W}if(c){const W=m[I];if(W&&Nr(W)&&W.type===o)return I}return null}(v,m,o,null==u?os(v)&&fi:u!=m&&0!=(3&v.type),c&ut.Host&&h===v);return null!==S?ti(i,m,S,v):It}function ti(r,i,o,u){let c=r[o];const h=i.data;if(function Al(r){return r instanceof Ao}(c)){const m=c;m.resolving&&function Je(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${r}${o}`)}(Ee(h[o]));const v=Ci(m.canSeeViewProviders);m.resolving=!0;const I=m.injectImpl?Fn(m.injectImpl):null;ac(r,u,ut.Default);try{c=r[o]=m.factory(void 0,h,r,u),i.firstCreatePass&&o>=u.directiveStart&&function lc(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=i.type.prototype;if(u){const m=ea(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],i)}finally{null!==I&&Fn(I),Ci(v),m.resolving=!1,Tl()}}return c}function Zs(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function za(r,i){return!(r&ut.Self||r&ut.Host&&i)}class vr{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return ei(this._tNode,this._lView,i,u,o)}}function Ka(r){return function he(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(hi(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===i)return o[c+1];c+=2}}}return null}(pn(),r)}const Ro="__parameters__";function Lr(r,i,o){return dn(()=>{const u=function On(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...h){if(this instanceof c)return u.apply(this,h),this;const m=new c(...h);return v.annotation=m,v;function v(I,C,S){const R=I.hasOwnProperty(Ro)?I[Ro]:Object.defineProperty(I,Ro,{value:[]})[Ro];for(;R.length<=S;)R.push(null);return(R[S]=R[S]||[]).push(m),I}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class En{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Kt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}function wr(r,i){r.forEach(o=>Array.isArray(o)?wr(o,i):i(o))}function Rl(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Po(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const Vr={},Qs="__NG_DI_FLAG__",Oo="ngTempTokenPath",ru=/\n/gm,yc="__source",w=fe({provide:String,useValue:fe});let b;function x(r){const i=b;return b=r,i}function k(r,i=ut.Default){if(void 0===b)throw new Oe(203,"");return null===b?Wr(r,void 0,i):b.get(r,i&ut.Optional?null:void 0,i)}function H(r,i=ut.Default){return(function $n(){return Mr}()||k)(Z(r),i)}const Ce=H;function qe(r){const i=[];for(let o=0;o<r.length;o++){const u=Z(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Oe(900,"");let c,h=ut.Default;for(let m=0;m<u.length;m++){const v=u[m],I=Xe(v);"number"==typeof I?-1===I?c=v.token:h|=I:c=v}i.push(H(c,h))}else i.push(H(u))}return i}function Ke(r,i){return r[Qs]=i,r.prototype[Qs]=i,r}function Xe(r){return r[Qs]}const hn=Ke(Lr("Optional"),8),Js=Ke(Lr("SkipSelf"),4),Bo="__ngContext__";function Tr(r,i){r[Bo]=i}function Zl(r){const i=function fa(r){return r[Bo]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function pa(r){return r.ngOriginalError}function td(r,...i){r.error(...i)}class sr{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=function ed(r){return r&&r.ngErrorLogger||td}(i);u(this._console,"ERROR",i),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&pa(i);for(;o&&pa(o);)o=pa(o);return o||null}}const up=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function f(r){return r instanceof Function?r():r}var te=(()=>((te=te||{})[te.Important=1]="Important",te[te.DashCase=2]="DashCase",te))();function Ye(r,i){return undefined(r,i)}function wn(r){const i=r[3];return Kr(i)?i[3]:i}function Mc(r){return Nc(r[13])}function yu(r){return Nc(r[4])}function Nc(r){for(;null!==r&&!Kr(r);)r=r[4];return r}function ro(r,i,o,u,c){if(null!=u){let h,m=!1;Kr(u)?h=u:ci(u)&&(m=!0,u=u[0]);const v=Qt(u);0===r&&null!==o?null==c?uv(i,o,v):_u(i,o,v,c||null,!0):1===r&&null!==o?_u(i,o,v,c||null,!0):2===r?function wt(r,i,o){const u=xh(r,i);u&&function wI(r,i,o,u){un(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,v,m):3===r&&i.destroyNode(v),null!=h&&function Cr(r,i,o,u,c){const h=o[7];h!==Qt(o)&&ro(i,r,u,h,c);for(let v=10;v<o.length;v++){const I=o[v];Ue(I[1],I,r,i,u,h)}}(i,r,h,o,c)}}function xs(r,i,o){if(un(r))return r.createElement(i,o);{const u=null!==o?function Zu(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===u?r.createElement(i):r.createElementNS(u,i)}}function Tm(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,fs(c,-1)),o.splice(u,1)}function fp(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Tm(c,u),i>0&&(r[o-1][4]=u[4]);const h=Po(r,10+i);!function lp(r,i){Ue(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Rc(r,i){if(!(256&i[2])){const o=i[11];un(o)&&o.destroyNode&&Ue(r,i,o,3,null,null),function sv(r){let i=r[13];if(!i)return Cm(r[1],r);for(;i;){let o=null;if(ci(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)ci(i)&&Cm(i[1],i),i=i[3];null===i&&(i=r),ci(i)&&Cm(i[1],i),o=i&&i[4]}i=o}}(i)}}function Cm(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function Am(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ao)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=c[h[m]],I=h[m+1];try{I.call(v)}finally{}}else try{h.call(c)}finally{}}}}(r,i),function II(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],v="function"==typeof m?m(i):Qt(i[m]),I=u[c=o[h+2]],C=o[h+3];"boolean"==typeof C?v.removeEventListener(o[h],I,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),h+=2}else{const m=u[c=o[h+1]];o[h].call(m)}if(null!==u){for(let h=c+1;h<u.length;h++)u[h]();i[7]=null}}(r,i),1===i[1].type&&un(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&Kr(i[3])){o!==i[3]&&Tm(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function ov(r,i,o){return function av(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===Ft.None||c===Ft.Emulated)return null}return lr(u,o)}(r,i.parent,o)}function _u(r,i,o,u,c){un(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function uv(r,i,o){un(r)?r.appendChild(i,o):i.appendChild(o)}function Sh(r,i,o,u,c){null!==u?_u(r,i,o,u,c):uv(r,i,o)}function xh(r,i){return un(r)?r.parentNode(i):i.parentNode}let pp=function _a(r,i,o){return 40&r.type?lr(r,o):null};function kn(r,i,o,u){const c=ov(r,u,i),h=i[11],v=function Pc(r,i,o){return pp(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let I=0;I<o.length;I++)Sh(h,c,o[I],v,!1);else Sh(h,c,o,v,!1)}function vu(r,i){if(null!==i){const o=i.type;if(3&o)return lr(i,r);if(4&o)return et(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return vu(r,u);{const c=r[i.index];return Kr(c)?et(-1,c):Qt(c)}}if(32&o)return Ye(i,r)()||Qt(r[i.index]);{const u=gp(r,i);return null!==u?Array.isArray(u)?u[0]:vu(wn(r[16]),u):vu(r,i.next)}}return null}function gp(r,i){return null!==i?r[16][6].projection[i.projection]:null}function et(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return vu(u,c)}return i[7]}function xm(r,i,o,u,c,h,m){for(;null!=o;){const v=u[o.index],I=o.type;if(m&&0===i&&(v&&Tr(Qt(v),u),o.flags|=4),64!=(64&o.flags))if(8&I)xm(r,i,o.child,u,c,h,!1),ro(i,r,c,v,h);else if(32&I){const C=Ye(o,u);let S;for(;S=C();)ro(i,r,c,S,h);ro(i,r,c,v,h)}else 16&I?Ae(r,i,u,o,c,h):ro(i,r,c,v,h);o=m?o.projectionNext:o.next}}function Ue(r,i,o,u,c,h){xm(o,u,r.firstChild,i,c,h,!1)}function Ae(r,i,o,u,c,h){const m=o[16],I=m[6].projection[u.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)ro(i,r,c,I[C],h);else xm(r,i,I,m[3],c,h,!0)}function lv(r,i,o){un(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function Mm(r,i,o){un(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function dv(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=i.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const hv="ng-template";function fv(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==dv(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function pv(r){return 4===r.type&&r.value!==hv}function UD(r,i,o){return i===(4!==r.type||o?r.value:hv)}function Qi(r,i,o){let u=4;const c=r.attrs||[],h=function mv(r){for(let i=0;i<r.length;i++)if(hi(r[i]))return i;return r.length}(c);let m=!1;for(let v=0;v<i.length;v++){const I=i[v];if("number"!=typeof I){if(!m)if(4&u){if(u=2|1&u,""!==I&&!UD(r,I,o)||""===I&&1===i.length){if(io(u))return!1;m=!0}}else{const C=8&u?I:i[++v];if(8&u&&null!==r.attrs){if(!fv(r.attrs,C,o)){if(io(u))return!1;m=!0}continue}const R=gv(8&u?"class":I,c,pv(r),o);if(-1===R){if(io(u))return!1;m=!0;continue}if(""!==C){let V;V=R>h?"":c[R+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==dv(W,C,0)||2&u&&C!==V){if(io(u))return!1;m=!0}}}}else{if(!m&&!io(u)&&!io(I))return!1;if(m&&io(I))continue;m=!1,u=I|1&u}}return io(u)||m}function io(r){return 0==(1&r)}function gv(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let h=!1;for(;c<i.length;){const m=i[c];if(m===r)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=i[++c];for(;"string"==typeof v;)v=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function zn(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function Ot(r,i,o=!1){for(let u=0;u<i.length;u++)if(Qi(r,i[u],o))return!0;return!1}function Nm(r,i){return r?":not("+i.trim()+")":i}function Oc(r){let i=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const v=r[++o];c+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!io(m)&&(i+=Nm(h,c),c=""),u=m,h=h||!io(u);o++}return""!==c&&(i+=Nm(h,c)),i}const je={};function _v(r){pr(xt(),Ie(),hr()+r,$a())}function pr(r,i,o,u){if(!u)if(3==(3&i[2])){const h=r.preOrderCheckHooks;null!==h&&oa(i,h,o)}else{const h=r.preOrderHooks;null!==h&&Wa(i,h,0,o)}ys(o)}function Ar(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1];if(-1!==h){const m=r.data[h];oc(c),m.contentQueries(2,i[h],h)}}}function Fh(r,i,o,u,c,h,m,v,I,C){const S=i.blueprint.slice();return S[0]=c,S[2]=140|u,hs(S),S[3]=S[15]=r,S[8]=o,S[10]=m||r&&r[10],S[11]=v||r&&r[11],S[12]=I||r&&r[12]||null,S[9]=C||r&&r[9]||null,S[6]=h,S[16]=2==i.type?r[16]:S,S}function Bc(r,i,o,u,c){let h=r.data[i];if(null===h)h=function Fm(r,i,o,u,c){const h=To(),m=ec(),I=r.data[i]=function Vm(r,i,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=I),null!==h&&(m?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(r,i,o,u,c),function rc(){return dt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const m=function Co(){const r=dt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return kr(h,!0),h}function fd(r,i,o,u){if(0===o)return-1;const c=i.length;for(let h=0;h<o;h++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Lh(r,i,o){Gs(i);try{const u=r.viewQuery;null!==u&&Bn(1,u,o);const c=r.template;null!==c&&Uc(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Ar(r,i),r.staticViewQueries&&Bn(2,r.viewQuery,o);const h=r.components;null!==h&&function SI(r,i){for(let o=0;o<i.length;o++)Lv(r,i[o])}(i,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Ws()}}function pd(r,i,o,u){const c=i[2];if(256==(256&c))return;Gs(i);const h=$a();try{hs(i),function Ha(r){return dt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Uc(r,i,o,2,u);const m=3==(3&c);if(!h)if(m){const C=r.preOrderCheckHooks;null!==C&&oa(i,C,null)}else{const C=r.preOrderHooks;null!==C&&Wa(i,C,0,null),Pn(i,0)}if(function OI(r){for(let i=Mc(r);null!==i;i=yu(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],h=c[3];0==(1024&c[2])&&fs(h,1),c[2]|=1024}}}(i),function Ap(r){for(let i=Mc(r);null!==i;i=yu(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Ui(u)&&pd(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Ar(r,i),!h)if(m){const C=r.contentCheckHooks;null!==C&&oa(i,C)}else{const C=r.contentHooks;null!==C&&Wa(i,C,1),Pn(i,1)}!function Ep(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)ys(~c);else{const h=c,m=o[++u],v=o[++u];qa(m,h),v(2,i[h])}}}finally{ys(-1)}}(r,i);const v=r.components;null!==v&&function AI(r,i){for(let o=0;o<i.length;o++)Gm(r,i[o])}(i,v);const I=r.viewQuery;if(null!==I&&Bn(2,I,u),!h)if(m){const C=r.viewCheckHooks;null!==C&&oa(i,C)}else{const C=r.viewHooks;null!==C&&Wa(i,C,2),Pn(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),h||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,fs(i[3],-1))}finally{Ws()}}function Du(r,i,o,u){const c=i[10],h=!$a(),m=function ds(r){return 4==(4&r[2])}(i);try{h&&!m&&c.begin&&c.begin(),m&&Lh(r,i,u),pd(r,i,o,u)}finally{h&&!m&&c.end&&c.end()}}function Uc(r,i,o,u,c){const h=hr(),m=2&u;try{ys(-1),m&&i.length>20&&pr(r,i,20,$a()),o(u,c)}finally{ys(h)}}function Ip(r,i,o){!ja()||(function MI(r,i,o,u){const c=o.directiveStart,h=o.directiveEnd;r.firstCreatePass||Mo(o,i),Tr(u,i);const m=o.initialInputs;for(let v=c;v<h;v++){const I=r.data[v],C=Nr(I);C&&Fv(i,o,I);const S=ti(i,r,v,o);Tr(S,i),null!==m&&RI(0,v-c,S,I,0,m),C&&(dr(o.index,i)[8]=S)}}(r,i,o,lr(o,i)),128==(128&o.flags)&&function NI(r,i,o){const u=o.directiveStart,c=o.directiveEnd,m=o.index,v=function ic(){return dt.lFrame.currentDirectiveIndex}();try{ys(m);for(let I=u;I<c;I++){const C=r.data[I],S=i[I];ia(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&$m(C,S)}}finally{ys(-1),ia(v)}}(r,i,o))}function wp(r,i,o=lr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],v=-1===m?o(i,r):r[m];r[c++]=v}}}function $o(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Vh(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Vh(r,i,o,u,c,h,m,v,I,C){const S=20+u,R=S+c,V=function gd(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:je);return o}(S,R),W="function"==typeof C?C():C;return V[1]={type:r,blueprint:V,template:o,queries:null,viewQuery:v,declTNode:i,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function jc(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Tp(r,i,o,u){let c=!1;if(ja()){const h=function md(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Ot(o,m.selectors,!1)&&(c||(c=[]),Ks(Mo(o,i),r,m.type),Nr(m)?(bu(r,o),c.unshift(m)):c.push(m))}return c}(r,i,o),m=null===u?null:{"":-1};if(null!==h){c=!0,Hm(o,r.data.length,h.length);for(let S=0;S<h.length;S++){const R=h[S];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=fd(r,i,h.length,null);for(let S=0;S<h.length;S++){const R=h[S];o.mergedAttrs=An(o.mergedAttrs,R.hostAttrs),Hc(r,o,i,C,R),$c(C,R,m),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const V=R.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),I=!0),C++}!function Ms(r,i){const u=i.directiveEnd,c=r.data,h=i.attrs,m=[];let v=null,I=null;for(let C=i.directiveStart;C<u;C++){const S=c[C],R=S.inputs,V=null===h||pv(i)?null:PI(R,h);m.push(V),v=jc(R,C,v),I=jc(S.outputs,C,I)}null!==v&&(v.hasOwnProperty("class")&&(i.flags|=16),v.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=v,i.outputs=I}(r,o)}m&&function kv(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const h=o[i[c+1]];if(null==h)throw new Oe(-301,!1);u.push(i[c],h)}}}(o,u,m)}return o.mergedAttrs=An(o.mergedAttrs,o.attrs),c}function jm(r,i,o,u,c,h){const m=h.hostBindings;if(m){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const I=~i.index;(function Cp(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(v)!=I&&v.push(I),v.push(u,c,m)}}function $m(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function bu(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function $c(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Nr(i)&&(o[""]=r)}}function Hm(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Hc(r,i,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=Rr(c.type)),m=new Ao(h,Nr(c),null);r.blueprint[u]=m,o[u]=m,jm(r,i,0,u,fd(r,o,c.hostVars,je),c)}function Fv(r,i,o){const u=lr(i,r),c=$o(o),h=r[10],m=Tu(r,Fh(r,c,null,o.onPush?64:16,u,i,h,h.createRenderer(u,o),null,null));r[i.index]=m}function RI(r,i,o,u,c,h){const m=h[i];if(null!==m){const v=u.setInput;for(let I=0;I<m.length;){const C=m[I++],S=m[I++],R=m[I++];null!==v?u.setInput(o,R,C,S):o[S]=R}}}function PI(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function Uh(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function Gm(r,i){const o=dr(i,r);if(Ui(o)){const u=o[1];80&o[2]?pd(u,o,u.template,o[8]):o[5]>0&&qm(o)}}function qm(r){for(let u=Mc(r);null!==u;u=yu(u))for(let c=10;c<u.length;c++){const h=u[c];if(1024&h[2]){const m=h[1];pd(m,h,m.template,h[8])}else h[5]>0&&qm(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=dr(o[u],r);Ui(c)&&c[5]>0&&qm(c)}}function Lv(r,i){const o=dr(i,r),u=o[1];(function Vv(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Lh(u,o,o[8])}function Tu(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function xp(r,i,o){const u=i[10];u.begin&&u.begin();try{pd(r,i,r.template,o)}catch(c){throw function jh(r,i){const o=r[9],u=o?o.get(sr,null):null;u&&u.handleError(i)}(i,c),c}finally{u.end&&u.end()}}function yd(r){!function Sp(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=Zl(o),c=u[1];Du(c,u,c.template,o)}}(r[8])}function Bn(r,i,o){oc(0),i(r,o)}const Uv=(()=>Promise.resolve(null))();function Sr(r,i,o,u,c){for(let h=0;h<o.length;){const m=o[h++],v=o[h++],I=i[m],C=r.data[m];null!==C.setInput?C.setInput(I,c,u,v):I[v]=c}}function zt(r,i,o){const u=function Hs(r,i){return Qt(i[r])}(i,r);!function rd(r,i,o){un(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function $h(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==i)for(let m=0;m<i.length;m++){const v=i[m];"number"==typeof v?h=v:1==h?c=_e(c,v):2==h&&(u=_e(u,v+": "+i[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const Km=new En("INJECTOR",-1);class Mp{get(i,o=Vr){if(o===Vr){const u=new Error(`NullInjectorError: No provider for ${pe(i)}!`);throw u.name="NullInjectorError",u}return o}}const qc=new En("Set Injector scope."),Hh={},LI={};let Jt;function jv(){return void 0===Jt&&(Jt=new Mp),Jt}function Gh(r,i=null,o=null,u){const c=vd(r,i,o,u);return c._resolveInjectorDefTypes(),c}function vd(r,i=null,o=null,u){return new qh(r,o,i||jv(),u)}class qh{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];o&&wr(o,v=>this.processProvider(v,i,o)),wr([i],v=>this.processInjectorType(v,[],h)),this.records.set(Km,Id(void 0,this));const m=this.records.get(qc);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:pe(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Vr,u=ut.Default){this.assertNotDestroyed();const c=x(this),h=Fn(void 0);try{if(!(u&ut.SkipSelf)){let v=this.records.get(i);if(void 0===v){const I=function UI(r){return"function"==typeof r||"object"==typeof r&&r instanceof En}(i)&&kt(i);v=I&&this.injectableDefInScope(I)?Id(Ed(i),Hh):null,this.records.set(i,v)}if(null!=v)return this.hydrate(i,v)}return(u&ut.Self?jv():this.parent).get(i,o=u&ut.Optional&&o===Vr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Oo]=m[Oo]||[]).unshift(pe(i)),c)throw m;return function Rt(r,i,o,u){const c=r[Oo];throw i[yc]&&c.unshift(i[yc]),r.message=function nt(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=pe(i);if(Array.isArray(i))c=i.map(pe).join(" -> ");else if("object"==typeof i){let h=[];for(let m in i)if(i.hasOwnProperty(m)){let v=i[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):pe(v)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(ru,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Oo]=null,r}(m,i,"R3InjectorError",this.source)}throw m}finally{Fn(h),x(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(pe(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(i,o,u){if(!(i=Z(i)))return!1;let c=yr(i);const h=null==c&&i.ngModule||void 0,m=void 0===h?i:h,v=-1!==u.indexOf(m);if(void 0!==h&&(c=yr(h)),null==c)return!1;if(null!=c.imports&&!v){let S;u.push(m);try{wr(c.imports,R=>{this.processInjectorType(R,o,u)&&(void 0===S&&(S=[]),S.push(R))})}finally{}if(void 0!==S)for(let R=0;R<S.length;R++){const{ngModule:V,providers:W}=S[R];wr(W,ge=>this.processProvider(ge,V,W||ct))}}this.injectorDefTypes.add(m);const I=Rr(m)||(()=>new m);this.records.set(m,Id(I,Hh));const C=c.providers;if(null!=C&&!v){const S=i;wr(C,R=>this.processProvider(R,S,C))}return void 0!==h&&void 0!==i.providers}processProvider(i,o,u){let c=wd(i=Z(i))?i:Z(i&&i.provide);const h=function Hv(r,i,o){return Ym(r)?Id(void 0,r.useValue):Id(function Zm(r,i,o){let u;if(wd(r)){const c=Z(r);return Rr(c)||Ed(c)}if(Ym(r))u=()=>Z(r.useValue);else if(function VI(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...qe(r.deps||[]));else if(function Gv(r){return!(!r||!r.useExisting)}(r))u=()=>H(Z(r.useExisting));else{const c=Z(r&&(r.useClass||r.provide));if(!function Wh(r){return!!r.deps}(r))return Rr(c)||Ed(c);u=()=>new c(...qe(r.deps))}return u}(r),Hh)}(i);if(wd(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=Id(void 0,Hh,!0),m.factory=()=>qe(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,h)}hydrate(i,o){return o.value===Hh&&(o.value=LI,o.value=o.factory()),"object"==typeof o.value&&o.value&&function qv(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Z(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Ed(r){const i=kt(r),o=null!==i?i.factory:Rr(r);if(null!==o)return o;if(r instanceof En)throw new Oe(204,!1);if(r instanceof Function)return function $v(r){const i=r.length;if(i>0)throw function Dr(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?"),new Oe(204,!1);const o=function qr(r){const i=r&&(r[wi]||r[Pi]);if(i){const o=function ts(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Oe(204,!1)}function Id(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Ym(r){return null!==r&&"object"==typeof r&&w in r}function wd(r){return"function"==typeof r}let fn=(()=>{class r{static create(o,u){var c;if(Array.isArray(o))return Gh({name:""},u,o,"");{const h=null!==(c=o.name)&&void 0!==c?c:"";return Gh({name:h},o.parent,o.providers,h)}}}return r.THROW_IF_NOT_FOUND=Vr,r.NULL=new Mp,r.\u0275prov=Kt({token:r,providedIn:"any",factory:()=>H(Km)}),r.__NG_ELEMENT_ID__=-1,r})();function t0(r,i){ji(Zl(r)[1],pn())}let kp=null;function bd(){if(!kp){const r=Pt.Symbol;if(r&&r.iterator)kp=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(kp=u)}}}return kp}function Jh(r){return!!ny(r)&&(Array.isArray(r)||!(r instanceof Map)&&bd()in r)}function ny(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Ho(r,i,o){return r[i]=o}function ni(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function oy(r,i,o,u,c,h,m,v){const I=Ie(),C=xt(),S=r+20,R=C.firstCreatePass?function Au(r,i,o,u,c,h,m,v,I){const C=i.consts,S=Bc(i,r,4,m||null,Or(C,v));Tp(i,o,S,Or(C,I)),ji(i,S);const R=S.tViews=Vh(2,S,u,c,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,S),R.queries=i.queries.embeddedTView(S)),S}(S,C,I,i,o,u,c,h,m):C.data[S];kr(R,!1);const V=I[11].createComment("");kn(C,I,V,R),Tr(V,I),Tu(I,I[S]=Uh(V,I,V,R)),Na(R)&&Ip(C,I,R),null!=m&&wp(I,R,v)}function fo(r,i=ut.Default){const o=Ie();return null===o?H(r,i):ei(pn(),o,Z(r),i)}function Mu(r,i,o){const u=Ie();return ni(u,gs(),i)&&function jr(r,i,o,u,c,h,m,v){const I=lr(i,o);let S,C=i.inputs;!v&&null!=C&&(S=C[u])?(Sr(r,o,S,u,c),os(i)&&function Rv(r,i){const o=dr(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function Nv(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,i.value||"",u):c,un(h)?h.setProperty(I,u,c):_s(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(xt(),function vn(){const r=dt.lFrame;return na(r.tView,r.selectedIndex)}(),u,r,i,u[11],o,!1),Mu}function Wp(r,i,o,u,c){const m=c?"class":"style";Sr(r,o,i.inputs[m],m,u)}function Wo(r,i,o,u){const c=Ie(),h=xt(),m=20+r,v=c[11],I=c[m]=xs(v,i,function am(){return dt.lFrame.currentNamespace}()),C=h.firstCreatePass?function Nu(r,i,o,u,c,h,m){const v=i.consts,C=Bc(i,r,2,c,Or(v,h));return Tp(i,o,C,Or(v,m)),null!==C.attrs&&$h(C,C.attrs,!1),null!==C.mergedAttrs&&$h(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(m,h,c,0,i,o,u):h.data[m];kr(C,!0);const S=C.mergedAttrs;null!==S&&Ti(v,I,S);const R=C.classes;null!==R&&Mm(v,I,R);const V=C.styles;return null!==V&&lv(v,I,V),64!=(64&C.flags)&&kn(h,c,I,C),0===function ra(){return dt.lFrame.elementDepthCount}()&&Tr(I,c),function Ba(){dt.lFrame.elementDepthCount++}(),Na(C)&&(Ip(h,c,C),function Mv(r,i,o){if(hl(i)){const c=i.directiveEnd;for(let h=i.directiveStart;h<c;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,C,c)),null!==u&&wp(c,C),Wo}function Sd(){let r=pn();ec()?function tc(){dt.lFrame.isParent=!1}():(r=r.parent,kr(r,!1));const i=r;!function Ua(){dt.lFrame.elementDepthCount--}();const o=xt();return o.firstCreatePass&&(ji(o,r),hl(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function rh(r){return 0!=(16&r.flags)}(i)&&Wp(o,i,Ie(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zf(r){return 0!=(32&r.flags)}(i)&&Wp(o,i,Ie(),i.stylesWithoutHost,!1),Sd}function zp(r,i,o,u){return Wo(r,i,o,u),Sd(),zp}function my(r){return!!r&&"function"==typeof r.then}function f0(r){return!!r&&"function"==typeof r.subscribe}const p0=f0;function Ny(r,i=""){const o=Ie(),u=xt(),c=r+20,h=u.firstCreatePass?Bc(u,c,1,i,null):u.data[c],m=o[c]=function ya(r,i){return un(r)?r.createText(i):r.createTextNode(i)}(o[11],i);kn(u,o,m,h),kr(h,!1)}function Ry(r){return ig("",r,""),Ry}function ig(r,i,o){const u=Ie(),c=function zc(r,i,o,u){return ni(r,gs(),o)?i+de(o)+u:je}(u,r,i,o);return c!==je&&zt(u,hr(),c),ig}const Da=void 0;var Hy=["en",[["a","p"],["AM","PM"],Da],[["AM","PM"],Da,Da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Da,"{1} 'at' {0}",Da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function j0(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ku={};function Fu(r){const i=function Od(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=nl(i);if(o)return o;const u=i.split("-")[0];if(o=nl(u),o)return o;if("en"===u)return Hy;throw new Error(`Missing locale data for the locale "${r}".`)}function dg(r){return Fu(r)[mt.PluralCase]}function nl(r){return r in ku||(ku[r]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[r]),ku[r]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const kd="en-US";let hg=kd;class sE{}class m_{resolveComponentFactory(i){throw function Vw(r){const i=Error(`No component factory found for ${pe(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let wf=(()=>{class r{}return r.NULL=new m_,r})();function aE(){return il(pn(),Ie())}function il(r,i){return new Vu(lr(r,i))}let Vu=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=aE,r})();class y_{}let Df=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Dn(){const r=Ie(),o=dr(pn().index,r);return function jw(r){return r[11]}(ci(o)?o:r)}(),r})(),ii=(()=>{class r{}return r.\u0275prov=Kt({token:r,providedIn:"root",factory:()=>null}),r})();class go{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const __=new go("13.2.7"),v_={};function sl(r,i,o,u,c=!1){for(;null!==o;){const h=i[o.index];if(null!==h&&u.push(Qt(h)),Kr(h))for(let v=10;v<h.length;v++){const I=h[v],C=I[1].firstChild;null!==C&&sl(I[1],I,C,u)}const m=o.type;if(8&m)sl(r,i,o.child,u);else if(32&m){const v=Ye(o,i);let I;for(;I=v();)u.push(I)}else if(16&m){const v=gp(i,o);if(Array.isArray(v))u.push(...v);else{const I=wn(i[16]);sl(I[1],I,v,u,!0)}}o=c?o.projectionNext:o.next}return u}class jd{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return sl(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Kr(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(fp(i,u),Po(o,u))}this._attachedToViewContainer=!1}Rc(this._lView[1],this._lView)}onDestroy(i){!function bp(r,i,o,u){const c=function zm(r){return r[7]||(r[7]=[])}(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&function Ea(r){return r.cleanup||(r.cleanup=[])}(r).push(u,c.length-1))}(this._lView[1],this._lView,null,i)}markForCheck(){!function va(r){for(;r;){r[2]|=64;const i=wn(r);if(Jd(r)&&!i)return r;r=i}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Wm(r,i,o){ps(!0);try{xp(r,i,o)}finally{ps(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dp(r,i){Ue(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=i}}class uE extends jd{constructor(i){super(i),this._view=i}detectChanges(){yd(this._view)}checkNoChanges(){!function kI(r){ps(!0);try{yd(r)}finally{ps(!1)}}(this._view)}get context(){return null}}class cE extends wf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Lt(i);return new yn(o,this.ngModule)}}function Ng(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class yn extends sE{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function yv(r){return r.map(Oc).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Ng(this.componentDef.inputs)}get outputs(){return Ng(this.componentDef.outputs)}create(i,o,u,c){const h=(c=c||this.ngModule)?function Hw(r,i){return{get:(o,u,c)=>{const h=r.get(o,v_,c);return h!==v_||u===v_?h:i.get(o,u,c)}}}(i,c.injector):i,m=h.get(y_,bo),v=h.get(ii,null),I=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function Dp(r,i,o){if(un(r))return r.selectRootElement(i,o===Ft.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(I,u,this.componentDef.encapsulation):xs(m.createRenderer(null,this.componentDef),C,function $w(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(C)),R=this.componentDef.onPush?576:528,V=function e0(r,i){return{components:[],scheduler:r||up,clean:Uv,playerHandler:i||null,flags:0}}(),W=Vh(0,null,null,1,0,null,null,null,null,null),ge=Fh(null,W,V,R,null,null,m,I,v,h);let Re,Le;Gs(ge);try{const tt=function Jv(r,i,o,u,c,h){const m=o[1];o[20]=r;const I=Bc(m,20,2,"#host",null),C=I.mergedAttrs=i.hostAttrs;null!==C&&($h(I,C,!0),null!==r&&(Ti(c,r,C),null!==I.classes&&Mm(c,r,I.classes),null!==I.styles&&lv(c,r,I.styles)));const S=u.createRenderer(r,i),R=Fh(o,$o(i),null,i.onPush?64:16,o[20],I,u,S,h||null,null);return m.firstCreatePass&&(Ks(Mo(I,o),m,i.type),bu(m,I),Hm(I,o.length,1)),Tu(o,R),o[20]=R}(S,this.componentDef,ge,m,I);if(S)if(u)Ti(I,S,["ng-version",__.full]);else{const{attrs:De,classes:ft}=function Mh(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&i.push(h,r[++u]):8===c&&o.push(h);else{if(!io(c))break;c=h}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);De&&Ti(I,S,De),ft&&ft.length>0&&Mm(I,S,ft.join(" "))}if(Le=na(W,20),void 0!==o){const De=Le.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Vt=o[ft];De.push(null!=Vt?Array.from(Vt):null)}}Re=function Xv(r,i,o,u,c){const h=o[1],m=function Ov(r,i,o){const u=pn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Hc(r,u,i,fd(r,i,1,null),o));const c=ti(i,r,u.directiveStart,u);Tr(c,i);const h=lr(u,i);return h&&Tr(h,i),c}(h,o,i);if(u.components.push(m),r[8]=m,c&&c.forEach(I=>I(m,i)),i.contentQueries){const I=pn();i.contentQueries(1,m,I.directiveStart)}const v=pn();return!h.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ys(v.index),jm(o[1],v,0,v.directiveStart,v.directiveEnd,i),$m(i,m)),m}(tt,this.componentDef,ge,V,[t0]),Lh(W,ge,null)}finally{Ws()}return new or(this.componentType,Re,il(Le,ge),ge,Le)}}class or extends class Lw{}{constructor(i,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new uE(c),this.componentType=i}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class $d{}const ol=new Map;class hE extends $d{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cE(this);const u=sn(i);this._bootstrapComponents=f(u.bootstrap),this._r3Injector=vd(i,o,[{provide:$d,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],pe(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=fn.THROW_IF_NOT_FOUND,u=ut.Default){return i===fn||i===$d||i===Km?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Rg extends class Gw{}{constructor(i){super(),this.moduleType=i,null!==sn(i)&&function qw(r){const i=new Set;!function o(u){const c=sn(u,!0),h=c.id;null!==h&&(function dE(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${pe(i)} vs ${pe(i.name)}`)}(h,ol.get(h),u),ol.set(h,u));const m=f(c.imports);for(const v of m)i.has(v)||(i.add(v),o(v))}(r)}(i)}create(i){return new hE(this.moduleType,i)}}function bf(r,i){const o=r[i];return o===je?void 0:o}function Tf(r,i,o,u,c,h,m){const v=i+o;return function Wc(r,i,o,u){const c=ni(r,i,o);return ni(r,i+1,u)||c}(r,v,c,h)?Ho(r,v+2,m?u.call(m,c,h):u(c,h)):bf(r,v+2)}function gE(r,i){const o=xt();let u;const c=r+20;o.firstCreatePass?(u=function Zw(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=Rr(u.type)),m=Fn(fo);try{const v=Ci(!1),I=h();return Ci(v),function ZI(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,Ie(),c,I),I}finally{Fn(m)}}function mE(r,i,o){const u=r+20,c=Ie(),h=li(c,u);return Gd(c,u)?function Bu(r,i,o,u,c,h){const m=i+o;return ni(r,m,c)?Ho(r,m+1,h?u.call(h,c):u(c)):bf(r,m+1)}(c,nr(),i,h.transform,o,h):h.transform(o)}function Fg(r,i,o,u){const c=r+20,h=Ie(),m=li(h,c);return Gd(h,c)?Tf(h,nr(),i,m.transform,o,u,m):m.transform(o,u)}function Gd(r,i){return r[1].data[i].pure}function Cf(r){return i=>{setTimeout(r,void 0,i)}}const mo=class _E extends E.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,h,m;let v=i,I=o||(()=>null),C=u;if(i&&"object"==typeof i){const R=i;v=null===(c=R.next)||void 0===c?void 0:c.bind(R),I=null===(h=R.error)||void 0===h?void 0:h.bind(R),C=null===(m=R.complete)||void 0===m?void 0:m.bind(R)}this.__isAsync&&(I=Cf(I),v&&(v=Cf(v)),C&&(C=Cf(C)));const S=super.subscribe({next:v,error:I,complete:C});return i instanceof Y.w0&&i.add(S),S}};Symbol;let Uu=(()=>{class r{}return r.__NG_ELEMENT_ID__=Qw,r})();const vE=Uu,Af=class extends vE{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Fh(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(u[19]=h.createEmbeddedView(o)),Lh(o,u,i),new jd(u)}};function Qw(){return function cl(r,i){return 4&r.type?new Af(i,r,il(r,i)):null}(pn(),Ie())}let Zo=(()=>{class r{}return r.__NG_ELEMENT_ID__=Ca,r})();function Ca(){return function w_(r,i){let o;const u=i[r.index];if(Kr(u))o=u;else{let c;if(8&r.type)c=Qt(u);else{const h=i[11];c=h.createComment("");const m=lr(r,i);_u(h,xh(h,m),c,function Ur(r,i){return un(r)?r.nextSibling(i):i.nextSibling}(h,m),!1)}i[r.index]=o=Uh(u,i,c,r),Tu(i,o)}return new Aa(o,r,i)}(pn(),Ie())}const Sf=Zo,Aa=class extends Sf{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const i=pi(this._hostTNode,this._hostLView);if(xl(i)){const o=Qr(i,this._hostLView),u=nn(i);return new vr(o[1].data[u+8],o)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=EE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,h){const m=i&&!function Ds(r){return"function"==typeof r}(i);let v;if(m)v=o;else{const R=o||{};v=R.index,u=R.injector,c=R.projectableNodes,h=R.ngModuleRef}const I=m?i:new yn(Lt(i)),C=u||this.parentInjector;if(!h&&null==I.ngModule){const V=(m?C:this.parentInjector).get($d,null);V&&(h=V)}const S=I.create(C,c,void 0,h);return this.insert(S.hostView,v),S}insert(i,o){const u=i._lView,c=u[1];if(function La(r){return Kr(r[3])}(u)){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const R=u[3],V=new Aa(R,R[6],R[3]);V.detach(V.indexOf(i))}}const h=this._adjustIndex(o),m=this._lContainer;!function hp(r,i,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=i),u<h-10?(i[4]=o[c],Rl(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const m=i[17];null!==m&&o!==m&&function Yi(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(m,i);const v=i[19];null!==v&&v.insertView(r),i[2]|=128}(c,u,m,h);const v=et(h,m),I=u[11],C=xh(I,m[7]);return null!==C&&function sd(r,i,o,u,c,h){u[0]=c,u[6]=i,Ue(r,u,o,1,c,h)}(c,m[6],I,u,C,v),i.attachToViewContainerRef(),Rl(Lg(m),h,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=EE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=fp(this._lContainer,o);u&&(Po(Lg(this._lContainer),o),Rc(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=fp(this._lContainer,o);return u&&null!=Po(Lg(this._lContainer),o)?new jd(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function EE(r){return r[8]}function Lg(r){return r[8]||(r[8]=[])}function zg(...r){}const F_=new En("Application Initializer");let L_=(()=>{class r{constructor(o){this.appInits=o,this.resolve=zg,this.reject=zg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(my(h))o.push(h);else if(p0(h)){const m=new Promise((v,I)=>{h.subscribe({complete:v,error:I})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(H(F_,8))},r.\u0275prov=Kt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Pf=new En("AppId",{providedIn:"root",factory:function $E(){return`${V_()}${V_()}${V_()}`}});function V_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HE=new En("Platform Initializer"),GE=new En("Platform ID"),qE=new En("appBootstrapListener");let WE=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Kt({token:r,factory:r.\u0275fac}),r})();const B_=new En("LocaleId",{providedIn:"root",factory:()=>Ce(B_,ut.Optional|ut.SkipSelf)||function cD(){return"undefined"!=typeof $localize&&$localize.locale||kd}()}),lD=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),dD=(()=>Promise.resolve(0))();function YE(r){"undefined"==typeof Zone?dD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class es{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function hD(){let r=Pt.requestAnimationFrame,i=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function pD(r){const i=()=>{!function fD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Pt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,JE(r),r.isCheckStableRunning=!0,QE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),JE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,m,v)=>{try{return gD(r),o.invokeTask(c,h,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&i(),mD(r)}},onInvoke:(o,u,c,h,m,v,I)=>{try{return gD(r),o.invoke(c,h,m,v,I)}finally{r.shouldCoalesceRunChangeDetection&&i(),mD(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,JE(r),QE(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,i,gb,zg,zg);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const gb={};function QE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function JE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function gD(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function mD(r){r._nesting--,QE(r)}class mb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let yD=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),YE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())YE(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(H(es))},r.\u0275prov=Kt({token:r,factory:r.\u0275fac}),r})(),_D=(()=>{class r{constructor(){this._applications=new Map,Kg.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Kg.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Kt({token:r,factory:r.\u0275fac}),r})();class yb{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function _b(r){Kg=r}let yo,Kg=new yb;const Of=new En("AllowMultipleToken");function eI(r,i,o=[]){const u=`Platform: ${i}`,c=new En(u);return(h=[])=>{let m=tI();if(!m||m.injector.get(Of,!1))if(r)r(o.concat(h).concat({provide:c,useValue:!0}));else{const v=o.concat(h).concat({provide:c,useValue:!0},{provide:qc,useValue:"platform"});!function ED(r){if(yo&&!yo.destroyed&&!yo.injector.get(Of,!1))throw new Oe(400,"");yo=r.get(nI);const i=r.get(HE,null);i&&i.forEach(o=>o())}(fn.create({providers:v,name:u}))}return function ID(r){const i=tI();if(!i)throw new Oe(401,"");return i}()}}function tI(){return yo&&!yo.destroyed?yo:null}let nI=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const v=function DD(r,i){let o;return o="noop"===r?new mb:("zone.js"===r?void 0:r)||new es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:es,useValue:v}];return v.run(()=>{const C=fn.create({providers:I,parent:this.injector,name:o.moduleType.name}),S=o.create(C),R=S.injector.get(sr,null);if(!R)throw new Oe(402,"");return v.runOutsideAngular(()=>{const V=v.onError.subscribe({next:W=>{R.handleError(W)}});S.onDestroy(()=>{Zg(this._modules,S),V.unsubscribe()})}),function bD(r,i,o){try{const u=o();return my(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(R,v,()=>{const V=S.injector.get(L_);return V.runInitializers(),V.donePromise.then(()=>(function qy(r){st(r,"Expected localeId to be defined"),"string"==typeof r&&(hg=r.toLowerCase().replace(/_/g,"-"))}(S.injector.get(B_,kd)||kd),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const c=oi({},u);return function vD(r,i,o){const u=new Rg(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(kf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Oe(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(H(fn))},r.\u0275prov=Kt({token:r,factory:r.\u0275fac}),r})();function oi(r,i){return Array.isArray(i)?i.reduce(oi,r):Object.assign(Object.assign({},r),i)}let kf=(()=>{class r{constructor(o,u,c,h,m){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new P.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{es.assertNotInAngularZone(),YE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ce.T)(v,I.pipe((0,Q.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new Oe(405,"");let c;c=o instanceof sE?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const h=function _o(r){return r.isBoundToModule}(c)?void 0:this._injector.get($d),v=c.create(fn.NULL,[],u||c.selector,h),I=v.location.nativeElement,C=v.injector.get(yD,null),S=C&&v.injector.get(_D);return C&&S&&S.registerApplication(I,C),v.onDestroy(()=>{this.detachView(v.hostView),Zg(this.components,v),S&&S.unregisterApplication(I)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Zg(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(qE,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(H(es),H(fn),H(sr),H(wf),H(L_))},r.\u0275prov=Kt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Zg(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}let Ff=!0,Yg=!1;function $_(){return Yg=!0,Ff}function TD(){if(Yg)throw new Error("Cannot enable prod mode after platform setup.");Ff=!1}let CD=(()=>{class r{}return r.__NG_ELEMENT_ID__=Lf,r})();function Lf(r){return function sI(r,i,o){if(os(r)&&!o){const u=dr(r.index,i);return new jd(u,u)}return 47&r.type?new jd(i[16],i):null}(pn(),Ie(),16==(16&r))}class cI{constructor(){}supports(i){return Jh(i)}create(i){return new z_(i)}}const Jg=(r,i)=>i;class z_{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Jg}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<lI(u,c,h)?o:u,v=lI(m,c,h),I=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const C=v-c,S=I-c;if(C!=S){for(let V=0;V<C;V++){const W=V<h.length?h[V]:h[V]=0,ge=W+V;S<=ge&&ge<C&&(h[V]=W+1)}h[m.previousIndex]=S-C}}v!==I&&i(m,v,I)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Jh(i))throw new Oe(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,h,m,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)h=i[v],m=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,v),u=!0),o=o._next}else c=0,function KI(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[bd()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,v=>{m=this._trackByFn(c,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,c)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,h,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,h,c)):i=this._addAfter(new K_(o,u),h,c),i}_verifyReinsertion(i,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?i=this._reinsertAfter(h,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,h=i._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Y_),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Y_),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class K_{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Z_{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Y_{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new Z_,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lI(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class Q_{constructor(){}supports(i){return i instanceof Map||ny(i)}create(){return new Xg}}class Xg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ny(i)))throw new Oe(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const u=new MD(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class MD{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dI(){return new J_([new cI])}let J_=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||dI()),deps:[[r,new Js,new hn]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Oe(901,"")}}return r.\u0275prov=Kt({token:r,providedIn:"root",factory:dI}),r})();function hI(){return new X_([new Q_])}let X_=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||hI()),deps:[[r,new Js,new hn]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(u)return u;throw new Oe(901,"")}}return r.\u0275prov=Kt({token:r,providedIn:"root",factory:hI}),r})();const fI=eI(null,"core",[{provide:GE,useValue:"unknown"},{provide:nI,deps:[fn]},{provide:_D,deps:[]},{provide:WE,deps:[]}]);let pI=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(H(kf))},r.\u0275mod=K({type:r}),r.\u0275inj=qt({}),r})()},3942:(at,Te,O)=>{O.d(Te,{Z:()=>Oe});var E=O(2090),Y=O(4859),P=O(9681),ce=O(1877);class Q{constructor(de,Ee){this._delegate=de,this.firebase=Ee,(0,P._addComponent)(de,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(de,Ee=P._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(de);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Je=Ge.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Ee})}_removeServiceInstance(de,Ee=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ee)}_addComponent(de){(0,P._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,P._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function _e(){const Ve=function pe(Ve){const de={},Ee={__esModule:!0,initializeApp:function be(Be,ee={}){const q=P.initializeApp(Be,ee);if((0,E.r3)(de,q.name))return de[q.name];const X=new Ve(q,Ee);return de[q.name]=X,X},app:Ge,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const ee=Be.name,q=ee.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const X=(le=Ge())=>{if("function"!=typeof le[q])throw ae.create("invalid-app-argument",{appName:ee});return le[q]()};void 0!==Be.serviceProps&&(0,E.ZB)(X,Be.serviceProps),Ee[q]=X,Ve.prototype[q]=function(...le){return this._getService.bind(this,ee).apply(this,Be.multipleInstances?le:[])}}return"PUBLIC"===Be.type?Ee[q]:null},removeApp:function Je(Be){delete de[Be]},useAsService:function He(Be,ee){return"serverAuth"===ee?null:ee},modularAPIs:P}};function Ge(Be){if(!(0,E.r3)(de,Be=Be||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Be});return de[Be]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function me(){return Object.keys(de).map(Be=>de[Be])}}),Ge.App=Ve,Ee}(Q);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function de(Ee){(0,E.ZB)(Ve,Ee)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Ve}(),U=new ce.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Me(Ve){(0,P.registerVersion)("@firebase/app-compat","0.1.21",Ve)}()},9681:(at,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>yr,_DEFAULT_ENTRY_NAME:()=>bn,_addComponent:()=>tn,_addOrOverwriteComponent:()=>ai,_apps:()=>pt,_clearComponents:()=>kt,_components:()=>en,_getProvider:()=>Ri,_registerComponent:()=>Kt,_removeServiceInstance:()=>qt,deleteApp:()=>Oi,getApp:()=>_r,getApps:()=>Pi,initializeApp:()=>wi,onLog:()=>$n,registerVersion:()=>Mr,setLogLevel:()=>Fn});var E=O(5861),Y=O(4859),P=O(1877),ce=O(2090);class Q{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function fe(ze){const we=ze.getComponent();return"VERSION"===(null==we?void 0:we.type)}(Ze)){const lt=Ze.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(Ze=>Ze).join(" ")}}const ae="@firebase/app",_e=new P.Yd("@firebase/app"),bn="[DEFAULT]",st={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pt=new Map,en=new Map;function tn(ze,we){try{ze.container.addComponent(we)}catch(Ze){_e.debug(`Component ${we.name} failed to register with FirebaseApp ${ze.name}`,Ze)}}function ai(ze,we){ze.container.addOrOverwriteComponent(we)}function Kt(ze){const we=ze.name;if(en.has(we))return _e.debug(`There were multiple attempts to register component ${we}.`),!1;en.set(we,ze);for(const Ze of pt.values())tn(Ze,ze);return!0}function Ri(ze,we){const Ze=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),ze.container.getProvider(we)}function qt(ze,we,Ze=bn){Ri(ze,we).clearInstance(Ze)}function kt(){en.clear()}const qr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ts{constructor(we,Ze,lt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}const yr="9.6.10";function wi(ze,we={}){"object"!=typeof we&&(we={name:we});const Ze=Object.assign({name:bn,automaticDataCollectionEnabled:!1},we),lt=Ze.name;if("string"!=typeof lt||!lt)throw qr.create("bad-app-name",{appName:String(lt)});const Nt=pt.get(lt);if(Nt){if((0,ce.vZ)(ze,Nt.options)&&(0,ce.vZ)(Ze,Nt.config))return Nt;throw qr.create("duplicate-app",{appName:lt})}const St=new Y.H0(lt);for(const L of en.values())St.addComponent(L);const B=new ts(ze,Ze,St);return pt.set(lt,B),B}function _r(ze=bn){const we=pt.get(ze);if(!we)throw qr.create("no-app",{appName:ze});return we}function Pi(){return Array.from(pt.values())}function Oi(ze){return ut.apply(this,arguments)}function ut(){return(ut=(0,E.Z)(function*(ze){const we=ze.name;pt.has(we)&&(pt.delete(we),yield Promise.all(ze.container.getProviders().map(Ze=>Ze.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function Mr(ze,we,Ze){var lt;let Nt=null!==(lt=st[ze])&&void 0!==lt?lt:ze;Ze&&(Nt+=`-${Ze}`);const St=Nt.match(/\s|\//),B=we.match(/\s|\//);if(St||B){const L=[`Unable to register library "${Nt}" with version "${we}":`];return St&&L.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),St&&B&&L.push("and"),B&&L.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void _e.warn(L.join(" "))}Kt(new Y.wA(`${Nt}-version`,()=>({library:Nt,version:we}),"VERSION"))}function $n(ze,we){if(null!==ze&&"function"!=typeof ze)throw qr.create("invalid-log-argument");(0,P.Am)(ze,we)}function Fn(ze){(0,P.Ub)(ze)}const dn="firebase-heartbeat-store";let Hn=null;function ns(){return Hn||(Hn=(0,ce.X3)("firebase-heartbeat-database",1,(ze,we)=>{0===we&&ze.createObjectStore(dn)}).catch(ze=>{throw qr.create("storage-open",{originalErrorMessage:ze.message})})),Hn}function Ft(){return(Ft=(0,E.Z)(function*(ze){try{return(yield ns()).transaction(dn).objectStore(dn).get(Qn(ze))}catch(we){throw qr.create("storage-get",{originalErrorMessage:we.message})}})).apply(this,arguments)}function rt(ze,we){return yt.apply(this,arguments)}function yt(){return(yt=(0,E.Z)(function*(ze,we){try{const lt=(yield ns()).transaction(dn,"readwrite");return yield lt.objectStore(dn).put(we,Qn(ze)),lt.complete}catch(Ze){throw qr.create("storage-set",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function Qn(ze){return`${ze.name}!${ze.options.appId}`}class Ls{constructor(we){this.container=we,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new ct(Ze),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var we=this;return(0,E.Z)(function*(){const lt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=ar();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!we._heartbeatsCache.heartbeats.some(St=>St.date===Nt))return we._heartbeatsCache.heartbeats.push({date:Nt,agent:lt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(St=>{const B=new Date(St.date).valueOf();return Date.now()-B<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,E.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const Ze=ar(),{heartbeatsToSend:lt,unsentEntries:Nt}=function Jn(ze,we=1024){const Ze=[];let lt=ze.slice();for(const Nt of ze){const St=Ze.find(B=>B.agent===Nt.agent);if(St){if(St.dates.push(Nt.date),ur(Ze)>we){St.dates.pop();break}}else if(Ze.push({agent:Nt.agent,dates:[Nt.date]}),ur(Ze)>we){Ze.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:lt}}(we._heartbeatsCache.heartbeats),St=(0,ce.L)(JSON.stringify({version:2,heartbeats:lt}));return we._heartbeatsCache.lastSentHeartbeatDate=Ze,Nt.length>0?(we._heartbeatsCache.heartbeats=Nt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),St})()}}function ar(){return(new Date).toISOString().substring(0,10)}class ct{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,E.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function Yo(ze){return Ft.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var Ze=this;return(0,E.Z)(function*(){var lt;if(yield Ze._canUseIndexedDBPromise){const St=yield Ze.read();return rt(Ze.app,{lastSentHeartbeatDate:null!==(lt=we.lastSentHeartbeatDate)&&void 0!==lt?lt:St.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var Ze=this;return(0,E.Z)(function*(){var lt;if(yield Ze._canUseIndexedDBPromise){const St=yield Ze.read();return rt(Ze.app,{lastSentHeartbeatDate:null!==(lt=we.lastSentHeartbeatDate)&&void 0!==lt?lt:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...we.heartbeats]})}})()}}function ur(ze){return(0,ce.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function Mt(ze){Kt(new Y.wA("platform-logger",we=>new Q(we),"PRIVATE")),Kt(new Y.wA("heartbeat",we=>new Ls(we),"PRIVATE")),Mr(ae,"0.7.20",ze),Mr(ae,"0.7.20","esm2017"),Mr("fire-js","")}("")},4859:(at,Te,O)=>{O.d(Te,{wA:()=>P,H0:()=>pe});var E=O(5861),Y=O(2090);class P{constructor($,U,Z){this.name=$,this.instanceFactory=U,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ce="[DEFAULT]";class Q{constructor($,U){this.name=$,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const U=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(U)){const Z=new Y.BH;if(this.instancesDeferred.set(U,Z),this.isInitialized(U)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:U});Qe&&Z.resolve(Qe)}catch(Qe){}}return this.instancesDeferred.get(U).promise}getImmediate($){var U;const Z=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Qe=null!==(U=null==$?void 0:$.optional)&&void 0!==U&&U;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Me){if(Qe)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ae(_e){return"EAGER"===_e.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(U){}for(const[U,Z]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(U);try{const Me=this.getOrInitializeService({instanceIdentifier:Qe});Z.resolve(Me)}catch(Me){}}}}clearInstance($=ce){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,E.Z)(function*(){const U=Array.from($.instances.values());yield Promise.all([...U.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...U.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ce){return this.instances.has($)}getOptions($=ce){return this.instancesOptions.get($)||{}}initialize($={}){const{options:U={}}=$,Z=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:Z,options:U});for(const[Me,Oe]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Me)&&Oe.resolve(Qe);return Qe}onInit($,U){var Z;const Qe=this.normalizeInstanceIdentifier(U),Me=null!==(Z=this.onInitCallbacks.get(Qe))&&void 0!==Z?Z:new Set;Me.add($),this.onInitCallbacks.set(Qe,Me);const Oe=this.instances.get(Qe);return Oe&&$(Oe,Qe),()=>{Me.delete($)}}invokeOnInitCallbacks($,U){const Z=this.onInitCallbacks.get(U);if(Z)for(const Qe of Z)try{Qe($,U)}catch(Me){}}getOrInitializeService({instanceIdentifier:$,options:U={}}){let Z=this.instances.get($);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=$,_e===ce?void 0:_e),options:U}),this.instances.set($,Z),this.instancesOptions.set($,U),this.invokeOnInitCallbacks(Z,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Z)}catch(Qe){}var _e;return Z||null}normalizeInstanceIdentifier($=ce){return this.component?this.component.multipleInstances?$:ce:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor($){this.name=$,this.providers=new Map}addComponent($){const U=this.getProvider($.name);if(U.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);U.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const U=new Q($,this);return this.providers.set($,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Te,O)=>{O.d(Te,{in:()=>Y,Yd:()=>ae,Ub:()=>pe,Am:()=>_e});const E=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ce=Y.INFO,Q={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=($,U,...Z)=>{if(U<$.logLevel)return;const Qe=(new Date).toISOString(),Me=Q[U];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Me](`[${Qe}]  ${$.name}:`,...Z)};class ae{constructor(U){this.name=U,this._logLevel=ce,this._logHandler=fe,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Y))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...U),this._logHandler(this,Y.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...U),this._logHandler(this,Y.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...U),this._logHandler(this,Y.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...U),this._logHandler(this,Y.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...U),this._logHandler(this,Y.ERROR,...U)}}function pe($){E.forEach(U=>{U.setLogLevel($)})}function _e($,U){for(const Z of E){let Qe=null;U&&U.level&&(Qe=P[U.level]),Z.userLogHandler=null===$?null:(Me,Oe,...Ve)=>{const de=Ve.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Je){return null}}).filter(Ee=>Ee).join(" ");Oe>=(null!=Qe?Qe:Me.logLevel)&&$({level:Y[Oe].toLowerCase(),message:de,args:Ve,type:Me.name})}}}},5861:(at,Te,O)=>{function E(P,ce,Q,fe,ae,pe,_e){try{var $=P[pe](_e),U=$.value}catch(Z){return void Q(Z)}$.done?ce(U):Promise.resolve(U).then(fe,ae)}function Y(P){return function(){var ce=this,Q=arguments;return new Promise(function(fe,ae){var pe=P.apply(ce,Q);function _e(U){E(pe,fe,ae,_e,$,"next",U)}function $(U){E(pe,fe,ae,_e,$,"throw",U)}_e(void 0)})}}O.d(Te,{Z:()=>Y})}},at=>{at(at.s=4989)}]);